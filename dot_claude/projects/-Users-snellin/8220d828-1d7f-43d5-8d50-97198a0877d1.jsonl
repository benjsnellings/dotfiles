{"parentUuid":null,"isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","type":"user","message":{"role":"user","content":"in Downloads/error.txt place a newline before every at"},"uuid":"58cc7510-e2c6-4dbe-9d59-c97c6aa958f0","timestamp":"2025-07-28T22:51:15.060Z"}
{"parentUuid":"58cc7510-e2c6-4dbe-9d59-c97c6aa958f0","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","message":{"id":"msg_bdrk_016jrmM2N12rVDZhYja4pfMU","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"text","text":"I'll help you add a newline before every \"at\" in the Downloads/error.txt file. Let me first read the file to understand its current content."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":51578,"cache_read_input_tokens":0,"output_tokens":5}},"type":"assistant","uuid":"ed8abdab-b5a4-4b4c-a60f-a9b881781b57","timestamp":"2025-07-28T22:51:18.302Z"}
{"parentUuid":"ed8abdab-b5a4-4b4c-a60f-a9b881781b57","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","message":{"id":"msg_bdrk_016jrmM2N12rVDZhYja4pfMU","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"tool_use","id":"toolu_bdrk_01EhKSLQsX8coTYjmuvsadEZ","name":"Read","input":{"file_path":"/Users/snellin/Downloads/error.txt"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":51578,"cache_read_input_tokens":0,"output_tokens":5}},"type":"assistant","uuid":"584a9e8b-19b5-4ae2-a63a-20e33a605da4","timestamp":"2025-07-28T22:51:18.728Z"}
{"parentUuid":"584a9e8b-19b5-4ae2-a63a-20e33a605da4","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_bdrk_01EhKSLQsX8coTYjmuvsadEZ","type":"tool_result","content":"     1\tReceived response status [FAILED] from custom resource. Message returned: AccessDenied: User: arn:aws:sts::619005574897:assumed-role/Snellin732025StringWarn-F-CustomCrossAccountZoneDel-eKw2xF1ypg3b/Snellin732025StringWarn-F-CustomCrossAccountZoneDe-jQHwe2SHr5VN is not authorized to perform: sts:AssumeRole on resource: arn:aws:iam::619005574897:role/dns-auto-update-role-us-west-2-beta at throwDefaultError (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:867:20) at /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:876:5 at de_CommandError (/var/runtime/node_modules/@aws-sdk/nested-clients/dist-cjs/submodules/sts/index.js:299:14) at process.processTicksAndRejections (node:internal/process/task_queues:95:5) at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-serde/dist-cjs/index.js:35:20 at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:193:18 at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38 at async /var/runtime/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22 at async /var/runtime/node_modules/@aws-sdk/credential-providers/dist-cjs/fromTemporaryCredentials.base.js:129:33 at async coalesceProvider (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:394:18) (RequestId: 59446686-b1f6-4844-b53c-bd97e8ec484b)\n     2\t"}]},"uuid":"4f317401-5d3b-4290-8765-ce8f4422c394","timestamp":"2025-07-28T22:51:18.745Z","toolUseResult":{"type":"text","file":{"filePath":"/Users/snellin/Downloads/error.txt","content":"Received response status [FAILED] from custom resource. Message returned: AccessDenied: User: arn:aws:sts::619005574897:assumed-role/Snellin732025StringWarn-F-CustomCrossAccountZoneDel-eKw2xF1ypg3b/Snellin732025StringWarn-F-CustomCrossAccountZoneDe-jQHwe2SHr5VN is not authorized to perform: sts:AssumeRole on resource: arn:aws:iam::619005574897:role/dns-auto-update-role-us-west-2-beta at throwDefaultError (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:867:20) at /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:876:5 at de_CommandError (/var/runtime/node_modules/@aws-sdk/nested-clients/dist-cjs/submodules/sts/index.js:299:14) at process.processTicksAndRejections (node:internal/process/task_queues:95:5) at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-serde/dist-cjs/index.js:35:20 at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:193:18 at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38 at async /var/runtime/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22 at async /var/runtime/node_modules/@aws-sdk/credential-providers/dist-cjs/fromTemporaryCredentials.base.js:129:33 at async coalesceProvider (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:394:18) (RequestId: 59446686-b1f6-4844-b53c-bd97e8ec484b)\n","numLines":2,"startLine":1,"totalLines":2}}}
{"parentUuid":"4f317401-5d3b-4290-8765-ce8f4422c394","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","message":{"id":"msg_bdrk_018cDtNg4WSDKujx2SmTMzfM","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"text","text":"Now I'll edit the file to add a newline before every occurrence of \" at \":"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":675,"cache_read_input_tokens":51578,"output_tokens":1}},"type":"assistant","uuid":"a3393ae5-d500-40fb-8e35-997a32fa606b","timestamp":"2025-07-28T22:51:21.855Z"}
{"parentUuid":"a3393ae5-d500-40fb-8e35-997a32fa606b","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","message":{"id":"msg_bdrk_018cDtNg4WSDKujx2SmTMzfM","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"tool_use","id":"toolu_bdrk_01K77XrKFaJ5AGF9MoRsWct3","name":"Edit","input":{"file_path":"/Users/snellin/Downloads/error.txt","old_string":"Received response status [FAILED] from custom resource. Message returned: AccessDenied: User: arn:aws:sts::619005574897:assumed-role/Snellin732025StringWarn-F-CustomCrossAccountZoneDel-eKw2xF1ypg3b/Snellin732025StringWarn-F-CustomCrossAccountZoneDe-jQHwe2SHr5VN is not authorized to perform: sts:AssumeRole on resource: arn:aws:iam::619005574897:role/dns-auto-update-role-us-west-2-beta at throwDefaultError (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:867:20) at /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:876:5 at de_CommandError (/var/runtime/node_modules/@aws-sdk/nested-clients/dist-cjs/submodules/sts/index.js:299:14) at process.processTicksAndRejections (node:internal/process/task_queues:95:5) at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-serde/dist-cjs/index.js:35:20 at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:193:18 at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38 at async /var/runtime/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22 at async /var/runtime/node_modules/@aws-sdk/credential-providers/dist-cjs/fromTemporaryCredentials.base.js:129:33 at async coalesceProvider (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:394:18) (RequestId: 59446686-b1f6-4844-b53c-bd97e8ec484b)","new_string":"Received response status [FAILED] from custom resource. Message returned: AccessDenied: User: arn:aws:sts::619005574897:assumed-role/Snellin732025StringWarn-F-CustomCrossAccountZoneDel-eKw2xF1ypg3b/Snellin732025StringWarn-F-CustomCrossAccountZoneDe-jQHwe2SHr5VN is not authorized to perform: sts:AssumeRole on resource: arn:aws:iam::619005574897:role/dns-auto-update-role-us-west-2-beta\nat throwDefaultError (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:867:20)\nat /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:876:5\nat de_CommandError (/var/runtime/node_modules/@aws-sdk/nested-clients/dist-cjs/submodules/sts/index.js:299:14)\nat process.processTicksAndRejections (node:internal/process/task_queues:95:5)\nat async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-serde/dist-cjs/index.js:35:20\nat async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:193:18\nat async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38\nat async /var/runtime/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22\nat async /var/runtime/node_modules/@aws-sdk/credential-providers/dist-cjs/fromTemporaryCredentials.base.js:129:33\nat async coalesceProvider (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:394:18) (RequestId: 59446686-b1f6-4844-b53c-bd97e8ec484b)"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":675,"cache_read_input_tokens":51578,"output_tokens":1242}},"type":"assistant","uuid":"05057cc9-c1c9-46b7-a87b-5af154734139","timestamp":"2025-07-28T22:51:31.233Z"}
{"parentUuid":"05057cc9-c1c9-46b7-a87b-5af154734139","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_bdrk_01K77XrKFaJ5AGF9MoRsWct3","type":"tool_result","content":"The file /Users/snellin/Downloads/error.txt has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n     1\tReceived response status [FAILED] from custom resource. Message returned: AccessDenied: User: arn:aws:sts::619005574897:assumed-role/Snellin732025StringWarn-F-CustomCrossAccountZoneDel-eKw2xF1ypg3b/Snellin732025StringWarn-F-CustomCrossAccountZoneDe-jQHwe2SHr5VN is not authorized to perform: sts:AssumeRole on resource: arn:aws:iam::619005574897:role/dns-auto-update-role-us-west-2-beta\n     2\tat throwDefaultError (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:867:20)\n     3\tat /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:876:5\n     4\tat de_CommandError (/var/runtime/node_modules/@aws-sdk/nested-clients/dist-cjs/submodules/sts/index.js:299:14)\n     5\tat process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n     6\tat async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-serde/dist-cjs/index.js:35:20\n     7\tat async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:193:18\n     8\tat async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38\n     9\tat async /var/runtime/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22\n    10\tat async /var/runtime/node_modules/@aws-sdk/credential-providers/dist-cjs/fromTemporaryCredentials.base.js:129:33\n    11\tat async coalesceProvider (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:394:18) (RequestId: 59446686-b1f6-4844-b53c-bd97e8ec484b)\n    12\t"}]},"uuid":"e5717caa-0552-433e-b892-c71338b32f6e","timestamp":"2025-07-28T22:51:34.121Z","toolUseResult":{"filePath":"/Users/snellin/Downloads/error.txt","oldString":"Received response status [FAILED] from custom resource. Message returned: AccessDenied: User: arn:aws:sts::619005574897:assumed-role/Snellin732025StringWarn-F-CustomCrossAccountZoneDel-eKw2xF1ypg3b/Snellin732025StringWarn-F-CustomCrossAccountZoneDe-jQHwe2SHr5VN is not authorized to perform: sts:AssumeRole on resource: arn:aws:iam::619005574897:role/dns-auto-update-role-us-west-2-beta at throwDefaultError (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:867:20) at /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:876:5 at de_CommandError (/var/runtime/node_modules/@aws-sdk/nested-clients/dist-cjs/submodules/sts/index.js:299:14) at process.processTicksAndRejections (node:internal/process/task_queues:95:5) at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-serde/dist-cjs/index.js:35:20 at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:193:18 at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38 at async /var/runtime/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22 at async /var/runtime/node_modules/@aws-sdk/credential-providers/dist-cjs/fromTemporaryCredentials.base.js:129:33 at async coalesceProvider (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:394:18) (RequestId: 59446686-b1f6-4844-b53c-bd97e8ec484b)","newString":"Received response status [FAILED] from custom resource. Message returned: AccessDenied: User: arn:aws:sts::619005574897:assumed-role/Snellin732025StringWarn-F-CustomCrossAccountZoneDel-eKw2xF1ypg3b/Snellin732025StringWarn-F-CustomCrossAccountZoneDe-jQHwe2SHr5VN is not authorized to perform: sts:AssumeRole on resource: arn:aws:iam::619005574897:role/dns-auto-update-role-us-west-2-beta\nat throwDefaultError (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:867:20)\nat /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:876:5\nat de_CommandError (/var/runtime/node_modules/@aws-sdk/nested-clients/dist-cjs/submodules/sts/index.js:299:14)\nat process.processTicksAndRejections (node:internal/process/task_queues:95:5)\nat async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-serde/dist-cjs/index.js:35:20\nat async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:193:18\nat async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38\nat async /var/runtime/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22\nat async /var/runtime/node_modules/@aws-sdk/credential-providers/dist-cjs/fromTemporaryCredentials.base.js:129:33\nat async coalesceProvider (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:394:18) (RequestId: 59446686-b1f6-4844-b53c-bd97e8ec484b)","originalFile":"Received response status [FAILED] from custom resource. Message returned: AccessDenied: User: arn:aws:sts::619005574897:assumed-role/Snellin732025StringWarn-F-CustomCrossAccountZoneDel-eKw2xF1ypg3b/Snellin732025StringWarn-F-CustomCrossAccountZoneDe-jQHwe2SHr5VN is not authorized to perform: sts:AssumeRole on resource: arn:aws:iam::619005574897:role/dns-auto-update-role-us-west-2-beta at throwDefaultError (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:867:20) at /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:876:5 at de_CommandError (/var/runtime/node_modules/@aws-sdk/nested-clients/dist-cjs/submodules/sts/index.js:299:14) at process.processTicksAndRejections (node:internal/process/task_queues:95:5) at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-serde/dist-cjs/index.js:35:20 at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:193:18 at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38 at async /var/runtime/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22 at async /var/runtime/node_modules/@aws-sdk/credential-providers/dist-cjs/fromTemporaryCredentials.base.js:129:33 at async coalesceProvider (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:394:18) (RequestId: 59446686-b1f6-4844-b53c-bd97e8ec484b)\n","structuredPatch":[{"oldStart":1,"oldLines":1,"newStart":1,"newLines":11,"lines":["-Received response status [FAILED] from custom resource. Message returned: AccessDenied: User: arn:aws:sts::619005574897:assumed-role/Snellin732025StringWarn-F-CustomCrossAccountZoneDel-eKw2xF1ypg3b/Snellin732025StringWarn-F-CustomCrossAccountZoneDe-jQHwe2SHr5VN is not authorized to perform: sts:AssumeRole on resource: arn:aws:iam::619005574897:role/dns-auto-update-role-us-west-2-beta at throwDefaultError (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:867:20) at /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:876:5 at de_CommandError (/var/runtime/node_modules/@aws-sdk/nested-clients/dist-cjs/submodules/sts/index.js:299:14) at process.processTicksAndRejections (node:internal/process/task_queues:95:5) at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-serde/dist-cjs/index.js:35:20 at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:193:18 at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38 at async /var/runtime/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22 at async /var/runtime/node_modules/@aws-sdk/credential-providers/dist-cjs/fromTemporaryCredentials.base.js:129:33 at async coalesceProvider (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:394:18) (RequestId: 59446686-b1f6-4844-b53c-bd97e8ec484b)","+Received response status [FAILED] from custom resource. Message returned: AccessDenied: User: arn:aws:sts::619005574897:assumed-role/Snellin732025StringWarn-F-CustomCrossAccountZoneDel-eKw2xF1ypg3b/Snellin732025StringWarn-F-CustomCrossAccountZoneDe-jQHwe2SHr5VN is not authorized to perform: sts:AssumeRole on resource: arn:aws:iam::619005574897:role/dns-auto-update-role-us-west-2-beta","+at throwDefaultError (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:867:20)","+at /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/smithy-client/dist-cjs/index.js:876:5","+at de_CommandError (/var/runtime/node_modules/@aws-sdk/nested-clients/dist-cjs/submodules/sts/index.js:299:14)","+at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","+at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-serde/dist-cjs/index.js:35:20","+at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:193:18","+at async /var/runtime/node_modules/@aws-sdk/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38","+at async /var/runtime/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22","+at async /var/runtime/node_modules/@aws-sdk/credential-providers/dist-cjs/fromTemporaryCredentials.base.js:129:33","+at async coalesceProvider (/var/runtime/node_modules/@aws-sdk/node_modules/@smithy/core/dist-cjs/index.js:394:18) (RequestId: 59446686-b1f6-4844-b53c-bd97e8ec484b)"]}],"userModified":false,"replaceAll":false}}
{"parentUuid":"e5717caa-0552-433e-b892-c71338b32f6e","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","message":{"id":"msg_bdrk_01TrLPLTqJaZbcSdG9cs9qxC","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"text","text":"Done! I've added a newline before each \"at\" occurrence in the error.txt file, formatting the stack trace to be more readable with each stack frame on its own line."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":1893,"cache_read_input_tokens":52253,"output_tokens":1}},"type":"assistant","uuid":"ccba8a79-f14e-46c3-b727-17549af7def3","timestamp":"2025-07-28T22:51:36.605Z"}
{"parentUuid":"ccba8a79-f14e-46c3-b727-17549af7def3","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","type":"user","message":{"role":"user","content":"are there any details about this error on builderhub?"},"uuid":"af879bc0-b0fd-470f-b354-36cecc4a23fb","timestamp":"2025-07-28T22:52:26.492Z"}
{"parentUuid":"af879bc0-b0fd-470f-b354-36cecc4a23fb","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","message":{"id":"msg_bdrk_01LbSu3oCye1jtuPdcnD8SwF","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"text","text":"I'll search BuilderHub for information about this AWS STS AssumeRole error you're encountering."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":59,"cache_read_input_tokens":54146,"output_tokens":1}},"type":"assistant","uuid":"0549495a-ae7d-4b53-89e3-d98bd302785c","timestamp":"2025-07-28T22:52:29.473Z"}
{"parentUuid":"0549495a-ae7d-4b53-89e3-d98bd302785c","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","message":{"id":"msg_bdrk_01LbSu3oCye1jtuPdcnD8SwF","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"tool_use","id":"toolu_bdrk_0148vMfBeo9thge9EdBGevWp","name":"mcp__builder-mcp__InternalSearch","input":{"query":"AccessDenied sts:AssumeRole not authorized CustomCrossAccountZone","domain":"BUILDER_HUB"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":59,"cache_read_input_tokens":54146,"output_tokens":1}},"type":"assistant","uuid":"b0df78b0-7b6d-440c-8ad1-cb440392d205","timestamp":"2025-07-28T22:52:30.297Z"}
{"parentUuid":"b0df78b0-7b6d-440c-8ad1-cb440392d205","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_bdrk_0148vMfBeo9thge9EdBGevWp","type":"tool_result","content":[{"type":"text","text":"{\"content\":{\"results\":[{\"url\":\"https://docs.hub.amazon.dev/docs/mrc/user-guide/infrastructure-pipelines-troubleshooting/\",\"displayTitle\":\"Troubleshooting infrastructure pipelines\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":1,\"categoryList\":[],\"body\":\"...Failure with error message “User: arn:<partition>:iam::<pipeline\\\\_team\\\\_account\\\\_id>:user/PipelinesAssumeRole is not <em>authorized</em> to perform: <em>sts</em>:<em>AssumeRole</em> on resource: arn...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/rde/user-guide/turtle/\",\"displayTitle\":\"Turtle\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":2,\"categoryList\":[],\"body\":\"...Turtle IAM roles: > ```json > { > \\\"Version\\\": \\\"2012-10-17\\\", > \\\"Statement\\\": { > \\\"Effect\\\": \\\"Allow\\\", > \\\"Action\\\": \\\"<em>sts</em>:<em>AssumeRole</em>\\\", > \\\"Resource\\\": [ > \\\"arn:aws:iam::*ACCOUNT_ID_1*:role/*TURTLE_ROLE_1*\\\", > \\\"arn:aws:iam::*ACCOUNT_ID_1*:role/*TURTLE...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/rde/user-guide/troubleshooting/\",\"displayTitle\":\"Troubleshooting RDE issues\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":3,\"categoryList\":[],\"body\":\"...you may encounter while working with RDE, along with their potential\\ncauses/solutions. ## Access Denied: assumed-role/X is not <em>authorized</em> to perform <em>sts</em>:<em>AssumeRole</em> on resource role/X IAM has made a change to the behavior of role trust policies...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/tps-generator/user-guide/troubleshooting/\",\"displayTitle\":\"Troubleshooting\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":4,\"categoryList\":[],\"body\":\"...Group, will cleanup temp resources: [java] com.amazonaws.services.ec2.model.AmazonEC2Exception: You are not <em>authorized</em> to perform this operation. User: arn:aws:<em>sts</em>::691666206581:assumed-role/TPS-Gen/sargejac-Isengard is not <em>authorized</em> to perform: ec2:CreateLaunchTemplate on...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/pipelines/cdk-guide/troubleshooting-bootstrap-permissions-upgrade-cdkv2/\",\"displayTitle\":\"BONESBootstrap lacks permissions after upgrading to CDKv2\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753401600000,\"score\":0,\"rank\":5,\"categoryList\":[],\"body\":\"...may see the following error message\\nwhen deploying your pipeline or bootstrapping your accounts: ```none\\nUser: arn:aws:<em>sts</em>::***:assumed-role/BONESBootstrap/*** is not <em>authorized</em> to perform ... on resource ...\\n``` Your Isengard-managed policy `BONESBootstrapUserPolicy` may be out of sync; use...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/hydra/cli-guide/troubleshooting/\",\"displayTitle\":\"Troubleshooting\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":6,\"categoryList\":[],\"body\":\"...parameters) in IAM includes: ```none\\n{ \\\"Effect\\\": \\\"Allow\\\", \\\"Principal\\\": { \\\"Service\\\": \\\"lambda.amazonaws.com\\\" }, \\\"Action\\\": \\\"<em>sts</em>:<em>AssumeRole</em>\\\"\\n}\\n``` ### PersistentConfigurationId not found An example error message: ```none\\nERROR GigaHydraClientException: PersistentConfigurationId...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/hydra/user-guide/howto-set-up-cross-account-testing-lpt-without-pdg/\",\"displayTitle\":\"Cross Account Testing without PDGs in an LPT Pipeline\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":7,\"categoryList\":[],\"body\":\"...tasks.amazonaws.com\\\", \\\"lambda.amazonaws.com\\\" ] }, \\\"Action\\\": \\\"<em>sts</em>:<em>AssumeRole</em>\\\" }, { \\\"Effect\\\": \\\"Allow\\\", \\\"Principal\\\": { \\\"Service\\\": \\\"compute...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/apollo/user-guide/howto-apollo-for-native-ec2-permissions/\",\"displayTitle\":\"Apollo for Native EC2 Permissions\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":8,\"categoryList\":[],\"body\":\"...trust policy ```json\\n{ \\\"Effect\\\": \\\"Allow\\\", \\\"Principal\\\": { \\\"AWS\\\": \\\"arn:aws-iso:iam::806528742059:root\\\" }, \\\"Action\\\": \\\"<em>sts</em>:<em>AssumeRole</em>\\\", \\\"Condition\\\": {}\\n}\\n``` #### LCK trust policy ```json\\n{ \\\"Effect\\\": \\\"Allow\\\", \\\"Principal\\\": { \\\"AWS\\\": \\\"arn:aws-iso-b:iam...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/mrc/user-guide/reality-checks/\",\"displayTitle\":\"Reality checks\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":9,\"categoryList\":[],\"body\":\"...Statement\\\": [ { \\\"Effect\\\": \\\"Allow\\\", \\\"Principal\\\": { \\\"Service\\\": \\\"cloudformation.amazonaws.com\\\" }, \\\"Action\\\": \\\"<em>sts</em>:<em>AssumeRole</em>\\\" } ]\\n}\\n``` See [Provide Permissions (MRCF-Permissions Role)](https://docs.hub.amazon.dev/docs/mrc/user-guide/mrcf-getting-started.html...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/gitfarm/user-guide/codesuite-source-replication/\",\"displayTitle\":\"Source replication for AWS Code Suite\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":10,\"categoryList\":[],\"body\":\"...Version\\\": \\\"2012-10-17\\\",\\n> \\\"Statement\\\": [\\n> {\\n> \\\"Action\\\": \\\"<em>sts</em>:<em>AssumeRole</em>\\\",\\n> \\\"Principal\\\": {\\n> \\\"Service\\\": \\\"prod.picapica.aws.internal...\"}],\"totalResults\":258,\"currentPage\":null}}"}]}]},"uuid":"ae796e43-69d8-4848-b13d-c47fbec02a2a","timestamp":"2025-07-28T22:52:37.653Z","toolUseResult":[{"type":"text","text":"{\"content\":{\"results\":[{\"url\":\"https://docs.hub.amazon.dev/docs/mrc/user-guide/infrastructure-pipelines-troubleshooting/\",\"displayTitle\":\"Troubleshooting infrastructure pipelines\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":1,\"categoryList\":[],\"body\":\"...Failure with error message “User: arn:<partition>:iam::<pipeline\\\\_team\\\\_account\\\\_id>:user/PipelinesAssumeRole is not <em>authorized</em> to perform: <em>sts</em>:<em>AssumeRole</em> on resource: arn...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/rde/user-guide/turtle/\",\"displayTitle\":\"Turtle\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":2,\"categoryList\":[],\"body\":\"...Turtle IAM roles: > ```json > { > \\\"Version\\\": \\\"2012-10-17\\\", > \\\"Statement\\\": { > \\\"Effect\\\": \\\"Allow\\\", > \\\"Action\\\": \\\"<em>sts</em>:<em>AssumeRole</em>\\\", > \\\"Resource\\\": [ > \\\"arn:aws:iam::*ACCOUNT_ID_1*:role/*TURTLE_ROLE_1*\\\", > \\\"arn:aws:iam::*ACCOUNT_ID_1*:role/*TURTLE...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/rde/user-guide/troubleshooting/\",\"displayTitle\":\"Troubleshooting RDE issues\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":3,\"categoryList\":[],\"body\":\"...you may encounter while working with RDE, along with their potential\\ncauses/solutions. ## Access Denied: assumed-role/X is not <em>authorized</em> to perform <em>sts</em>:<em>AssumeRole</em> on resource role/X IAM has made a change to the behavior of role trust policies...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/tps-generator/user-guide/troubleshooting/\",\"displayTitle\":\"Troubleshooting\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":4,\"categoryList\":[],\"body\":\"...Group, will cleanup temp resources: [java] com.amazonaws.services.ec2.model.AmazonEC2Exception: You are not <em>authorized</em> to perform this operation. User: arn:aws:<em>sts</em>::691666206581:assumed-role/TPS-Gen/sargejac-Isengard is not <em>authorized</em> to perform: ec2:CreateLaunchTemplate on...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/pipelines/cdk-guide/troubleshooting-bootstrap-permissions-upgrade-cdkv2/\",\"displayTitle\":\"BONESBootstrap lacks permissions after upgrading to CDKv2\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753401600000,\"score\":0,\"rank\":5,\"categoryList\":[],\"body\":\"...may see the following error message\\nwhen deploying your pipeline or bootstrapping your accounts: ```none\\nUser: arn:aws:<em>sts</em>::***:assumed-role/BONESBootstrap/*** is not <em>authorized</em> to perform ... on resource ...\\n``` Your Isengard-managed policy `BONESBootstrapUserPolicy` may be out of sync; use...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/hydra/cli-guide/troubleshooting/\",\"displayTitle\":\"Troubleshooting\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":6,\"categoryList\":[],\"body\":\"...parameters) in IAM includes: ```none\\n{ \\\"Effect\\\": \\\"Allow\\\", \\\"Principal\\\": { \\\"Service\\\": \\\"lambda.amazonaws.com\\\" }, \\\"Action\\\": \\\"<em>sts</em>:<em>AssumeRole</em>\\\"\\n}\\n``` ### PersistentConfigurationId not found An example error message: ```none\\nERROR GigaHydraClientException: PersistentConfigurationId...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/hydra/user-guide/howto-set-up-cross-account-testing-lpt-without-pdg/\",\"displayTitle\":\"Cross Account Testing without PDGs in an LPT Pipeline\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":7,\"categoryList\":[],\"body\":\"...tasks.amazonaws.com\\\", \\\"lambda.amazonaws.com\\\" ] }, \\\"Action\\\": \\\"<em>sts</em>:<em>AssumeRole</em>\\\" }, { \\\"Effect\\\": \\\"Allow\\\", \\\"Principal\\\": { \\\"Service\\\": \\\"compute...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/apollo/user-guide/howto-apollo-for-native-ec2-permissions/\",\"displayTitle\":\"Apollo for Native EC2 Permissions\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":8,\"categoryList\":[],\"body\":\"...trust policy ```json\\n{ \\\"Effect\\\": \\\"Allow\\\", \\\"Principal\\\": { \\\"AWS\\\": \\\"arn:aws-iso:iam::806528742059:root\\\" }, \\\"Action\\\": \\\"<em>sts</em>:<em>AssumeRole</em>\\\", \\\"Condition\\\": {}\\n}\\n``` #### LCK trust policy ```json\\n{ \\\"Effect\\\": \\\"Allow\\\", \\\"Principal\\\": { \\\"AWS\\\": \\\"arn:aws-iso-b:iam...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/mrc/user-guide/reality-checks/\",\"displayTitle\":\"Reality checks\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":9,\"categoryList\":[],\"body\":\"...Statement\\\": [ { \\\"Effect\\\": \\\"Allow\\\", \\\"Principal\\\": { \\\"Service\\\": \\\"cloudformation.amazonaws.com\\\" }, \\\"Action\\\": \\\"<em>sts</em>:<em>AssumeRole</em>\\\" } ]\\n}\\n``` See [Provide Permissions (MRCF-Permissions Role)](https://docs.hub.amazon.dev/docs/mrc/user-guide/mrcf-getting-started.html...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/gitfarm/user-guide/codesuite-source-replication/\",\"displayTitle\":\"Source replication for AWS Code Suite\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":10,\"categoryList\":[],\"body\":\"...Version\\\": \\\"2012-10-17\\\",\\n> \\\"Statement\\\": [\\n> {\\n> \\\"Action\\\": \\\"<em>sts</em>:<em>AssumeRole</em>\\\",\\n> \\\"Principal\\\": {\\n> \\\"Service\\\": \\\"prod.picapica.aws.internal...\"}],\"totalResults\":258,\"currentPage\":null}}"}]}
{"parentUuid":"ae796e43-69d8-4848-b13d-c47fbec02a2a","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","message":{"id":"msg_bdrk_01AiBoPRrSsLPUfpLxYzV8LK","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"text","text":"Let me search more specifically for the DNS auto-update role or Custom Cross Account Zone issues:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":1925,"cache_read_input_tokens":54205,"output_tokens":1}},"type":"assistant","uuid":"1d683628-1990-4930-9ef2-43b0adbfae87","timestamp":"2025-07-28T22:52:40.192Z"}
{"parentUuid":"1d683628-1990-4930-9ef2-43b0adbfae87","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","message":{"id":"msg_bdrk_01AiBoPRrSsLPUfpLxYzV8LK","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"tool_use","id":"toolu_bdrk_01JsVFKHFXqhdecX4n1KRpFj","name":"mcp__builder-mcp__InternalSearch","input":{"query":"dns-auto-update-role CustomCrossAccountZone CloudFormation custom resource","domain":"BUILDER_HUB"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":1925,"cache_read_input_tokens":54205,"output_tokens":1}},"type":"assistant","uuid":"ea3dae3b-98fd-4ef7-b44d-1c0db5502700","timestamp":"2025-07-28T22:52:40.828Z"}
{"parentUuid":"ea3dae3b-98fd-4ef7-b44d-1c0db5502700","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_bdrk_01JsVFKHFXqhdecX4n1KRpFj","type":"tool_result","content":[{"type":"text","text":"{\"content\":{\"results\":[{\"url\":\"https://docs.hub.amazon.dev/docs/native-aws/developer-guide/best-practices-dns/\",\"displayTitle\":\"DNS best practices\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":1,\"categoryList\":[],\"body\":\"...your own Lambda-backed <em>custom</em> <em>resource</em> to perform a remote <em>DNS</em> record <em>update</em>. ## Implementation ### Creating a new Pipeline for managing a root hosted zone Create a root <em>DNS</em> pipeline from the [Root <em>DNS</em> Pipeline](https://create.hub.amazon.dev/source-applications/root-<em>dns</em>-pipeline) source...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/hydra/user-guide/concepts-automatic-bootstrap-mode-migration/\",\"displayTitle\":\"Migrating from Persistent Configuration to Auto Bootstrap Mode\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":2,\"categoryList\":[],\"body\":\"...in the RunDefinition]()\\n> * [[Canary only][Optional] Create Canary Dashboard]()\\n> * [Troubleshooting]()\\n> * [<em>CloudFormation</em> cannot <em>update</em> a stack when a <em>custom</em>-named <em>resource</em> requires replacing]() The Hydra team is working on deprecating the [(Legacy) Persistent Configuration...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/transmogrifier/user-guide/campaign-owner/\",\"displayTitle\":\"Setting up and Running a Campaign\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":3,\"categoryList\":[],\"body\":\"...Effect\\\": \\\"Allow\\\", \\\"Principal\\\": { \\\"AWS\\\": \\\"arn:aws:iam::908655017752:<em>role</em>/TransmogrifierStateQueueLambda-LambdaRole-126M1VN0UBB32\\\" }, \\\"Action\\\": \\\"SQS:SendMessage\\\", \\\"<em>Resource</em>\\\": `\\\"*Your Queue...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/native-aws/developer-guide/cdo-relay/\",\"displayTitle\":\"Add CDORelay to your EC2/ECS application (LPT)\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":4,\"categoryList\":[],\"body\":\"...CA',\\n> },\\n> private_key_distribution_options: ['<em>Custom</em>'],\\n> distribution: {\\n> # AWS accounts not yet supported through this API.\\n> },\\n> is_<em>auto</em>_renew: true,\\n> # If you don't want a Sev 2 in one year, let...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/bats/user-guide/publishers-s3/\",\"displayTitle\":\"S3\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":5,\"categoryList\":[],\"body\":\"...Produces Lambda code for a [<em>CloudFormation</em> <em>custom</em> <em>resource</em>](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-<em>custom</em>-<em>resources</em>.html) that...\\n3. Uses the `BATS::SAM::` variables to determine the dynamic locations...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/native-aws/developer-guide/add-cloudauth-to-the-service/\",\"displayTitle\":\"Add CloudAuth to your service\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":6,\"categoryList\":[],\"body\":\"...configuration/<em>cloudFormation</em>/allegiance.template.yml#L18-L33) by adding the correct <em>DNS</em> entries for the VPC interface endpoint that matches the ClientConfig. > **Note** > > We recommend that you define this yourself with a <em>Route53</em> Alias. If you already have a...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/personal-stacks/user-guide/howto-working-with-dns/\",\"displayTitle\":\"Working with DNS\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":7,\"categoryList\":[],\"body\":\"...com` <em>DNS</em> topology for fixed\\nenvironments, and switches to using the `PersonalHostedZone` in personal stacks: ```ts\\nconst APEX_ZONE_NAME = 'myservice.com';\\nconst PARENT_HOSTED_ZONE_ACCOUNT_ID = '123456789012';\\nconst PARENT_HOSTED_ZONE_DELEGATION_<em>ROLE</em>_NAME = '<em>dns</em>-delegation-<em>role</em>';\\nconst DEV...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/mrc/user-guide/reality-checks/\",\"displayTitle\":\"Reality checks\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":8,\"categoryList\":[],\"body\":\"...Capacity definition](../concepts-capacity-definition/) has not been <em>updated</em> since MRC has begun\\nenforcing strict <em>resource</em> ownership. *Mitigation*\\n: [Submit a capacity definition <em>update</em>](../concepts-capacity-definition/#<em>updating</em>-a-capacity-definition), approve, and merge it. It does not need to...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/hydra/user-guide/concepts-persistent-configuration/\",\"displayTitle\":\"(Legacy) Persistent Configuration\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":9,\"categoryList\":[],\"body\":\"...This <em>resource</em> is considered\\nlegacy given the [<em>Auto</em> Bootstrap Mode](../concepts-automatic-bootstrap-mode/) feature, which eliminates the need for\\nthe *persistent configuration* as <em>resources</em> are created in your account on an on-demand basis.\\nFollow this guide only if you can’t meet the <em>auto</em>...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/personal-stacks/user-guide/howto-superstar/\",\"displayTitle\":\"SuperStar in Personal Stacks\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":10,\"categoryList\":[],\"body\":\"...with <em>DNS</em>](../howto-working-with-<em>dns</em>/) guide to set up Managed <em>DNS</em> for your personal stacks. The <em>DNS</em> names set up there will be referenced in the [CDK changes](#superstar-cdk-changes) section. <a id=\\\"superstar-cdk-changes\\\"></a> ## CDK changes 1. <em>Update</em> the SuperStar service environment...\"}],\"totalResults\":1680,\"currentPage\":null}}"}]}]},"uuid":"b32af956-58a4-4e32-b46c-4bcd9925b30d","timestamp":"2025-07-28T22:52:44.157Z","toolUseResult":[{"type":"text","text":"{\"content\":{\"results\":[{\"url\":\"https://docs.hub.amazon.dev/docs/native-aws/developer-guide/best-practices-dns/\",\"displayTitle\":\"DNS best practices\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":1,\"categoryList\":[],\"body\":\"...your own Lambda-backed <em>custom</em> <em>resource</em> to perform a remote <em>DNS</em> record <em>update</em>. ## Implementation ### Creating a new Pipeline for managing a root hosted zone Create a root <em>DNS</em> pipeline from the [Root <em>DNS</em> Pipeline](https://create.hub.amazon.dev/source-applications/root-<em>dns</em>-pipeline) source...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/hydra/user-guide/concepts-automatic-bootstrap-mode-migration/\",\"displayTitle\":\"Migrating from Persistent Configuration to Auto Bootstrap Mode\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":2,\"categoryList\":[],\"body\":\"...in the RunDefinition]()\\n> * [[Canary only][Optional] Create Canary Dashboard]()\\n> * [Troubleshooting]()\\n> * [<em>CloudFormation</em> cannot <em>update</em> a stack when a <em>custom</em>-named <em>resource</em> requires replacing]() The Hydra team is working on deprecating the [(Legacy) Persistent Configuration...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/transmogrifier/user-guide/campaign-owner/\",\"displayTitle\":\"Setting up and Running a Campaign\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":3,\"categoryList\":[],\"body\":\"...Effect\\\": \\\"Allow\\\", \\\"Principal\\\": { \\\"AWS\\\": \\\"arn:aws:iam::908655017752:<em>role</em>/TransmogrifierStateQueueLambda-LambdaRole-126M1VN0UBB32\\\" }, \\\"Action\\\": \\\"SQS:SendMessage\\\", \\\"<em>Resource</em>\\\": `\\\"*Your Queue...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/native-aws/developer-guide/cdo-relay/\",\"displayTitle\":\"Add CDORelay to your EC2/ECS application (LPT)\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":4,\"categoryList\":[],\"body\":\"...CA',\\n> },\\n> private_key_distribution_options: ['<em>Custom</em>'],\\n> distribution: {\\n> # AWS accounts not yet supported through this API.\\n> },\\n> is_<em>auto</em>_renew: true,\\n> # If you don't want a Sev 2 in one year, let...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/bats/user-guide/publishers-s3/\",\"displayTitle\":\"S3\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":5,\"categoryList\":[],\"body\":\"...Produces Lambda code for a [<em>CloudFormation</em> <em>custom</em> <em>resource</em>](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-<em>custom</em>-<em>resources</em>.html) that...\\n3. Uses the `BATS::SAM::` variables to determine the dynamic locations...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/native-aws/developer-guide/add-cloudauth-to-the-service/\",\"displayTitle\":\"Add CloudAuth to your service\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":6,\"categoryList\":[],\"body\":\"...configuration/<em>cloudFormation</em>/allegiance.template.yml#L18-L33) by adding the correct <em>DNS</em> entries for the VPC interface endpoint that matches the ClientConfig. > **Note** > > We recommend that you define this yourself with a <em>Route53</em> Alias. If you already have a...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/personal-stacks/user-guide/howto-working-with-dns/\",\"displayTitle\":\"Working with DNS\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":7,\"categoryList\":[],\"body\":\"...com` <em>DNS</em> topology for fixed\\nenvironments, and switches to using the `PersonalHostedZone` in personal stacks: ```ts\\nconst APEX_ZONE_NAME = 'myservice.com';\\nconst PARENT_HOSTED_ZONE_ACCOUNT_ID = '123456789012';\\nconst PARENT_HOSTED_ZONE_DELEGATION_<em>ROLE</em>_NAME = '<em>dns</em>-delegation-<em>role</em>';\\nconst DEV...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/mrc/user-guide/reality-checks/\",\"displayTitle\":\"Reality checks\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":8,\"categoryList\":[],\"body\":\"...Capacity definition](../concepts-capacity-definition/) has not been <em>updated</em> since MRC has begun\\nenforcing strict <em>resource</em> ownership. *Mitigation*\\n: [Submit a capacity definition <em>update</em>](../concepts-capacity-definition/#<em>updating</em>-a-capacity-definition), approve, and merge it. It does not need to...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/hydra/user-guide/concepts-persistent-configuration/\",\"displayTitle\":\"(Legacy) Persistent Configuration\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":9,\"categoryList\":[],\"body\":\"...This <em>resource</em> is considered\\nlegacy given the [<em>Auto</em> Bootstrap Mode](../concepts-automatic-bootstrap-mode/) feature, which eliminates the need for\\nthe *persistent configuration* as <em>resources</em> are created in your account on an on-demand basis.\\nFollow this guide only if you can’t meet the <em>auto</em>...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/personal-stacks/user-guide/howto-superstar/\",\"displayTitle\":\"SuperStar in Personal Stacks\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":10,\"categoryList\":[],\"body\":\"...with <em>DNS</em>](../howto-working-with-<em>dns</em>/) guide to set up Managed <em>DNS</em> for your personal stacks. The <em>DNS</em> names set up there will be referenced in the [CDK changes](#superstar-cdk-changes) section. <a id=\\\"superstar-cdk-changes\\\"></a> ## CDK changes 1. <em>Update</em> the SuperStar service environment...\"}],\"totalResults\":1680,\"currentPage\":null}}"}]}
{"parentUuid":"b32af956-58a4-4e32-b46c-4bcd9925b30d","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","message":{"id":"msg_bdrk_01NM5ff8kAWuVrYLyJ33gmE1","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"text","text":"Let me search for more specific troubleshooting information about cross-account role assumptions and CloudFormation custom resources:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":1939,"cache_read_input_tokens":56130,"output_tokens":7}},"type":"assistant","uuid":"153ee0f7-92a8-4d2b-910d-ff6e6f7849cc","timestamp":"2025-07-28T22:52:46.605Z"}
{"parentUuid":"153ee0f7-92a8-4d2b-910d-ff6e6f7849cc","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","message":{"id":"msg_bdrk_01NM5ff8kAWuVrYLyJ33gmE1","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"tool_use","id":"toolu_bdrk_012VcDtqKUkfpVixmv6z6FdG","name":"mcp__builder-mcp__InternalSearch","input":{"query":"\"is not authorized to perform: sts:AssumeRole\" CloudFormation troubleshooting cross-account","domain":"BUILDER_HUB"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":1939,"cache_read_input_tokens":56130,"output_tokens":7}},"type":"assistant","uuid":"25733205-e9f3-49ee-a767-17ec2dce7a9a","timestamp":"2025-07-28T22:52:47.239Z"}
{"parentUuid":"25733205-e9f3-49ee-a767-17ec2dce7a9a","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_bdrk_012VcDtqKUkfpVixmv6z6FdG","type":"tool_result","content":[{"type":"text","text":"{\"content\":{\"results\":[{\"url\":\"https://docs.hub.amazon.dev/docs/mrc/user-guide/infrastructure-pipelines-troubleshooting/\",\"displayTitle\":\"Troubleshooting infrastructure pipelines\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":1,\"categoryList\":[],\"body\":\"...available for this <em>account</em>”]()\\n> * [Failure with error message “User: arn:<partition>:iam::<pipeline\\\\_team\\\\_<em>account</em>\\\\_id>:user/PipelinesAssumeRole <em>is not authorized to perform: sts:AssumeRole</em> on resource: arn...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/rde/user-guide/troubleshooting/\",\"displayTitle\":\"Troubleshooting RDE issues\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":2,\"categoryList\":[],\"body\":\"...<em>Troubleshooting</em> RDE issues > **Note**\\n>\\n> When <em>troubleshooting</em> RDE issues, make sure to take a look at the run logs and html reports\\n> associated with the RDE commands that are...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/hydra/user-guide/getting-started-canary-testing-cdk/\",\"displayTitle\":\"CDK Pipeline\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":3,\"categoryList\":[],\"body\":\"...rvice-principal/cdcloudformationservice\\n<em>is not authorized to perform: sts:AssumeRole</em> on resource:\\narn:aws:iam::<aws id>:role/PipelinesChangeSetRole-x\\n``` You need to bootstrap the CDK package to allow resource deployment into your <em>account</em> from\\npipelines. Run the following command...\"}],\"totalResults\":3,\"currentPage\":null}}"}]}]},"uuid":"380197a2-75a0-4264-9c71-c8a385a36f9b","timestamp":"2025-07-28T22:52:49.965Z","toolUseResult":[{"type":"text","text":"{\"content\":{\"results\":[{\"url\":\"https://docs.hub.amazon.dev/docs/mrc/user-guide/infrastructure-pipelines-troubleshooting/\",\"displayTitle\":\"Troubleshooting infrastructure pipelines\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":1,\"categoryList\":[],\"body\":\"...available for this <em>account</em>”]()\\n> * [Failure with error message “User: arn:<partition>:iam::<pipeline\\\\_team\\\\_<em>account</em>\\\\_id>:user/PipelinesAssumeRole <em>is not authorized to perform: sts:AssumeRole</em> on resource: arn...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/rde/user-guide/troubleshooting/\",\"displayTitle\":\"Troubleshooting RDE issues\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753315200000,\"score\":0,\"rank\":2,\"categoryList\":[],\"body\":\"...<em>Troubleshooting</em> RDE issues > **Note**\\n>\\n> When <em>troubleshooting</em> RDE issues, make sure to take a look at the run logs and html reports\\n> associated with the RDE commands that are...\"},{\"url\":\"https://docs.hub.amazon.dev/docs/hydra/user-guide/getting-started-canary-testing-cdk/\",\"displayTitle\":\"CDK Pipeline\",\"domain\":\"builder_hub\",\"resultType\":\"DOCUMENT\",\"modificationDate\":1753660800000,\"score\":0,\"rank\":3,\"categoryList\":[],\"body\":\"...rvice-principal/cdcloudformationservice\\n<em>is not authorized to perform: sts:AssumeRole</em> on resource:\\narn:aws:iam::<aws id>:role/PipelinesChangeSetRole-x\\n``` You need to bootstrap the CDK package to allow resource deployment into your <em>account</em> from\\npipelines. Run the following command...\"}],\"totalResults\":3,\"currentPage\":null}}"}]}
{"parentUuid":"380197a2-75a0-4264-9c71-c8a385a36f9b","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","message":{"id":"msg_bdrk_01GTTe8jxGka2RGtqKHFshy5","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"text","text":"Let me get more details from the MRC troubleshooting guide since it seems most relevant:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":649,"cache_read_input_tokens":58069,"output_tokens":3}},"type":"assistant","uuid":"9da8030f-f494-441d-8dd3-9d16efd151ba","timestamp":"2025-07-28T22:52:52.443Z"}
{"parentUuid":"9da8030f-f494-441d-8dd3-9d16efd151ba","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","message":{"id":"msg_bdrk_01GTTe8jxGka2RGtqKHFshy5","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"tool_use","id":"toolu_bdrk_012LKZc6gykP9UUJ9F1be6fZ","name":"mcp__builder-mcp__ReadInternalWebsites","input":{"inputs":["https://docs.hub.amazon.dev/docs/mrc/user-guide/infrastructure-pipelines-troubleshooting/"]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":649,"cache_read_input_tokens":58069,"output_tokens":3}},"type":"assistant","uuid":"beb6edae-c00b-433b-bf38-8d319e391b59","timestamp":"2025-07-28T22:52:52.993Z"}
{"parentUuid":"beb6edae-c00b-433b-bf38-8d319e391b59","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_bdrk_012LKZc6gykP9UUJ9F1be6fZ","type":"tool_result","content":[{"type":"text","text":"{\"content\":{\"status\":\"success\",\"relativeHrefsDescription\":\"Relative hrefs represent related documents that can be accessed by evaluating the relative path with respect to the input URL. Links with fewer parent directory traversals (..) are more closely related to the current document.\",\"processedContent\":{\"relativeHrefs\":[\"../_static/pygments.css?v=b86133f3\",\"../_static/builderhubdocs.css?v=0ff2b2b2\",\"../_static/pygments_dark.css?v=f98d607c\",\"../genindex/\",\"../search/\",\"../infrastructure-pipelines-scaffolding-upgrade/\",\"../../../../btdocs_res/builderhub.min.css\",\"../infrastructure-pipelines/\",\"../../../../docs/dev-setup/index.html\",\"../../../../docs/onboarding/index.html\",\"../../../../docs/learning/index.html\",\"../../../../docs/software-health/index.html\",\"../../../../docs/golden-path/index.html\",\"../../../../docs/gen-ai-dev/index.html\",\"../../../../docs/measuring-sbx/index.html\",\"../../../../docs/app-types/index.html\",\"../../../../docs/event-consumers/index.html\",\"../../../../docs/machine-learning/index.html\",\"../../../../docs/mobile/index.html\",\"../../../../docs/web-services/index.html\",\"../../../../docs/workflow-orchestration/index.html\",\"../../../../docs/languages/index.html\",\"../../../../docs/languages/java/index.html\",\"../../../../docs/languages/python/index.html\",\"../../../../docs/languages/rust/index.html\",\"../../../../docs/languages/typescript/index.html\",\"../../../../docs/app-features/index.html\",\"../../../../docs/gen-ai/index.html\",\"../../../../docs/i18n/index.html\",\"../../../../docs/containers/index.html\",\"../../../../docs/native-aws/developer-guide/index.html\",\"../../../../docs/open-source/index.html\",\"../../../../docs/tools/index.html\",\"../../../../docs/qdeveloper/index.html\",\"../../../../docs/qdeveloper/user-guide/index.html\",\"../../../../docs/apollo/index.html\",\"../../../../docs/apollo/user-guide/index.html\",\"../../../../docs/apollo/api-guide/index.html\",\"../../../../docs/apollo/cdk-guide/index.html\",\"../../../../docs/apollo/cli-guide/index.html\",\"../../../../docs/axe/index.html\",\"../../../../docs/axe/user-guide/index.html\",\"../../../../docs/barium/index.html\",\"../../../../docs/bedrock/index.html\",\"../../../../docs/bedrock/user-guide/index.html\",\"../../../../docs/bemol/index.html\",\"../../../../docs/black-caiman/index.html\",\"../../../../docs/black-caiman/user-guide/index.html\",\"../../../../docs/brazil/index.html\",\"../../../../docs/brazil/user-guide/index.html\",\"../../../../docs/brazil/cli-guide/index.html\",\"../../../../docs/brazil/api-guide/index.html\",\"../../../../docs/brazil/peru-java-quickstart/index.html\",\"../../../../docs/brazil/peru-user-guide/index.html\",\"../../../../docs/brazil/peru-migration-guide/index.html\",\"../../../../docs/builderhub/index.html\",\"../../../../docs/builderhub/user-guide/index.html\",\"../../../../docs/create/cli-guide/index.html\",\"../../../../docs/bars/index.html\",\"../../../../docs/bars/api-guide/index.html\",\"../../../../docs/bats/index.html\",\"../../../../docs/bats/user-guide/index.html\",\"../../../../docs/bats/cli-guide/index.html\",\"../../../../docs/builder-mcp/index.html\",\"../../../../docs/builder-mcp/user-guide/index.html\",\"../../../../docs/builder-toolbox/index.html\",\"../../../../docs/builder-toolbox/user-guide/index.html\",\"../../../../docs/cd-signer/index.html\",\"../../../../docs/cd-signer/user-guide/index.html\",\"../../../../docs/cd-signer/api-guide/index.html\",\"../../../../docs/change-guardian/index.html\",\"../../../../docs/change-guardian/user-guide/index.html\",\"../../../../docs/cline/index.html\",\"../../../../docs/cline/user-guide/index.html\",\"../../../../docs/cloudcover/index.html\",\"../../../../docs/cloudcover/user-guide/index.html\",\"../../../../docs/cloud-desktop/index.html\",\"../../../../docs/cloud-desktop/user-guide/index.html\",\"../../../../docs/codeartifact/index.html\",\"../../../../docs/codeartifact/user-guide/index.html\",\"../../../../docs/code-browser/index.html\",\"../../../../docs/code-browser/user-guide/index.html\",\"../../../../docs/code-browser/api-guide/index.html\",\"../../../../docs/coral/index.html\",\"../../../../docs/coral/user-guide/index.html\",\"../../../../docs/coverlay/index.html\",\"../../../../docs/coverlay/user-guide/index.html\",\"../../../../docs/crux/index.html\",\"../../../../docs/crux/user-guide/index.html\",\"../../../../docs/crux/cli-guide/index.html\",\"../../../../docs/crux/api-guide/index.html\",\"../../../../docs/dogma/index.html\",\"../../../../docs/dogma/user-guide/index.html\",\"../../../../docs/dogma/cli-guide/index.html\",\"../../../../docs/dogma/api-guide/index.html\",\"../../../../docs/electric-company/index.html\",\"../../../../docs/electric-company/user-guide/index.html\",\"../../../../docs/gated-garden/index.html\",\"../../../../docs/gated-garden/v1/api-guide/index.html\",\"../../../../docs/gated-garden/v2/api-guide/index.html\",\"../../../../docs/gitfarm/index.html\",\"../../../../docs/gitfarm/user-guide/index.html\",\"../../../../docs/gitfarm/api-guide/index.html\",\"../../../../docs/gordian-knot/index.html\",\"../../../../docs/hydra/index.html\",\"../../../../docs/hydra/user-guide/index.html\",\"../../../../docs/hydra/cli-guide/index.html\",\"../../../../docs/hydra/api-guide/index.html\",\"../../../../docs/ironhide/index.html\",\"../../../../docs/ironhide/cli-guide/index.html\",\"../../../../docs/ironhide/transform-creator-guide/index.html\",\"../../../../docs/kiro/index.html\",\"../../../../docs/kiro/user-guide/index.html\",\"../../../../docs/lpt-synthesis/index.html\",\"../../../../docs/lpt-synthesis/user-guide/index.html\",\"../../../../docs/mrc/index.html\",\"../../../../docs/mrc/user-guide/index.html\",\"../getting-started/\",\"../concepts/\",\"../concepts-capacity-definition/\",\"../concepts-ingestion/\",\"../concepts-physical-location-synthesis/\",\"../concepts-resource-statuses/\",\"../concepts-service/\",\"../concepts-service-revision/\",\"../concepts-synthesis/\",\"../supported-dimensions/\",\"../supported-resources/\",\"../service-level-agreements/\",\"../how-to/\",\"../create-new-service/\",\"../toggle-pipeline-creation/\",\"../toggle-resource-creation/\",\"../static-analysis-suppression/\",\"../spie-account-configurations/\",\"../mrc-isengard-aws-account-permissions/\",\"../mrc-isengard-trusted-service-opt-in/\",\"../mrc-odin-grant-authority/\",\"../mrc-redfort-grant-authority/\",\"../custom-mixins/\",\"../pause-resource-synthesis/\",\"../offboard-from-mrc/\",\"../vsr-ingestion-onboarding/\",\"../troubleshooting/\",\"../normalization/\",\"../permission-checks/\",\"../reality-checks/\",\"../static-analysis/\",\"../skipped-synthesis/\",\"../monitors/\",\"../mrcf/\",\"../mrcf-overview/\",\"../mrcf-getting-started/\",\"../mrcf-synthesis/\",\"../mrcf-troubleshooting/\",\"../mrcf-faq/\",\"../mr-ga-service-build/\",\"../mr-ga-service-build-getting-started/\",\"../faq/\",\"../mr-pipelines/\",\"../mr-pipelines-concepts/\",\"../mr-pipelines-concepts-deployment-target/\",\"../mr-pipelines-concepts-drift/\",\"../mr-pipelines-concepts-iarn/\",\"../mr-pipelines-concepts-managed-resources-environment/\",\"../mr-pipelines-concepts-mr-application-pipeline/\",\"../mr-pipelines-concepts-mr-infrastructure-pipeline/\",\"../mr-pipelines-limitations/\",\"../mr-pipelines-preview-onboarding/\",\"../mr-pipelines-recipes/\",\"../mr-pipelines-troubleshooting/\",\"../mr-pipelines-onboarding/\",\"../infrastructure-pipelines/\",\"../infrastructure-pipelines-concepts/\",\"../infrastructure-pipelines-onboarding/\",\"../infrastructure-pipelines-full-automation/\",\"../infrastructure-pipelines-iso/\",\"../infrastructure-pipelines-one-touch/\",\"../infrastructure-pipelines-steady-state/\",\"../infrastructure-pipelines-scaffolding-upgrade/\",\"../../../../docs/personal-stacks/index.html\",\"../../../../docs/personal-stacks/user-guide/index.html\",\"../../../../docs/personal-stacks/cli-guide/index.html\",\"../../../../docs/pipelines/index.html\",\"../../../../docs/pipelines/user-guide/index.html\",\"../../../../docs/pipelines/cli-guide/index.html\",\"../../../../docs/pipelines/api-guide/index.html\",\"../../../../docs/pipelines/cdk-guide/index.html\",\"../../../../docs/quilt/index.html\",\"../../../../docs/quilt/user-guide/index.html\",\"../../../../docs/rde/index.html\",\"../../../../docs/rde/user-guide/index.html\",\"../../../../docs/region-build-automation/index.html\",\"../../../../docs/region-build-automation/region-build-user-guide/index.html\",\"../../../../docs/region-build-automation/epim-user-guide/index.html\",\"../../../../docs/region-build-automation/chain-reaction-user-guide/index.html\",\"../../../../docs/smithy/index.html\",\"../../../../docs/smithy/user-guide/index.html\",\"../../../../docs/sas/index.html\",\"../../../../docs/sas/user-guide/index.html\",\"../../../../docs/sas/api-guide/index.html\",\"../../../../docs/tim/index.html\",\"../../../../docs/tim/user-guide/index.html\",\"../../../../docs/tod/index.html\",\"../../../../docs/tod/user-guide/index.html\",\"../../../../docs/tps-generator/index.html\",\"../../../../docs/tps-generator/user-guide/index.html\",\"../../../../docs/transmogrifier/index.html\",\"../../../../docs/transmogrifier/user-guide/index.html\",\"../../../../docs/transmogrifier/api-guide/index.html\",\"../../../../docs/trebuchet/index.html\",\"../../../../docs/universal-constructs/index.html\",\"../../../../docs/universal-constructs/user-guide/index.html\",\"../../../../docs/viceroy/index.html\",\"../../../../docs/wasabi/index.html\",\"../../../../docs/wasabi/user-guide/index.html\",\"../../../../docs/tools/products-wac/index.html\",\"../../../../docs/support/index.html\",\"../infrastructure-pipelines-one-touch/#infrastructure-pipelines-one-touch-explanding-to-region-without-cfn\",\"../infrastructure-pipelines-one-touch/#infrastructure-pipelines-one-touch-after-region-becomes-iaga\",\"../infrastructure-pipelines-scaffolding-upgrade/\"],\"mainContent\":\"# Troubleshooting infrastructure pipelines\\n# Troubleshooting infrastructure pipelines[¶][1]\\n* [Expected failure after a donor region becomes IA/GA][2]\\n* [Failure related to AmazonSNS][3]\\n* [Stack update failure with error message “Resource type \\\\[AMZN::Odin::Namespace\\\\]/\\\\[AMZN::Odin::Materialset\\\\] is not available for this account”][4]\\n* [Failure with error message “User: arn::iam::<pipeline\\\\_team\\\\_account\\\\_id>:user/PipelinesAssumeRole is not authorized to perform: sts:AssumeRole on resource: arn::iam::<account\\\\_id>:role/PipelinesCloudFormation-” when synthesizing infrapipelines][5]\\nIn this documentation, we list all types of deployment failures on your infrastructure pipelines that are known issues, provide solutions on how to fix them for now, and how we intend to improve for each of them. If the deployment failure you’re experiencing isn’t described here, you probably have a misconfiguration in your infrastructure pipeline.\\n## Expected failure after a donor region becomes IA/GA[¶][2]\\nIf you have previously leveraged the [donor region support][6], after the build region becomes IA/GA, you will see a deployment failure on your `infra_pipeline` stage of your infrastructure pipeline with the following error message:\\n\\n```\\n Reason: com.amazon.buildertools.cdservice.DependentServiceException: Could\\n not create CloudFormation target: Invalid permissions for [stack name].\\n\\n```\\nThis is a known issue for One-Touch donor region support. That’s because the RIP information for the previous build region has been updated. This triggered a new build on your infrastructure pipeline which tried to update your infrastructure pipeline with the new region endpoint, but you don’t yet have a deployment/scaffold stack or needed AWS resources like IAM roles in the new region.\\nThe error message is `Invalidpermissions` because when CDService checks for the existence of deployment/scaffold stack in the new region, it calls CloudFormation’s DescribeStacks with an assumed role. If the role it tries to assume doesn’t exist or has misconfigured permissions, `Invalidpermission` will be thrown (the error intentionally doesn’t differentiate these two scenarios). In this case, the cause is the role doesn’t exist.\\nYou can fix this by following the steps in [After the build region becomes IA/GA][7] in our one touch guide.\\nOur next step is to deliver the [Zero-Touch support][8]. With Zero-Touch support, Infrastructure Pipelines will be able to expand the pipeline without any manual desktop synthesis actions needed.\\n## Failure related to AmazonSNS[¶][3]\\nCurrently, CloudFormation has a bug where it cannot create resources whose definitions are over a certain size. This surfaces a stack failure with a misleading error message related to `AmazonSNS`:\\n\\n```\\n Invalid parameter: Message too long (Service: AmazonSNS; Status Code: 400;\\n Error Code: InvalidParameter; Request ID: XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX)\\n\\n```\\nUnfortunately, there is not much that can be done in this case. To start, we recommend +1’ing the tracking issue in CloudFormation’s backlog: [CFN-10024][9]. One potential workaround is to temporarily stop managing the failing resource type in your infrastructure pipeline. For example, if the failing stack is in your `service_pipeline` stage, you can exclude your service pipeline definition from your infrastructure pipeline by updating the `ENABLED_INFRASTRUCTURE_PIPELINES_RESOURCES` list in your `Rakefile`. In this case, you would remove the `:pipelines` key:\\n\\n```\\nENABLED_INFRASTRUCTURE_PIPELINES_RESOURCES = [:apollo, :carnaval_monitor, :infra_pipeline]\\n\\n```\\nNote that by removing a resource from your infrastructure pipeline, you will need to fall back to managing that resource with the LPT CLI. Going back to the service pipeline example, you would need to run a command such as:\\n\\n```\\nlpt synthesize -r pipeline --skip-dependencies\\n\\n```\\n## Stack update failure with error message “Resource type \\\\[AMZN::Odin::Namespace\\\\]/\\\\[AMZN::Odin::Materialset\\\\] is not available for this account”[¶][4]\\nDue to [Ragnarok][10], LPT Infrastructure pipelines has deprecated Odin infrapipelines resources. The suggested course of action would be to move off of Odin, if possible. If not, then desktop synthesis will still be able to handle Odin synthesis. In extreme cases, the LPT Team may consider adding accounts to the allowlist. If this error is blocking updates to other resources, then you may consider removing anything odin-related from the `ENABLED_INFRASTRUCTURE_PIPELINES_RESOURCES` list, in your Rakefile.\\n## Failure with error message “User: arn::iam::<pipeline\\\\_team\\\\_account\\\\_id>:user/PipelinesAssumeRole is not authorized to perform: sts:AssumeRole on resource: arn::iam::<account\\\\_id>:role/PipelinesCloudFormation-” when synthesizing infrapipelines[¶][5]\\nThis error is probably because the IAM role mentioned in the error message `arn:<partition>:iam::<account_id>:role/PipelinesCloudFormation-<Hash>` doesn’t exist in your AWS account. You can grab the `<account_id>` in the IAM role and federate into the IAM console of this account from the Isengard to check if this role exists or not. If this role exists, the other possible cause is that you might have updated some keys of resources in your template which we use to generate the `<Hash>` part of this role. The keys that customers might be able to update in template are `aws_account` of this IAM role (**account email** or account id), `region` of the account, and the `pipeline_id`.\\nTo solve this issue, you need to run synthesis to update the IAM role:\\nRun `lptsynthesize-fbuild/infrastructure_pipeline_definition.json-raws-resources`\\nPrevious page:[Scaffolding upgrade guide][11]\\n[1]: #troubleshooting-infrastructure-pipelines\\n[2]: #expected-failure-after-a-donor-region-becomes-ia-ga\\n[3]: #failure-related-to-amazonsns\\n[4]: #stack-update-failure-with-error-message-resource-type-amzn-odin-namespace-amzn-odin-materialset-is-not-available-for-this-account\\n[5]: #failure-with-error-message-user-arn-partition-iam-pipeline-team-account-id-user-pipelinesassumerole-is-not-authorized-to-perform-sts-assumerole-on-resource-arn-partition-iam-account-id-role-pipelinescloudformation-hash-when-synthesizing-infrapipelines\\n[6]: ../infrastructure-pipelines-one-touch/#infrastructure-pipelines-one-touch-explanding-to-region-without-cfn\\n[7]: ../infrastructure-pipelines-one-touch/#infrastructure-pipelines-one-touch-after-region-becomes-iaga\\n[8]: https://issues.amazon.com/issues/LPT-4832\\n[9]: https://issues.amazon.com/issues/CFN-10024\\n[10]: https://w.amazon.com/bin/view/Secrets/Ragnarok/\\n[11]: ../infrastructure-pipelines-scaffolding-upgrade/\"}}}"}]}]},"uuid":"7de4f24d-b5b8-4d94-953f-837bdd00b2db","timestamp":"2025-07-28T22:52:59.825Z","toolUseResult":[{"type":"text","text":"{\"content\":{\"status\":\"success\",\"relativeHrefsDescription\":\"Relative hrefs represent related documents that can be accessed by evaluating the relative path with respect to the input URL. Links with fewer parent directory traversals (..) are more closely related to the current document.\",\"processedContent\":{\"relativeHrefs\":[\"../_static/pygments.css?v=b86133f3\",\"../_static/builderhubdocs.css?v=0ff2b2b2\",\"../_static/pygments_dark.css?v=f98d607c\",\"../genindex/\",\"../search/\",\"../infrastructure-pipelines-scaffolding-upgrade/\",\"../../../../btdocs_res/builderhub.min.css\",\"../infrastructure-pipelines/\",\"../../../../docs/dev-setup/index.html\",\"../../../../docs/onboarding/index.html\",\"../../../../docs/learning/index.html\",\"../../../../docs/software-health/index.html\",\"../../../../docs/golden-path/index.html\",\"../../../../docs/gen-ai-dev/index.html\",\"../../../../docs/measuring-sbx/index.html\",\"../../../../docs/app-types/index.html\",\"../../../../docs/event-consumers/index.html\",\"../../../../docs/machine-learning/index.html\",\"../../../../docs/mobile/index.html\",\"../../../../docs/web-services/index.html\",\"../../../../docs/workflow-orchestration/index.html\",\"../../../../docs/languages/index.html\",\"../../../../docs/languages/java/index.html\",\"../../../../docs/languages/python/index.html\",\"../../../../docs/languages/rust/index.html\",\"../../../../docs/languages/typescript/index.html\",\"../../../../docs/app-features/index.html\",\"../../../../docs/gen-ai/index.html\",\"../../../../docs/i18n/index.html\",\"../../../../docs/containers/index.html\",\"../../../../docs/native-aws/developer-guide/index.html\",\"../../../../docs/open-source/index.html\",\"../../../../docs/tools/index.html\",\"../../../../docs/qdeveloper/index.html\",\"../../../../docs/qdeveloper/user-guide/index.html\",\"../../../../docs/apollo/index.html\",\"../../../../docs/apollo/user-guide/index.html\",\"../../../../docs/apollo/api-guide/index.html\",\"../../../../docs/apollo/cdk-guide/index.html\",\"../../../../docs/apollo/cli-guide/index.html\",\"../../../../docs/axe/index.html\",\"../../../../docs/axe/user-guide/index.html\",\"../../../../docs/barium/index.html\",\"../../../../docs/bedrock/index.html\",\"../../../../docs/bedrock/user-guide/index.html\",\"../../../../docs/bemol/index.html\",\"../../../../docs/black-caiman/index.html\",\"../../../../docs/black-caiman/user-guide/index.html\",\"../../../../docs/brazil/index.html\",\"../../../../docs/brazil/user-guide/index.html\",\"../../../../docs/brazil/cli-guide/index.html\",\"../../../../docs/brazil/api-guide/index.html\",\"../../../../docs/brazil/peru-java-quickstart/index.html\",\"../../../../docs/brazil/peru-user-guide/index.html\",\"../../../../docs/brazil/peru-migration-guide/index.html\",\"../../../../docs/builderhub/index.html\",\"../../../../docs/builderhub/user-guide/index.html\",\"../../../../docs/create/cli-guide/index.html\",\"../../../../docs/bars/index.html\",\"../../../../docs/bars/api-guide/index.html\",\"../../../../docs/bats/index.html\",\"../../../../docs/bats/user-guide/index.html\",\"../../../../docs/bats/cli-guide/index.html\",\"../../../../docs/builder-mcp/index.html\",\"../../../../docs/builder-mcp/user-guide/index.html\",\"../../../../docs/builder-toolbox/index.html\",\"../../../../docs/builder-toolbox/user-guide/index.html\",\"../../../../docs/cd-signer/index.html\",\"../../../../docs/cd-signer/user-guide/index.html\",\"../../../../docs/cd-signer/api-guide/index.html\",\"../../../../docs/change-guardian/index.html\",\"../../../../docs/change-guardian/user-guide/index.html\",\"../../../../docs/cline/index.html\",\"../../../../docs/cline/user-guide/index.html\",\"../../../../docs/cloudcover/index.html\",\"../../../../docs/cloudcover/user-guide/index.html\",\"../../../../docs/cloud-desktop/index.html\",\"../../../../docs/cloud-desktop/user-guide/index.html\",\"../../../../docs/codeartifact/index.html\",\"../../../../docs/codeartifact/user-guide/index.html\",\"../../../../docs/code-browser/index.html\",\"../../../../docs/code-browser/user-guide/index.html\",\"../../../../docs/code-browser/api-guide/index.html\",\"../../../../docs/coral/index.html\",\"../../../../docs/coral/user-guide/index.html\",\"../../../../docs/coverlay/index.html\",\"../../../../docs/coverlay/user-guide/index.html\",\"../../../../docs/crux/index.html\",\"../../../../docs/crux/user-guide/index.html\",\"../../../../docs/crux/cli-guide/index.html\",\"../../../../docs/crux/api-guide/index.html\",\"../../../../docs/dogma/index.html\",\"../../../../docs/dogma/user-guide/index.html\",\"../../../../docs/dogma/cli-guide/index.html\",\"../../../../docs/dogma/api-guide/index.html\",\"../../../../docs/electric-company/index.html\",\"../../../../docs/electric-company/user-guide/index.html\",\"../../../../docs/gated-garden/index.html\",\"../../../../docs/gated-garden/v1/api-guide/index.html\",\"../../../../docs/gated-garden/v2/api-guide/index.html\",\"../../../../docs/gitfarm/index.html\",\"../../../../docs/gitfarm/user-guide/index.html\",\"../../../../docs/gitfarm/api-guide/index.html\",\"../../../../docs/gordian-knot/index.html\",\"../../../../docs/hydra/index.html\",\"../../../../docs/hydra/user-guide/index.html\",\"../../../../docs/hydra/cli-guide/index.html\",\"../../../../docs/hydra/api-guide/index.html\",\"../../../../docs/ironhide/index.html\",\"../../../../docs/ironhide/cli-guide/index.html\",\"../../../../docs/ironhide/transform-creator-guide/index.html\",\"../../../../docs/kiro/index.html\",\"../../../../docs/kiro/user-guide/index.html\",\"../../../../docs/lpt-synthesis/index.html\",\"../../../../docs/lpt-synthesis/user-guide/index.html\",\"../../../../docs/mrc/index.html\",\"../../../../docs/mrc/user-guide/index.html\",\"../getting-started/\",\"../concepts/\",\"../concepts-capacity-definition/\",\"../concepts-ingestion/\",\"../concepts-physical-location-synthesis/\",\"../concepts-resource-statuses/\",\"../concepts-service/\",\"../concepts-service-revision/\",\"../concepts-synthesis/\",\"../supported-dimensions/\",\"../supported-resources/\",\"../service-level-agreements/\",\"../how-to/\",\"../create-new-service/\",\"../toggle-pipeline-creation/\",\"../toggle-resource-creation/\",\"../static-analysis-suppression/\",\"../spie-account-configurations/\",\"../mrc-isengard-aws-account-permissions/\",\"../mrc-isengard-trusted-service-opt-in/\",\"../mrc-odin-grant-authority/\",\"../mrc-redfort-grant-authority/\",\"../custom-mixins/\",\"../pause-resource-synthesis/\",\"../offboard-from-mrc/\",\"../vsr-ingestion-onboarding/\",\"../troubleshooting/\",\"../normalization/\",\"../permission-checks/\",\"../reality-checks/\",\"../static-analysis/\",\"../skipped-synthesis/\",\"../monitors/\",\"../mrcf/\",\"../mrcf-overview/\",\"../mrcf-getting-started/\",\"../mrcf-synthesis/\",\"../mrcf-troubleshooting/\",\"../mrcf-faq/\",\"../mr-ga-service-build/\",\"../mr-ga-service-build-getting-started/\",\"../faq/\",\"../mr-pipelines/\",\"../mr-pipelines-concepts/\",\"../mr-pipelines-concepts-deployment-target/\",\"../mr-pipelines-concepts-drift/\",\"../mr-pipelines-concepts-iarn/\",\"../mr-pipelines-concepts-managed-resources-environment/\",\"../mr-pipelines-concepts-mr-application-pipeline/\",\"../mr-pipelines-concepts-mr-infrastructure-pipeline/\",\"../mr-pipelines-limitations/\",\"../mr-pipelines-preview-onboarding/\",\"../mr-pipelines-recipes/\",\"../mr-pipelines-troubleshooting/\",\"../mr-pipelines-onboarding/\",\"../infrastructure-pipelines/\",\"../infrastructure-pipelines-concepts/\",\"../infrastructure-pipelines-onboarding/\",\"../infrastructure-pipelines-full-automation/\",\"../infrastructure-pipelines-iso/\",\"../infrastructure-pipelines-one-touch/\",\"../infrastructure-pipelines-steady-state/\",\"../infrastructure-pipelines-scaffolding-upgrade/\",\"../../../../docs/personal-stacks/index.html\",\"../../../../docs/personal-stacks/user-guide/index.html\",\"../../../../docs/personal-stacks/cli-guide/index.html\",\"../../../../docs/pipelines/index.html\",\"../../../../docs/pipelines/user-guide/index.html\",\"../../../../docs/pipelines/cli-guide/index.html\",\"../../../../docs/pipelines/api-guide/index.html\",\"../../../../docs/pipelines/cdk-guide/index.html\",\"../../../../docs/quilt/index.html\",\"../../../../docs/quilt/user-guide/index.html\",\"../../../../docs/rde/index.html\",\"../../../../docs/rde/user-guide/index.html\",\"../../../../docs/region-build-automation/index.html\",\"../../../../docs/region-build-automation/region-build-user-guide/index.html\",\"../../../../docs/region-build-automation/epim-user-guide/index.html\",\"../../../../docs/region-build-automation/chain-reaction-user-guide/index.html\",\"../../../../docs/smithy/index.html\",\"../../../../docs/smithy/user-guide/index.html\",\"../../../../docs/sas/index.html\",\"../../../../docs/sas/user-guide/index.html\",\"../../../../docs/sas/api-guide/index.html\",\"../../../../docs/tim/index.html\",\"../../../../docs/tim/user-guide/index.html\",\"../../../../docs/tod/index.html\",\"../../../../docs/tod/user-guide/index.html\",\"../../../../docs/tps-generator/index.html\",\"../../../../docs/tps-generator/user-guide/index.html\",\"../../../../docs/transmogrifier/index.html\",\"../../../../docs/transmogrifier/user-guide/index.html\",\"../../../../docs/transmogrifier/api-guide/index.html\",\"../../../../docs/trebuchet/index.html\",\"../../../../docs/universal-constructs/index.html\",\"../../../../docs/universal-constructs/user-guide/index.html\",\"../../../../docs/viceroy/index.html\",\"../../../../docs/wasabi/index.html\",\"../../../../docs/wasabi/user-guide/index.html\",\"../../../../docs/tools/products-wac/index.html\",\"../../../../docs/support/index.html\",\"../infrastructure-pipelines-one-touch/#infrastructure-pipelines-one-touch-explanding-to-region-without-cfn\",\"../infrastructure-pipelines-one-touch/#infrastructure-pipelines-one-touch-after-region-becomes-iaga\",\"../infrastructure-pipelines-scaffolding-upgrade/\"],\"mainContent\":\"# Troubleshooting infrastructure pipelines\\n# Troubleshooting infrastructure pipelines[¶][1]\\n* [Expected failure after a donor region becomes IA/GA][2]\\n* [Failure related to AmazonSNS][3]\\n* [Stack update failure with error message “Resource type \\\\[AMZN::Odin::Namespace\\\\]/\\\\[AMZN::Odin::Materialset\\\\] is not available for this account”][4]\\n* [Failure with error message “User: arn::iam::<pipeline\\\\_team\\\\_account\\\\_id>:user/PipelinesAssumeRole is not authorized to perform: sts:AssumeRole on resource: arn::iam::<account\\\\_id>:role/PipelinesCloudFormation-” when synthesizing infrapipelines][5]\\nIn this documentation, we list all types of deployment failures on your infrastructure pipelines that are known issues, provide solutions on how to fix them for now, and how we intend to improve for each of them. If the deployment failure you’re experiencing isn’t described here, you probably have a misconfiguration in your infrastructure pipeline.\\n## Expected failure after a donor region becomes IA/GA[¶][2]\\nIf you have previously leveraged the [donor region support][6], after the build region becomes IA/GA, you will see a deployment failure on your `infra_pipeline` stage of your infrastructure pipeline with the following error message:\\n\\n```\\n Reason: com.amazon.buildertools.cdservice.DependentServiceException: Could\\n not create CloudFormation target: Invalid permissions for [stack name].\\n\\n```\\nThis is a known issue for One-Touch donor region support. That’s because the RIP information for the previous build region has been updated. This triggered a new build on your infrastructure pipeline which tried to update your infrastructure pipeline with the new region endpoint, but you don’t yet have a deployment/scaffold stack or needed AWS resources like IAM roles in the new region.\\nThe error message is `Invalidpermissions` because when CDService checks for the existence of deployment/scaffold stack in the new region, it calls CloudFormation’s DescribeStacks with an assumed role. If the role it tries to assume doesn’t exist or has misconfigured permissions, `Invalidpermission` will be thrown (the error intentionally doesn’t differentiate these two scenarios). In this case, the cause is the role doesn’t exist.\\nYou can fix this by following the steps in [After the build region becomes IA/GA][7] in our one touch guide.\\nOur next step is to deliver the [Zero-Touch support][8]. With Zero-Touch support, Infrastructure Pipelines will be able to expand the pipeline without any manual desktop synthesis actions needed.\\n## Failure related to AmazonSNS[¶][3]\\nCurrently, CloudFormation has a bug where it cannot create resources whose definitions are over a certain size. This surfaces a stack failure with a misleading error message related to `AmazonSNS`:\\n\\n```\\n Invalid parameter: Message too long (Service: AmazonSNS; Status Code: 400;\\n Error Code: InvalidParameter; Request ID: XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX)\\n\\n```\\nUnfortunately, there is not much that can be done in this case. To start, we recommend +1’ing the tracking issue in CloudFormation’s backlog: [CFN-10024][9]. One potential workaround is to temporarily stop managing the failing resource type in your infrastructure pipeline. For example, if the failing stack is in your `service_pipeline` stage, you can exclude your service pipeline definition from your infrastructure pipeline by updating the `ENABLED_INFRASTRUCTURE_PIPELINES_RESOURCES` list in your `Rakefile`. In this case, you would remove the `:pipelines` key:\\n\\n```\\nENABLED_INFRASTRUCTURE_PIPELINES_RESOURCES = [:apollo, :carnaval_monitor, :infra_pipeline]\\n\\n```\\nNote that by removing a resource from your infrastructure pipeline, you will need to fall back to managing that resource with the LPT CLI. Going back to the service pipeline example, you would need to run a command such as:\\n\\n```\\nlpt synthesize -r pipeline --skip-dependencies\\n\\n```\\n## Stack update failure with error message “Resource type \\\\[AMZN::Odin::Namespace\\\\]/\\\\[AMZN::Odin::Materialset\\\\] is not available for this account”[¶][4]\\nDue to [Ragnarok][10], LPT Infrastructure pipelines has deprecated Odin infrapipelines resources. The suggested course of action would be to move off of Odin, if possible. If not, then desktop synthesis will still be able to handle Odin synthesis. In extreme cases, the LPT Team may consider adding accounts to the allowlist. If this error is blocking updates to other resources, then you may consider removing anything odin-related from the `ENABLED_INFRASTRUCTURE_PIPELINES_RESOURCES` list, in your Rakefile.\\n## Failure with error message “User: arn::iam::<pipeline\\\\_team\\\\_account\\\\_id>:user/PipelinesAssumeRole is not authorized to perform: sts:AssumeRole on resource: arn::iam::<account\\\\_id>:role/PipelinesCloudFormation-” when synthesizing infrapipelines[¶][5]\\nThis error is probably because the IAM role mentioned in the error message `arn:<partition>:iam::<account_id>:role/PipelinesCloudFormation-<Hash>` doesn’t exist in your AWS account. You can grab the `<account_id>` in the IAM role and federate into the IAM console of this account from the Isengard to check if this role exists or not. If this role exists, the other possible cause is that you might have updated some keys of resources in your template which we use to generate the `<Hash>` part of this role. The keys that customers might be able to update in template are `aws_account` of this IAM role (**account email** or account id), `region` of the account, and the `pipeline_id`.\\nTo solve this issue, you need to run synthesis to update the IAM role:\\nRun `lptsynthesize-fbuild/infrastructure_pipeline_definition.json-raws-resources`\\nPrevious page:[Scaffolding upgrade guide][11]\\n[1]: #troubleshooting-infrastructure-pipelines\\n[2]: #expected-failure-after-a-donor-region-becomes-ia-ga\\n[3]: #failure-related-to-amazonsns\\n[4]: #stack-update-failure-with-error-message-resource-type-amzn-odin-namespace-amzn-odin-materialset-is-not-available-for-this-account\\n[5]: #failure-with-error-message-user-arn-partition-iam-pipeline-team-account-id-user-pipelinesassumerole-is-not-authorized-to-perform-sts-assumerole-on-resource-arn-partition-iam-account-id-role-pipelinescloudformation-hash-when-synthesizing-infrapipelines\\n[6]: ../infrastructure-pipelines-one-touch/#infrastructure-pipelines-one-touch-explanding-to-region-without-cfn\\n[7]: ../infrastructure-pipelines-one-touch/#infrastructure-pipelines-one-touch-after-region-becomes-iaga\\n[8]: https://issues.amazon.com/issues/LPT-4832\\n[9]: https://issues.amazon.com/issues/CFN-10024\\n[10]: https://w.amazon.com/bin/view/Secrets/Ragnarok/\\n[11]: ../infrastructure-pipelines-scaffolding-upgrade/\"}}}"}]}
{"parentUuid":"7de4f24d-b5b8-4d94-953f-837bdd00b2db","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","message":{"id":"msg_bdrk_01AqzVEYwLDuMzsgWGkRWNAT","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"text","text":"Let me also search for RDE troubleshooting which had relevant content:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":4708,"cache_read_input_tokens":58718,"output_tokens":4}},"type":"assistant","uuid":"b690120f-6209-4d1c-af10-6b6734c2ecca","timestamp":"2025-07-28T22:53:02.859Z"}
{"parentUuid":"b690120f-6209-4d1c-af10-6b6734c2ecca","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","message":{"id":"msg_bdrk_01AqzVEYwLDuMzsgWGkRWNAT","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"tool_use","id":"toolu_bdrk_01PH5qTtii836qufPQanwjrs","name":"mcp__builder-mcp__ReadInternalWebsites","input":{"inputs":["https://docs.hub.amazon.dev/docs/rde/user-guide/troubleshooting/"]}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":4708,"cache_read_input_tokens":58718,"output_tokens":4}},"type":"assistant","uuid":"1bb7386c-a1dc-4738-a7ae-6f3c257ebc49","timestamp":"2025-07-28T22:53:04.209Z"}
{"parentUuid":"1bb7386c-a1dc-4738-a7ae-6f3c257ebc49","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_bdrk_01PH5qTtii836qufPQanwjrs","type":"tool_result","content":[{"type":"text","text":"{\"content\":{\"status\":\"success\",\"relativeHrefsDescription\":\"Relative hrefs represent related documents that can be accessed by evaluating the relative path with respect to the input URL. Links with fewer parent directory traversals (..) are more closely related to the current document.\",\"processedContent\":{\"relativeHrefs\":[\"../_static/pygments.css?v=b86133f3\",\"../_static/builderhubdocs.css?v=0ff2b2b2\",\"../_static/pygments_dark.css?v=f98d607c\",\"../genindex/\",\"../search/\",\"../troubleshooting-errors/\",\"../placeholders/\",\"../../../../btdocs_res/builderhub.min.css\",\"../../../../docs/dev-setup/index.html\",\"../../../../docs/onboarding/index.html\",\"../../../../docs/learning/index.html\",\"../../../../docs/software-health/index.html\",\"../../../../docs/golden-path/index.html\",\"../../../../docs/gen-ai-dev/index.html\",\"../../../../docs/measuring-sbx/index.html\",\"../../../../docs/app-types/index.html\",\"../../../../docs/event-consumers/index.html\",\"../../../../docs/machine-learning/index.html\",\"../../../../docs/mobile/index.html\",\"../../../../docs/web-services/index.html\",\"../../../../docs/workflow-orchestration/index.html\",\"../../../../docs/languages/index.html\",\"../../../../docs/languages/java/index.html\",\"../../../../docs/languages/python/index.html\",\"../../../../docs/languages/rust/index.html\",\"../../../../docs/languages/typescript/index.html\",\"../../../../docs/app-features/index.html\",\"../../../../docs/gen-ai/index.html\",\"../../../../docs/i18n/index.html\",\"../../../../docs/containers/index.html\",\"../../../../docs/native-aws/developer-guide/index.html\",\"../../../../docs/open-source/index.html\",\"../../../../docs/tools/index.html\",\"../../../../docs/qdeveloper/index.html\",\"../../../../docs/qdeveloper/user-guide/index.html\",\"../../../../docs/apollo/index.html\",\"../../../../docs/apollo/user-guide/index.html\",\"../../../../docs/apollo/api-guide/index.html\",\"../../../../docs/apollo/cdk-guide/index.html\",\"../../../../docs/apollo/cli-guide/index.html\",\"../../../../docs/axe/index.html\",\"../../../../docs/axe/user-guide/index.html\",\"../../../../docs/barium/index.html\",\"../../../../docs/bedrock/index.html\",\"../../../../docs/bedrock/user-guide/index.html\",\"../../../../docs/bemol/index.html\",\"../../../../docs/black-caiman/index.html\",\"../../../../docs/black-caiman/user-guide/index.html\",\"../../../../docs/brazil/index.html\",\"../../../../docs/brazil/user-guide/index.html\",\"../../../../docs/brazil/cli-guide/index.html\",\"../../../../docs/brazil/api-guide/index.html\",\"../../../../docs/brazil/peru-java-quickstart/index.html\",\"../../../../docs/brazil/peru-user-guide/index.html\",\"../../../../docs/brazil/peru-migration-guide/index.html\",\"../../../../docs/builderhub/index.html\",\"../../../../docs/builderhub/user-guide/index.html\",\"../../../../docs/create/cli-guide/index.html\",\"../../../../docs/bars/index.html\",\"../../../../docs/bars/api-guide/index.html\",\"../../../../docs/bats/index.html\",\"../../../../docs/bats/user-guide/index.html\",\"../../../../docs/bats/cli-guide/index.html\",\"../../../../docs/builder-mcp/index.html\",\"../../../../docs/builder-mcp/user-guide/index.html\",\"../../../../docs/builder-toolbox/index.html\",\"../../../../docs/builder-toolbox/user-guide/index.html\",\"../../../../docs/cd-signer/index.html\",\"../../../../docs/cd-signer/user-guide/index.html\",\"../../../../docs/cd-signer/api-guide/index.html\",\"../../../../docs/change-guardian/index.html\",\"../../../../docs/change-guardian/user-guide/index.html\",\"../../../../docs/cline/index.html\",\"../../../../docs/cline/user-guide/index.html\",\"../../../../docs/cloudcover/index.html\",\"../../../../docs/cloudcover/user-guide/index.html\",\"../../../../docs/cloud-desktop/index.html\",\"../../../../docs/cloud-desktop/user-guide/index.html\",\"../../../../docs/codeartifact/index.html\",\"../../../../docs/codeartifact/user-guide/index.html\",\"../../../../docs/code-browser/index.html\",\"../../../../docs/code-browser/user-guide/index.html\",\"../../../../docs/code-browser/api-guide/index.html\",\"../../../../docs/coral/index.html\",\"../../../../docs/coral/user-guide/index.html\",\"../../../../docs/coverlay/index.html\",\"../../../../docs/coverlay/user-guide/index.html\",\"../../../../docs/crux/index.html\",\"../../../../docs/crux/user-guide/index.html\",\"../../../../docs/crux/cli-guide/index.html\",\"../../../../docs/crux/api-guide/index.html\",\"../../../../docs/dogma/index.html\",\"../../../../docs/dogma/user-guide/index.html\",\"../../../../docs/dogma/cli-guide/index.html\",\"../../../../docs/dogma/api-guide/index.html\",\"../../../../docs/electric-company/index.html\",\"../../../../docs/electric-company/user-guide/index.html\",\"../../../../docs/gated-garden/index.html\",\"../../../../docs/gated-garden/v1/api-guide/index.html\",\"../../../../docs/gated-garden/v2/api-guide/index.html\",\"../../../../docs/gitfarm/index.html\",\"../../../../docs/gitfarm/user-guide/index.html\",\"../../../../docs/gitfarm/api-guide/index.html\",\"../../../../docs/gordian-knot/index.html\",\"../../../../docs/hydra/index.html\",\"../../../../docs/hydra/user-guide/index.html\",\"../../../../docs/hydra/cli-guide/index.html\",\"../../../../docs/hydra/api-guide/index.html\",\"../../../../docs/ironhide/index.html\",\"../../../../docs/ironhide/cli-guide/index.html\",\"../../../../docs/ironhide/transform-creator-guide/index.html\",\"../../../../docs/kiro/index.html\",\"../../../../docs/kiro/user-guide/index.html\",\"../../../../docs/lpt-synthesis/index.html\",\"../../../../docs/lpt-synthesis/user-guide/index.html\",\"../../../../docs/mrc/index.html\",\"../../../../docs/mrc/user-guide/index.html\",\"../../../../docs/personal-stacks/index.html\",\"../../../../docs/personal-stacks/user-guide/index.html\",\"../../../../docs/personal-stacks/cli-guide/index.html\",\"../../../../docs/pipelines/index.html\",\"../../../../docs/pipelines/user-guide/index.html\",\"../../../../docs/pipelines/cli-guide/index.html\",\"../../../../docs/pipelines/api-guide/index.html\",\"../../../../docs/pipelines/cdk-guide/index.html\",\"../../../../docs/quilt/index.html\",\"../../../../docs/quilt/user-guide/index.html\",\"../../../../docs/rde/index.html\",\"../../../../docs/rde/user-guide/index.html\",\"../getting-started/\",\"../setting-up-rde/\",\"../getting-application-up-and-running/\",\"../making-code-changes/\",\"../viewing-logs/\",\"../testing-and-debugging/\",\"../apollo-shim/\",\"../modifying-apollocmd/\",\"../howto/\",\"../naws-applications/\",\"../ec2-codedeploy/\",\"../ecs-containers/\",\"../running-integration-tests/\",\"../tod/\",\"../hydra/\",\"../consumed-envs-and-sidecars/\",\"../aws-ssl-proxy/\",\"../jlb-relay/\",\"../cdo-relay/\",\"../using-workflows/\",\"../basic-workflows/\",\"../adding-custom-shell-commands/\",\"../automating-cr/\",\"../working-with-credentials/\",\"../turtle/\",\"../aaa/\",\"../odin/\",\"../sentry/\",\"../aws-credentials/\",\"../hot-deploy-interpreted-languages/\",\"../running-dependencies-without-rebuilding/\",\"../concepts/\",\"../how-it-works/\",\"../reference/\",\"../commands/\",\"../commands-bugreport/\",\"../commands-definition/\",\"../commands-environment/\",\"../commands-help/\",\"../commands-stack/\",\"../commands-workflow/\",\"../definition-file/\",\"../placeholders/\",\"../troubleshooting-errors/\",\"../deprecated-features/\",\"../mocking-aws-locally/\",\"../infrastructure/\",\"../cloud-dev-proxy/\",\"../../../../docs/region-build-automation/index.html\",\"../../../../docs/region-build-automation/region-build-user-guide/index.html\",\"../../../../docs/region-build-automation/epim-user-guide/index.html\",\"../../../../docs/region-build-automation/chain-reaction-user-guide/index.html\",\"../../../../docs/smithy/index.html\",\"../../../../docs/smithy/user-guide/index.html\",\"../../../../docs/sas/index.html\",\"../../../../docs/sas/user-guide/index.html\",\"../../../../docs/sas/api-guide/index.html\",\"../../../../docs/tim/index.html\",\"../../../../docs/tim/user-guide/index.html\",\"../../../../docs/tod/index.html\",\"../../../../docs/tod/user-guide/index.html\",\"../../../../docs/tps-generator/index.html\",\"../../../../docs/tps-generator/user-guide/index.html\",\"../../../../docs/transmogrifier/index.html\",\"../../../../docs/transmogrifier/user-guide/index.html\",\"../../../../docs/transmogrifier/api-guide/index.html\",\"../../../../docs/trebuchet/index.html\",\"../../../../docs/universal-constructs/index.html\",\"../../../../docs/universal-constructs/user-guide/index.html\",\"../../../../docs/viceroy/index.html\",\"../../../../docs/wasabi/index.html\",\"../../../../docs/wasabi/user-guide/index.html\",\"../../../../docs/tools/products-wac/index.html\",\"../../../../docs/support/index.html\",\"../setting-up-rde/#setup-macos-docker-file-sharing\",\"../setting-up-rde/#setup-macos-docker-file-sharing\",\"../modifying-apollocmd/#howto-remove-existing-apollocmd\",\"../troubleshooting-errors/#error-11\",\"../using-workflows/#step-types\",\"../troubleshooting-errors/#error-22\",\"../modifying-apollocmd/#howto-remove-existing-apollocmd\",\"../modifying-apollocmd/#howto-modify-commands-that-dont-container\",\"../mocking-aws-locally/#aws-local-troubleshooting\",\"../definition-file/#container-build\",\"../troubleshooting-errors/#error-29\",\"../modifying-apollocmd/#howto-remove-existing-apollocmd\",\"../using-workflows/#step-types\",\"../troubleshooting-errors/\",\"../troubleshooting-errors/\",\"../placeholders/\"],\"mainContent\":\"![][1]# Troubleshooting RDE issues\\n# Troubleshooting RDE issues[¶][2]\\nNote\\nWhen troubleshooting RDE issues, make sure to take a look at the run logs and html reports associated with the RDE commands that are printed at the console as they contain all our debug statements. Alternatively, you can run the RDE commands using the `-v`/`--verbose` flag.\\n* [Access Denied: assumed-role/X is not authorized to perform sts:AssumeRole on resource role/X][3]\\n* [Container ID execution finished with non zero exit code 1 ; failed to start stack][4]\\n* [Why am I getting “Pool overlaps with other one on this address space” error when running the RDE Tutorial?][5]\\n* [I’m using AAA support and receive “AAA Workspace Registration:\\\\[INFO\\\\]Call failed: LoginResponseSentryException\\\\(‘Got status code: 401 from SSO login handler:”][6]\\n* [My self-signed SSL certificates have an incorrect root authority \\\\(rdeca\\\\), what gives?][7]\\n* [My stack has reached an inconsistent state and I am unable to start/restart it][8]\\n* [ApolloCmd script execution fails with “Failed with exit code 205: No such file or directory”][9]\\n* [ApolloCmd script execution fails with “exiting with error code 205” and “ERROR: Unable to execute SCRIPT: Permission denied”][10]\\n* [Coral service fails to start: “com.amazon.coral.ping.CheckOdinStrategy: Error accessing Odin”][11]\\n* [“rde def create” fails to retrieve version set information - “Could not get permissions information for version set group”][12]\\n* [HEX Coral Service script 000IncreaseEphemeralPortRange fails on application startup: “Read-only file system” setting key “net.ipv4.ip\\\\_local\\\\_port\\\\_range”][13]\\n* [My workspace provisioning step fails][14]\\n* [Lambda deploy step fails with “Ignoring function\\\\_name as no API event sources are defined”][15]\\n* [RDE has issues parsing my SAM template file][16]\\n* [Requests to CloudAuth backed services fail with: Access denied from: https://gateway.cloudauth.a2z.com/authorization\\\\_grant?response\\\\_type=assertion Response failed with status code: 403][17]\\n* [Docker daemon is running but RDE can’t connect to it][18]\\n* [I just can’t get Docker running][19]\\n* [Deployment fails with “API error \\\\(500\\\\) Mounts denied: no context set”][20]\\n* [Deployment fails for container applications on Cloud Desktops with “Unknown flag: chown”][21]\\n* [Why are my packages rebuilt, wasn’t the build step supposed to be smart and rebuild the changes only?][22]\\n* [Deployment fails with “Can’t exec “kinit”: No such file or directory at /apollo/env/…”][23]\\n* [AAA support: Could not connect to Unix domain socket at path ‘/tmp/aaa/be.sock’][24]\\n* [Calls to OdinEverywhere fail with “501 Not Implemented”][25]\\n* [The environment variables I added to my RDE Apollo Application definition are not accessible from my ApolloCmd scripts][26]\\n* [My Apollo startup script is failing with this error - “Read-only file system setting key …”][27]\\n* [Getting credential errors when using SQSLocal/S3Local/DynamoDBLocal][28]\\n* [Cannot find Cloud resources when running Lambda function][29]\\n * [SDO engineers][30]\\n  * [Fetching Odin materials on your laptop][31]\\n  * [Workaround for AWS User materials created before 1 August 2018][32]\\n\\n * [AWS engineers][33]\\n\\n* [SSL handshake fails when calling Cloud Auth server from Lambda function][34]\\n* [Application build/deployments fails with “…SymlinkFarmBuilder$SymlinkFarmConflictException: Symlink conflict exception…”][35]\\n* [Applications can’t retrieve Odin material sets; /var/odin directory doesn’t exist; Odin Everywhere Client is not started][36]\\n* [lambda-transform.yml no such file or directory][37]\\n* [Unable to reach EC2 metadata service][38]\\n* [I can’t find my Java application log for my Native AWS API Gateway / Lambda application][39]\\n* [Caught exception refusing to fork/exec /apollo/env/HEXTenantStartup/var/run-service.sh, binary does not exist!][40]\\n* [Package\\\\(s\\\\) with overridden version pointing to other workspaces are not deployed into the application container][41]\\n* [ApolloCmd script failing with line \\\\[some line number\\\\]: \\\\[some command\\\\]: command not found][42]\\n * [Install custom packages that are not available by default][43]\\n\\n* [RDE plugin not working due to java.lang.IllegalStateException: failed to find stack name][44]\\n* [ntpstat check fails: Unable to talk to NTP daemon. Is it running?][45]\\n* [ApolloCmd/PreactivateAdmin/020CreateCachingLogsDirectory failing with chown: invalid user: ‘builder:qlrm’][46]\\n* [ApolloCmd script execution fails with invalid group][47]\\n* [ApolloCmd/PreactivateAdmin/202FetchPorterBrazilCLICredentials failing][48]\\n* [failed to set rlimit for open files][49]\\n* [Deployment keeps failing with OCI runtime exec failed][50]\\n* [Apollo deployment fails with chown: cannot dereference ‘/apollo/var/env/APOLLO\\\\_ENV/output/logs/cacheoutd.log’: No such file or directory][51]\\n* [Deploying a AAA application on laptop fails with ‘tar: This does not look like a tar archive’][52]\\n* [Processes inside containers getting killed - kernel logs show arp\\\\_cache: neighbor table overflow!][53]\\n* [Script 010SetupMidwayCerts failed with an exit status of 1][54]\\n* [Referencing S3 buckets using the virtual-hosted style in S3Local fails][55]\\n* [AAA requests failing with Exception in AAASecurityDaemon: Couldn’t find signable header: ‘Accept-Encoding’ in list of required signed headers][56]\\n* [OdinClient \\\\(OdinEverywhere\\\\) not fetching materials / CDORelay / JLBRelay start-up failing][57]\\n * [Overwrite the values returned by the EC2 metadata service from the Personal Stack \\\\(i.e. change the AWS account region\\\\)][58]\\n\\n* [RDE doesn’t pick up changes to my packages/source code/Config file][59]\\n* [Starting CodeDeploy application fails during execution of the rewrite\\\\_apollo\\\\_shim.sh script][60]\\n* [Not authorized to perform can administer on Conduit managed dev accounts][61]\\n* [Additional topics][62]\\nHere are some issues that you may encounter while working with RDE, along with their potential causes/solutions.\\n## Access Denied: assumed-role/X is not authorized to perform sts:AssumeRole on resource role/X[¶][3]\\nIAM has made a change to the behavior of role trust policies.\\nNote\\nAWS Identity and Access Management (IAM) is changing an aspect of how role trust policy evaluation behaves when a role assumes itself. Previously, roles implicitly trusted themselves from a role trust policy perspective if they had identity-based permissions to assume themselves. After receiving and considering feedback from customers on this topic, AWS is changing role assumption behavior to always require self-referential role trust policy grants.\\nTo fix this, you’ll need to grant the role that RDE uses permissions to assume itself.\\n[See the blog post][63] for more information.\\n## Container ID execution finished with non zero exit code 1 ; failed to start stack[¶][4]\\n\\n```\\n[RDE-E-0007] Container 0941fb9eb83a933725b0a3c480582f607e23868141d1694e0c1e83efb75abf18 execution\\n   finished with non zero exit code 1\\n[RDE-E-0007] failed to start stack \\\"<stack>\\\": failed to start 1 application(s)\\n\\n```\\nIf this occurs, try to get into the stack and check the logs! Execute:\\n\\n```\\nrde stack exec _stack_ bash\\n```\\nthen look at the logs in the ~/logs directory! There should be some info in there\\nSpecific errors from the logs:\\n\\n```\\nFound an existing CodeDeploy OpConfig set in the apollo-shim.json, which is not allowed\\n\\n```\\nThis error may start popping up after you merge the latest ApolloShim 2.0 version which adds deployment group / deployment id info into your OpConfig values ([commit here][64]).\\nTo fix this, do as the error message says and add the following to your `ApolloShimURI` file, specified in `definition.json`:\\n\\n```\\n\\\"noCodeDeployOpConfig\\\": true\\n\\n```\\nTo see an example commit that fixes this, view [this commit][65].\\n## Why am I getting “Pool overlaps with other one on this address space” error when running the RDE Tutorial?[¶][5]\\nIf you’re doing the RDE turorial and you’ve finished the setup and want to start the stack using the **rde wflow run** command and you are encountering the following error:\\n\\n```\\nError: API error (500): Pool overlaps with other one on this address space\\n\\n```\\nYou will need to update `/etc/sysconfig/docker` and set:\\n\\n```\\n--bip=240.10.0.1/**24** --fixed-cidr=240.10.0.0/**24**\\n```\\nas opposed to:\\n\\n```\\n--bip=240.10.0.1/**16** --fixed-cidr=240.10.0.0/**16**\\n```\\nwhich is the default Docker setup\\n## I’m using AAA support and receive “AAA Workspace Registration:\\\\[INFO\\\\]Call failed: LoginResponseSentryException\\\\(‘Got status code: 401 from SSO login handler:”[¶][6]\\nMake sure you have a valid Kerberos ticket by running:\\n\\n```\\nklist\\n\\n```\\nThe output should contain something like:\\n\\n```\\nTicket cache: FILE:/tmp/krb5cc_XXXX\\n\\n```\\nIf it does not, then run:\\n\\n```\\nKRB5CCNAME=FILE:/tmp/krb5cc_$(id -u) kdestroy && kinit && klist\\n\\n```\\nIf your ticket cache name is suffixed with an additional set of characters similar to `/tmp/krb5cc__user_id__w2zQK92pbB` the above will not work. Instead, run these commands in order:\\n\\n```\\nkdestroy -c /tmp/krb5cc_<user_id>_w2zQK92pbB\\nKRB5CCNAME=FILE:/tmp/krb5cc_$(id -u)\\nkinit\\n\\n```\\nIf you encounter bad format errors, then manually remove the cache:\\n\\n```\\nsudo rm -rf /tmp/krb5cc_{user_id}_w2zQK92pbB\\n\\n```\\n## My self-signed SSL certificates have an incorrect root authority \\\\(rdeca\\\\), what gives?[¶][7]\\nIn order for the RDE container network to support HTTPS, [RDE sets up their own self-signed certificates][66] and then [uses sslsplit in Docker containers that are routing traffic to apply that root certificate authority][67] when endpoints are set up with https.\\nIf you use an Amazon signed certificate in your container, then you need to set the protocol to _http_, which in fact is just TCP traffic that flows through unmolested by RDE.\\nIf you use something like JLBRelay or any other technology to terminate your SSL in your container, then set it to _http_ and let the traffic flow through. Using this setup allows HTTPS traffic to correctly terminate in the container using redfort internally-signed certificates.\\n## My stack has reached an inconsistent state and I am unable to start/restart it[¶][8]\\nThis manifests itself as the following error (or similar):\\n\\n```\\nfailed to restart development stack: failed to start development stack: failed to create\\ncontainer: container already exists; failed to create container: container already exists;\\n\\n```\\nTry running the following command and then start your stack again:\\n\\n```\\ndocker rm -f $(docker ps -a -q)\\n\\n```\\nWarning\\nThis command will remove all Docker containers from your host!\\n## ApolloCmd script execution fails with “Failed with exit code 205: No such file or directory”[¶][9]\\nUsually this happens because RDE cannot find the right path to your brazil package cache. Make sure you followed [Install and configure Finch for MacOS][68] if you are running on macOS.\\n## ApolloCmd script execution fails with “exiting with error code 205” and “ERROR: Unable to execute SCRIPT: Permission denied”[¶][10]\\nUsually this happens because the runas user does not have access to execute scripts in the Brazil package cache. Please make sure your `brazil-pkg-cache` directory has permissions that allow the `runas` user to access and execute the files. This may occur because RDE uses the brazil-pkg-cache on your laptop or dev desktop.\\nFor macOS, if you [changed file sharing][68] for Docker, you should make it default or set it correctly; incorrect file sharing settings can lead to this error.\\n## Coral service fails to start: “com.amazon.coral.ping.CheckOdinStrategy: Error accessing Odin”[¶][11]\\nRDE does not support [the AmazonCoralHealthChecker package][69], which is currently being deprecated.\\nMigrate to [the OdinApolloMaterialChecker][70] package if possible.\\n## “rde def create” fails to retrieve version set information - “Could not get permissions information for version set group”[¶][12]\\nThis happens if your version set permissions are managed by Bindles and you use Brazil CLI 1.0. To fix this, upgrade to Brazil CLI 2.0. For more context, please see [BrazilBX-1097][71]\\n## HEX Coral Service script 000IncreaseEphemeralPortRange fails on application startup: “Read-only file system” setting key “net.ipv4.ip\\\\_local\\\\_port\\\\_range”[¶][13]\\n* Initial report: [RDCT-878][72]\\nDocker does not support changing `sysctls` inside of a container that also modify the host system. However, this specific setting that the script tries to modify is only needed if your app is opening lots of outgoing network connections. Even if you’re not changing it, this won’t have an impact on local testing scenarios, and would be more valuable for large scale load testing scenarios on actual hosts.\\nThe solution is to remove the `000IncreaseEphemeralPortRange` script from the apollo activation scripts by using a custom RDE mount point as described in [Removing an existing ApolloCmd script][73] (and [done here][74]).\\n## My workspace provisioning step fails[¶][14]\\n* Example: [RDCT-1129][75]\\nWhen referencing resources such as scripts from [RDE-DevWorkflowScripts][76], you also need to add it to the `Config` file of your RDE definition package:\\n\\n```\\ndependencies = {\\n    1.0 = {\\n        RDE-DevWorkflowScripts = 1.0;\\n    };\\n};\\n\\n```\\n## Lambda deploy step fails with “Ignoring function\\\\_name as no API event sources are defined”[¶][15]\\nThis error occurs when there are no event sources added to your lambda function in the sam template file. Be sure to add events to your lambda function. See [this example][77] for details.\\n## RDE has issues parsing my SAM template file[¶][16]\\n* Example: [RDCT-1277][78]\\nUnfortunately, the current SAM Local version incorporated in RDE doesn’t fully support all potential formats. I.e. in the sample issues posted above, you can see that global values are not supported, and that SAM is not able to parse numeric values. You can try to work around the issues by following the suggestions in the SIM(s), and if you’re unable to to do so, please feel free to cut us an issue so we can try and investigate further.\\n## Requests to CloudAuth backed services fail with: Access denied from: [https://gateway.cloudauth.a2z.com/authorization\\\\_grant?response\\\\_type=assertion][79] Response failed with status code: 403[¶][17]\\nDue to how how CloudAuth works the region set to CloudAuth should match to the region you’re physically running your RDE stack. More details can be found in the [Builder Tools blog][80] and this [sage question][81]. You can also find more details in the [CloudAuth troubleshooting wiki][82].\\nOther references\\n* [Access denied for CloudAuthServer due to some region mismatch][81]\\n* [AccessDeniedException with RDE + CloudAuth + Coral][83]\\n* [CloudAuth signing region is not configurable \\\\(i.e. depends on DNS resolution / proximity\\\\)][84]\\n## Docker daemon is running but RDE can’t connect to it[¶][18]\\nThis can manifest itself with the following error:\\n\\n```\\nCouldn't get docker client: Get http://unix.sock/_ping: dial unix /var/run/docker.sock: connect:\\nno such file or directory\\n\\n```\\nIf you’ve installed Docker using the recommended `amazon-docker-setup` package then most likely you will need to reset the value of your `DOCKER_HOST` to `tcp://127.0.0.1:2376`.\\nYou should also add the `-H=unix:///var/run/docker.sock` value (alongside `-H=tcp://127.0.0.1:2376`) to your `/etc/sysconfig/docker` options if missing to have the complete setup.\\n## I just can’t get Docker running[¶][19]\\nSee [Error 11: Docker is not responding][85] to troubleshoot Docker.\\n## Deployment fails with “API error \\\\(500\\\\) Mounts denied: no context set”[¶][20]\\nTry restarting Docker, and then deploy your stack again. See [RDCT-2766][86] for more information.\\n## Deployment fails for container applications on Cloud Desktops with “Unknown flag: chown”[¶][21]\\nThis is caused when the Docker is too old and does not have support for `COPY`’s `chown` flag. For more information, see [RDCT-2775][87] and [Sage-785306][88].\\nNote\\nSupport for the `chown` flag has been added in Docker version 17.09.\\n## Why are my packages rebuilt, wasn’t the build step supposed to be smart and rebuild the changes only?[¶][22]\\nRDE is supposed to rebuild _only the changed packages_ (unless you use [the force build][89]). However you may still experience redundant builds.\\nRDE relies on **git** to detect code changes. It tracks all your package files but ignores the one that are ignored by **git**. So if you have a misconfigured `.gitignore`, for instance your git is aware of intellij artifacts (verifiable by running **git status**), then the package will be rebuilt next time you run the build step.\\nTo solve this problem, you should add the unwanted artifacts to the `.gitignore` file at the root of your RDE package. This way, your teammates will also benefit from your change.\\nThe most common artifacts that should be ignored are:\\n\\n```\\n*.iml\\n*.idea/*\\n/build\\n\\n```\\n## Deployment fails with “Can’t exec “kinit”: No such file or directory at /apollo/env/…”[¶][23]\\nYou need to add Kerberos as a runtime dependency to your application in order to have Kerberos work within RDE.\\nThe reason for that is that it is not part of our images as it breaks some other libraries needed at startup.\\n## AAA support: Could not connect to Unix domain socket at path ‘/tmp/aaa/be.sock’[¶][24]\\nThis error is commonly caused by the fact that the code that is trying to access the AAA socket file doesn’t have sufficient permissions to do so.\\nExamples:\\n* [RDCT-1664][90]\\n* [RDCT-1666][91]\\nThese customers were trying to execute scripts that required access to the AAA sock via the RDE stack exec command/step. The stack exec commands are executed using the `deceneu` user which doesn’t have permissions to the AAA socket file. To fix the problem, the customers used `sudo-u_username_script.sh` to execute the scripts successfully.\\n## Calls to OdinEverywhere fail with “501 Not Implemented”[¶][25]\\nOlder Odin clients are currently not supported by our OdinEverywhere proxy. For more information, see [Error 22: Unsupported Odin client][92].\\n## The environment variables I added to my RDE Apollo Application definition are not accessible from my ApolloCmd scripts[¶][26]\\nApollo cleans the environment before it executes your scripts. This is the same behavior that you will encounter on actual hosts, so we _don’t_ recommend that you try to work around this—you’ll end up with a setup that only works locally and not on your hosts.\\nHowever, if this is the behavior that you’re trying to achieve, you can do it by [creating an etc/env.d file][93] that is sourced by your application. [Here is an example][94] of how to create the file.\\n## My Apollo startup script is failing with this error - “Read-only file system setting key …”[¶][27]\\nExample: [Sage-547751][95]\\nThis type of error is caused by ApolloCmd scripts that try to configure namespaced kernel parameters (sysctls) at runtime.\\nNote\\n[This is not supported by Docker!][96]\\nHowever, in most scenarios, these scripts won’t impact your actual local testing, since they’re rarely tied to your actual application logic. So to workaround this limitation, just go ahead and [delete the script from your local RDE application startup logic][73]. As an alternative, you can [replace the offending sysctl command with a no op command][97] if you have multiple scripts that try to access it.\\n## Getting credential errors when using SQSLocal/S3Local/DynamoDBLocal[¶][28]\\nTypical errors:\\n* The AWS Access Key Id you provided does not exist in our records\\n* The security token included in the request is invalid\\nPlease see [this dedicated troubleshooting guide][98].\\n## Cannot find Cloud resources when running Lambda function[¶][29]\\nThis normally happens when don’t you specify the correct region or use the proper account:\\nNote\\nIf you’re using Lambda, don’t forget to set the `AWS_REGION` environment variable to the region where your resources are provisioned. The region specified in the RDE config doesn’t apply here.\\nWarning\\nIf you attach a dev account section to your personal stack your exposed ports will no longer be accessible from outside the development host (i.e. they will only be reachable via localhost). We do this as a security precaution since we don’t want to allow external entities to access anything that can leverage your AWS credentials.\\n### SDO engineers[¶][30]\\nSDO engineers will need an [Conduit\\\\_Service/#For\\\\_Customers][99] non-production Conduit AWS account and use the `IibsAdminAccess-DO-NOT-DELETE` role (support for other roles will be added later).\\nOnce these prerequisites are met, you need to add the `devAccount` section to your Personal Stack in your RDE definition file:\\n\\n```\\nversion: 2016-11-18\\nstack:\\n  name: TheSampleBeerStack\\n  devAccount:\\n    type: Conduit\\n    # replace the roleArn value with your own specific role arn.\\n    # This probably means replacing 000000000000 with your account number.\\n    roleArn: arn:aws:iam::000000000000:role/IibsAdminAccess-DO-NOT-DELETE\\n  applications:\\n    MyApp:\\n      # ...\\n\\n```\\n#### Fetching Odin materials on your laptop[¶][31]\\n* The Odin daemon that runs as part of your Personal Stack on your laptop is using an OdinEverywhere client. Consequently, it uses the `devAccount`  temporary credentials to fetch odin materials. It will be able to fetch only the materials that are bound to an AWS account, namely the one from `devAccount`.\\n* Conduit managed Odin materials, that contain AWS Users credentials, created **before 1 August 2018**, can’t be attached to an AWS account. The ones created **after 1  August 2018** are part of your bindle, hence the full control (no problem here). See [AssetTrustSystems/Conduit/ManagingAccessToOdinMaterialSets/][100] for more information. The Conduit team intends to backfill the old materials.\\n* If you are using Conduit-managed Odin materials to retrieve AWS credentials, see [Using Odin Credentials][101] for accessing Odin credentials with RDE.\\nWarning\\nUsing AWS Users is discouraged. Even if the credentials are rotated by Conduit, it’s rather preferred to use temporary credentials instead via [HOSM Everywhere][102].\\n#### Workaround for AWS User materials created before 1 August 2018[¶][32]\\n1. If your application relies Odin Material Sets to provision AWS User access-keys, then switch to temporary AWS credentials. Follow [this Java example][103] that adds a `DefaultAWSCredentialsProviderChain` to the credentials provider.  This way the local EC2MetadataService (the one created by RDE) can be queried instead for temporary credentials when the Odin material set cannot be accessed.\\n2. By default the `OdinAWSCredentialsProvider` class will eagerly load the configuration upon construction, and will throw an exception if it can’t access the material set. Even though the `DefaultAWSCredentialsProviderChain` has higher precedence, you will end up getting an Odin exception during start up. The work around for this is to use the `OdinAWSCredentialsProvider` constructor which allows disabling the `fastFail` parameter.\\n3. You’ll need to restart your RDE stack, if it’s already running, to apply these changes:\\n\\n```\\nrde stack restart\\n\\n```\\n4. You’re all done!\\nAdditional references\\n* [Accessing Material Set on Mac for SDO owned AWS account][104]\\n* [RDE devAccount ARN for a Conduit AWS Account][105]\\n* [Assuming a IAM Role along with OdinProvider][106]\\n### AWS engineers[¶][33]\\nWarning\\nAWS Security recommends avoiding use of IAM-Users and permanent access keys. When you use AWS accounts as material set destinations you are going against AWS Security recommendations! If your application relies Odin Material Sets to provision access-keys, then switch to temporary AWS credentials. Follow [this Java example][107] that adds a DefaultAWSCredentialsProviderChain to the credentials provider.\\nThis way the local EC2MetadataService can be queried instead for the temp credentials when the Odin material set cannot be accessed.\\nBefore you get started, consider using IAM-Roles instead of IAM-users. See the warning block above.\\n* AWS engineers will need an Isengard role associated with a non-production account. Use the following settings for the account data classification:\\n![../_images/isengard_account_type.png][108]\\n* Make sure you have an administrator role setup for this account:\\n![../_images/isengard_admin_role_blur.png][109]\\nOnce these prerequisites are met, you need to add the `devAccount` section to your Personal Stack in your RDE definition file:\\n\\n```\\nversion: 2016-11-18\\nstack:\\n  name: TheSampleBeerStack\\n  devAccount:\\n    type: Isengard\\n    # replace the roleArn value with your own specific role arn by copy-pasting it from Isengard (see screenshot above)\\n    roleArn: arn:aws:iam::000000000000:role/Admin\\n  applications:\\n    MyApp:\\n      # ...\\n\\n```\\nYou’re all done. Please note that you need to restart your RDE stack if it’s already running to apply these changes: `rdestackrestart`.\\n## SSL handshake fails when calling Cloud Auth server from Lambda function[¶][34]\\nYou will need to patch the internal certificate trust store for your Lambda function. Follow the suggestions in [this sage question][110]. You can also view some example in our code in [DeceneuCloudAuthServiceHydraTests/configuration/aws\\\\_lambda/lambda-transform.yml][111] and [DeceneuCloudAuthServiceHydraTests/src/com/amazon/DeceneuInternalSampleService/CloudAuthTestCases.java <DeceneuCloudAuthServiceHydraTests/blobs/662182aa1436005be7c566c38544d74a34373c35/–/src/com/amazon/DeceneuInternalSampleService/CloudAuthTestCases.java#L26,L27][112].\\nFor context you can also have a look at one of our previous issues: [RDCT-1783][113].\\n## Application build/deployments fails with “…SymlinkFarmBuilder$SymlinkFarmConflictException: Symlink conflict exception…”[¶][35]\\nThis error occurs when RDE tries to build your application or compute its runtime farm using `brazil-build` and `brazil-path`, respectively. It happens when two or more packages from your runtime dependencies have the same file in their build artifacts.\\nThis isn’t supported by Brazil, and RDE actually does its job of simulating real deployments as this would most likely fail in your Beta/Prod environments as well.\\nYou should look into whether you really need both packages as your runtime dependencies as you can only use one with Brazil (e.g. [BrazilBuildSystem/Concepts/RemoveDependencies][114]). You can find more details here:\\n* [Sage-410055][115]\\n* [Sage-286727][116]\\n* [Sage-304995][117]\\n## Applications can’t retrieve Odin material sets; /var/odin directory doesn’t exist; Odin Everywhere Client is not started[¶][36]\\nExamples:\\n* [Sage-563707][118]\\n* [RDCT-1721][119]\\nTypical error message string:\\n\\n```\\nException in thread \\\"main\\\" java.lang.RuntimeException: Error retrieving material:\\ncom.amazon.foo.bar ...\\n\\n```\\nRDE will not automatically start up the OdinEverywhere daemon for you. That’s the responsibility of your application logic.\\nThe simple reason for that being that your application should be able to start both in an RDE container and on an actual EC2 instance, so it should take care of starting its runtime dependencies on its own. So to verify is there’s an issue in RDE, please first check that your application is able to start properly on an actual EC2 instance.\\nIf not, please make sure that you didn’t miss any step from the [OdinEverywhere onboarding guide][120] (i.e.  maybe you need to add a particular package to your application dependency chain).\\n## lambda-transform.yml no such file or directory[¶][37]\\nExample error message string:\\n\\n```\\nunable to get lambda transform parameters from package \\\"/_path_/_to_/_workspace_/env/_Package_-1.0/runtime\\\"\\nlstat /_path_/_to_/_workspace_/env/_Package_-1.0/runtime/aws_lambda/lambda-transform.yml\\nno such file or directory\\n```\\nThis error is caused because your packages cannot be natively built on MacOs. Please make sure that you use the RDE [container build feature][121] to build your SAM applications instead.\\n## Unable to reach EC2 metadata service[¶][38]\\nPlease see the [dedicated error code help][122] for more details.\\n## I can’t find my Java application log for my Native AWS API Gateway / Lambda application[¶][39]\\nYou can find the API Gateway logs by entering your SAM application container (`rdestackexec_YOUR_RDE_APP_NAME_`). They will be saved in `/home/_username_/logs`.\\nTo have the `log4j2` messages available in the API Gateway logs, you need a custom `log4j2.xml` config file which uses a `LambdaAppender`. For more information, see [Advanced logging with Log4j 2 and SLF4J][123] in the _AWS Lambda User Guide_.\\nNote\\nBe sure to also add a dependency to `Maven-com-amazonaws_aws-lambda-java-log4j2`.\\nAn alternative to `log4j2` is to use a `LambdaLogger` which should work out of the box. The `LambdaActivityBase` class from Native AWS already references a Lambda runtime context which you can use to retrieve the logger.\\nFor example, assuming `GetInAppMessagesActivity` extends `LambdaActivityBase`, then you can run:\\n\\n```\\nthis.getContext().getLogger().log(\\\"custom log message\\\");\\n\\n```\\n## Caught exception refusing to fork/exec /apollo/env/HEXTenantStartup/var/run-service.sh, binary does not exist![¶][40]\\nThis means that the [HEXTenantStartup][124] consumable is not deployed together with your application. Add it as a dependency to your application to get past this problem. For more details, check out [this definition file][125]:\\n\\n```\\n#...\\n  applications:\\n    MyApplication\\n#...\\n      dependencies:\\n        HEXTenantStartup:\\n          type: brazil/apollo\\n          codeURI: ../../../HEXTenantStartup\\n          apolloShimURI: apollo-shim/HEXTenantStartup.json\\n          packages:\\n            HEXTenantStartupOperationalDependencies:\\n              buildTarget: release\\n              isVersionSetTarget: true\\n#...\\n\\n```\\n## Package\\\\(s\\\\) with overridden version pointing to other workspaces are not deployed into the application container[¶][41]\\nAs described in [Apollo Environment Overrides][126], you can override the version of a package from your workspace to point to another workspace. This does not currently work with RDE because we only mount the workspace specified by the `codeURI` field from the definition file. See [RDCT-2111][127] if you’re impacted.\\nHowever, you can workaround this by manually mounting the referenced workspaces containing your packages:\\n\\n```\\nstack:\\n  name: MyStack\\n  applications:\\n    MyApplication:\\n      type: brazil/apollo\\n      ...\\n      mountPoints:\\n      - sourceURI: /path/to/other/workspace\\n        destinationURI: /path/to/other/workspace\\n    ...\\n\\n```\\n## ApolloCmd script failing with line \\\\[some line number\\\\]: \\\\[some command\\\\]: command not found[¶][42]\\nSome Docker images we use to create the containers are minimal and there is a chance for some of the ApolloComs scrips to fail because of a command not installed inside the container. To solve this, you will have to mount a bash script (containing the install commands) inside the container.\\nFor example, to install `nc`, the contents of the script will be:\\n\\n```\\n#!/apollo/bin/env /bin/bash\\n\\nyum install -y nc\\n\\n```\\n### Install custom packages that are not available by default[¶][43]\\nAnother potential use case you might run into is requiring certain commands that are not available in the Docker image by default (e.g. zsh, etc.).\\nAn easy fix would be to use the RDE application mount points to add a custom script that uses `yum` to install them:\\n\\n```\\ntouch mounts/000InstallPackages\\nchmod +x mounts/000InstallPackages\\n\\n```\\nNow go ahead and edit the newly created script using your favorite editor and add the following content:\\n\\n```\\n#!/apollo/bin/env /bin/bash\\n\\nyum install -y ${YOUR_PACKAGE}\\n\\n```\\nNow, make sure you have the following mount point setup inside your application:\\n\\n```\\nstack:\\n  name: TheSampleBeerServiceStack\\n  applications:\\n    TheSampleBeerService:\\n      ...\\n      mountPoints:\\n      ...\\n      - sourceURI: mounts/000InstallPackages\\n        destinationURI: ApolloCmd/PreactivateAdmin/000InstallPackages</font>\\n      ...\\n\\n```\\n## RDE plugin not working due to java.lang.IllegalStateException: failed to find stack name[¶][44]\\nThe error might be a result of a conflict between the RDE plugin and Intellij’s template support. A customer noticed the problem when using the RDE plugin while having template parsing for yaml files enabled through Jinja (which he used to render CloudFormation definition files).\\nTo solve it, manually exclude the RDE `definition.yaml` from being treated as a YAML file. For more information, see [RDCT-2132][128].\\n## ntpstat check fails: Unable to talk to NTP daemon. Is it running?[¶][45]\\nPlease see [RDCT-2174][129] for full reference.\\nIf you’re trying to invoke the `ntpstat` utility as part of your `brazil/apollo` app, you need to do a bit of extra tinkering to make it work:\\n1. Add an explicit mount point to your brazil/apollo application:\\n\\n```\\nmountPoints:\\n- sourceURI: /etc/ntp.conf\\n  destinationURI: /etc/ntp.conf\\n\\n```\\n2. When you invoke the `ntpstat` utility in your ApolloCmd bash script, always use the full path or add `/usr/sbin` to your PATH environment variable. For example, instead of `ntpstat`, use `/usr/sbin/ntpstat` or `PATH=$PATH:/usr/sbinntpstat`.\\n3. Restart your RDE application to apply the new mount point and you should be set.\\n## ApolloCmd/PreactivateAdmin/020CreateCachingLogsDirectory failing with chown: invalid user: ‘builder:qlrm’[¶][46]\\nRDE doesn’t create the builder account expected by the script, and you will have to add it yourself using the solution described below.\\nThe workaround uses the application mount points feature to add a custom ApolloCmd script to your application. You’ll only commit it inside your RDE definition package, so it will never end up on your actual beta/gamma/prod stacks.\\n1. Create a new folder structure inside your RDE definition package. Make sure you’re at the root of the package, and then execute the following:\\n\\n```\\nmkdir -p mounts/scripts\\ntouch mounts/scripts/000CreateBuilderAccount\\nchmod +x mounts/scripts/000CreateBuilderAccount\\n\\n```\\n2. Add the following to the contents of the newly created script:\\n\\n```\\n#!/apollo/sbin/envroot /bin/sh\\n\\n/usr/sbin/useradd -r builder -g amazon\\n\\n```\\n3. Add a new `sourceURI` and `destinationURI``mountPoints` pair to your application:\\n\\n```\\napplications:\\n  TheApplicationWhoseScriptFailed:\\n    ...\\n    mountPoints:\\n    ...\\n    - sourceURI: mounts/scripts/000CreateBuilderAccount\\n      destinationURI: ApolloCmd/PreactivateAdmin/000CreateBuilderAccount</font>\\n    ...\\n\\n```\\n4. Restart your application by running `rdestackstart`.\\n## ApolloCmd script execution fails with invalid group[¶][47]\\nThe [ApolloShimOpConfigHelpers][130] package can change the values returned by the EC2 metadata service for local testing via `apollo-shim-static-replacements` and `apollo-shim-custom-replacements`. You can leverage these benefits in RDE as well. You need to create an `apollo-shim-static-replacements` file in your RDE definition package and then add a mount point for it in your RDE application like so:\\n\\n```\\n...\\nstack:\\n  name: TheNativeBeerServiceStack\\n  applications:\\n    TheNativeBeerService:\\n      type: brazil/codedeploy\\n      # ...\\n      mountPoints:\\n      - sourceURI: mounts/apollo-shim-static-replacements\\n        destinationURI: /opt/apollo-shim-static-replacements\\n...\\n\\n```\\nSome deployments might require changing the permissions for certain files. If this is the case and your local RDE deployment fails (for your codedeploy application) because of a group that could not be found inside the containers, you can create it by relying on the execution of the `/opt/apollo-shim-static-replacements` script during the deployment.\\nIn [RDCT-2768][131], a workaround is proposed which solved the `chgrp:invalidgroup:'qlrm'` error by leveraging `apollo-shim-static-replacements`. The contents of the `apollo-shim-static-replacements` file:\\n\\n```\\n% cat mounts/apollo-shim-static-replacements\\n\\ngroupadd qlrm && useradd -G qlrm qlpuller\\n\\n```\\n## ApolloCmd/PreactivateAdmin/202FetchPorterBrazilCLICredentials failing[¶][48]\\nSee [RDCT-2483][132].\\nThe script is intended to retrieve credentials during deployment time as part of authenticating the host (for more information, see [Amazon Host Identity][133]). It fails as it looks for credentials that are not mounted inside the Docker container.\\nThe workaround is to simply prevent that script from executing by following the steps presented in [Removing an existing ApolloCmd script][73].\\n## failed to set rlimit for open files[¶][49]\\nBy default, `memcached` comes preconfigured with 65535 connections whereas the Docker configuration for RDE suggests 1024.\\nOne solution is to increase the number of open files per container to match the `memcached` default value.\\n1. Edit the Docker config file (`/etc/sysconfig/docker`) and add the following options:\\n\\n```\\nOPTIONS=\\\"--default-ulimit nofile=1024:65535\\\"\\n\\n```\\n2. Restart Docker:\\n\\n```\\nsudo /etc/init.d/docker restart\\n\\n```\\nNote\\nThis fix was tested only in cloud desktops.\\n## Deployment keeps failing with OCI runtime exec failed[¶][50]\\nThis error can occur when your applications (or application dependencies) have the same name. Using unique names should fix the problem.\\n## Apollo deployment fails with chown: cannot dereference ‘/apollo/var/env/APOLLO\\\\_ENV/output/logs/cacheoutd.log’: No such file or directory[¶][51]\\nThis is usually caused by the application mount points to make the Apollo logs directory available on your host. The cause is a broken symlink, either because you’ve cleaned up some (but not all) of the log files from your host, or because the log rotation didn’t complete successfully. The solution is to empty the logs directory from your host completely and then attempt a stack restart.\\n## Deploying a AAA application on laptop fails with ‘tar: This does not look like a tar archive’[¶][52]\\nIf you encounter this error, consider using your Cloud Desktop to deploy your AAA application as a workaround. AAA is made available on laptops by forwarding credentials through a Cloud Desktop. As part of the process, we bundle some files from the Cloud Desktop in a tar archive and send them to the laptop. For more information, see [RDCT-1467][134].\\n## Processes inside containers getting killed - kernel logs show arp\\\\_cache: neighbor table overflow![¶][53]\\nThis can happen for stacks with a large number of applications that exhaust the limits of the ARP cache on the host on which you are running RDE. You can adjust some `sysctl` options in order to work around the issue as described in [RDCT-2841][135].\\n## Script 010SetupMidwayCerts failed with an exit status of 1[¶][54]\\nIf the script fails with the following error:\\n\\n```\\ngetaddrinfo: Temporary failure in name resolution (s3.us-east-1.amazonaws.com:80) excluded from\\ncapture: No server specified, No host specified, No path specified, No public_key specified, No\\nsecret_key specified, No project_id specified\\n\\n```\\nThis may be from stacks with a large number of applications that exhaust the limits of the ARP cache on the host on which you are running RDE. You can adjust some `sysctl` options in order to work around the issue as described in [RDCT-2841][135].\\n## Referencing S3 buckets using the virtual-hosted style in S3Local fails[¶][55]\\nOne of the common errors that you may encounter is:\\n\\n```\\nThe XML you provided was not well-formed or did not validate against our published schema.\\n\\n```\\nThis is fixed by enabling virtual-hosted style references for MinIO by setting the [domain][136] through the `S3Local.domain` OpConfig value in the Apollo shim of your S3Local application (usually `apollo-shim/S3Local.json`):\\n\\n```\\n{\\n  \\\"environment\\\": {\\n    \\\"environmentAlias\\\": \\\"S3Local\\\",\\n    \\\"runAsUser\\\": \\\"nobody\\\"\\n  },\\n  \\\"defaultStack\\\": \\\"S3Local.Prod\\\",\\n  \\\"S3Local.Prod\\\": {\\n    \\\"OCF\\\": {\\n      \\\"ProcessManager\\\": {\\n        \\\"overrideFile\\\": \\\"S3Local.cfg\\\"\\n      },\\n      \\\"PubSub\\\": {\\n        \\\"domain\\\": \\\"prod\\\",\\n        \\\"realm\\\": \\\"_us-east-1_\\\"\\n      },\\n      \\\"S3Local\\\": {\\n        \\\"domain\\\": \\\"_s3.amazonaws.com_\\\"\\n      }\\n    },\\n    \\\"environmentStage\\\": {\\n      \\\"name\\\": \\\"Prod\\\",\\n      \\\"environmentFullName\\\": \\\"S3Local/Prod\\\"\\n    }\\n  }\\n}\\n```\\nNote\\nFor `realm`, make sure that you select the actual AWS region that your application expects.\\nThe `domain` enables virtual host references. Requests must match `(.+).s3.amazonaws.com`. If the base domain is expected to different, change the domain to the appropriate value.\\n## AAA requests failing with Exception in AAASecurityDaemon: Couldn’t find signable header: ‘Accept-Encoding’ in list of required signed headers[¶][56]\\nThis can happen when using HTTPS network mappings to access your AAA applications. RDE uses [sslsplit][137] behind the scenes for the SSL termination which strips `Accept-Encoding` headers (see `thisissueonGitHub<https://github.com/droe/sslsplit/issues/129>`). The workaround is to use TCP network mappings and either use plain HTTP when running locally or perform the TLS termination at the application level. You can find more details and also track the progress on the long-term fix in [RDCT-2879][138].\\n## OdinClient \\\\(OdinEverywhere\\\\) not fetching materials / CDORelay / JLBRelay start-up failing[¶][57]\\nIf you see the following error:\\n\\n```\\njlb.relay.launcher.JlbRelayLauncher: main - Exception occurred; {\\n   jlb.relay.exceptions.FetchTlsDataException: java.lang.RuntimeException: Error retrieving\\n   material\\n\\n```\\nMake sure that you’ve changed the region of your AWS account (by overriding the EC2 metadata values). Note that since 2020-02-12, you also need to specify the `availabilityZone` in the instance identity document.\\n### Overwrite the values returned by the EC2 metadata service from the Personal Stack \\\\(i.e. change the AWS account region\\\\)[¶][58]\\nYou can add the `ec2MetadataURI` field to your RDE definition to specify a YAML file containing the metadata value that you want to overwrite.\\nFor example, if you want to change the region with which your CodeDeploy application is started, you first need to create the metadata overwrite file.\\nRun this at the root of your RDE package:\\n\\n```\\nmkdir -p config\\ntouch config/ec2metadata.yaml\\n\\n```\\nNow add the following content to it:\\n\\n```\\nlatest:\\n  # setting the availability zone in the instance identity document is required since 2020-02-12 because of this change: https://code.amazon.com/reviews/CR-19513613\\n  # more details can be found at https://issues.amazon.com/NADE-6081 and https://issues.amazon.com/issues/RDCT-2893\\n  dynamic:\\n    instance-identity:\\n      document: |-\\n        {\\n          \\\"region\\\": \\\"us-east-1\\\",\\n          \\\"availabilityZone\\\": \\\"us-east-1a\\\"\\n        }\\n  meta-data:\\n    placement:\\n      availability-zone: us-east-1a\\n\\n```\\nFinally, update your RDE definition to use the `config/ec2metadata.yaml` file to overwrite the desired metadata values:\\n\\n```\\nversion: 2016-11-18\\nstack:\\n  name: MyStack\\n  devAccount:\\n    ...\\n  ec2MetadataURI: config/ec2metadata.yaml\\n  applications:\\n    ...\\n\\n```\\nNote\\nThe instance identity document is seen as one YAML entry by RDE so you cannot override just some of its values. If your application needs more entries than just the `region` and `availabilityZone`, you must set all of the values for the document:\\n\\n```\\nlatest:\\n  dynamic:\\n    instance-identity:\\n      document: |-\\n        {\\n          \\\"devpayProductCodes\\\": null,\\n          \\\"availabilityZone\\\": \\\"eu-west-1c\\\",\\n          \\\"privateIp\\\": \\\"10.4.149.136\\\",\\n          \\\"version\\\": \\\"2010-08-31\\\",\\n          \\\"region\\\": \\\"eu-west-1\\\",\\n          \\\"instanceId\\\": \\\"i-668b10ea\\\",\\n          \\\"billingProducts\\\": null,\\n          \\\"instanceType\\\": \\\"m4.2xlarge\\\",\\n          \\\"accountId\\\": \\\"963362704314\\\",\\n          \\\"pendingTime\\\": \\\"2016-07-04T08:40:17Z\\\",\\n          \\\"imageId\\\": \\\"ami-ab0490d8\\\",\\n          \\\"architecture\\\": \\\"x86_64\\\",\\n          \\\"kernelId\\\": null,\\n          \\\"ramdiskId\\\": null\\n        }\\n...\\n\\n```\\nThe values from the file will take precedence when merged with our [defaults][139]. They will then be served through the metadata service and will thus be available to all the applications in your stack.\\nFor the current example, calls to `http://169.254.169.254/_api-version_/meta-data/placement/availability-zone` from inside your Personal Stack will now return `us-east-1a` Note how the yaml structure coincides with the one of the URL of the requested resource.\\nMoreover, the API version is listed as a placeholder because metadata overwritten for the **latest** version is available for all the other (older) interface versions of the EC2 metadata service. However, should you need to overwrite values for a specific version only, you can do so by replacing **latest** with the desired version in the overwrite file.\\nTo make it easier to manually edit the overwrite file and to avoid unexpected issues caused by typos or misalignments, the contents of the file are validated against an [EC2 metadata schema RDEEC2MetadataSchema/blobs/mainline/–/configuration/schema.json][140]. You will be prompted with relevant error messages if validation failures are encountered when trying to start your stack. These must be addressed in order to be able to continue.\\nAnother important mention is that once you’ve started your stack with metadata overwrite enabled, you will be able to **edit the overwrite file on the fly**. The new changes will be picked by the upcoming requests to the metadata service, provided that they are schema-valid. If that is not the case, the last known valid version of the content will be served and the validation errors will be available in the logs of the EC2 metadata service container: `dockerlogs_stackName_.Ec2MetadataProxy`.\\nKeep in mind that even though you can edit the overwrite file while your stack is running, changes to values which are used by your application at start up will, naturally, require a restart.\\nFor further guidance, view a set of valid EC2 metadata overwrite files [from the RDEEC2MetadataSchema package][141].\\n## RDE doesn’t pick up changes to my packages/source code/Config file[¶][59]\\nMake sure that the [codeURI regionalizedTod][89] value points to the correct/desired workspace of your application, especially if you have multiple clones of the same workspace on your host.\\nNote\\nRelative `codeURI` paths are relative to the definition file/the root of the package containing the definition file.\\n## Starting CodeDeploy application fails during execution of the rewrite\\\\_apollo\\\\_shim.sh script[¶][60]\\nThe deployment of your CodeDeploy application fails with the following error:\\n\\n```\\n2020-03-05 02:10:24 [stderr]+ DEPLOYMENT_TYPE=EC2\\n2020-03-05 02:10:24 [stderr]++ curl --retry 3 -m3 -sS http://169.254.169.254/2016-09-02/meta-data/iam/security-credentials/\\n2020-03-05 02:10:24 [stderr]+ DEFAULT_ROLE=RDERole-InternalIdentity\\n2020-03-05 02:10:24 [stderr]++ curl --retry 3 -m3 -sS http://169.254.169.254/latest/dynamic/instance-identity/document\\n2020-03-05 02:10:24 [stderr]+ EC2_INSTANCE_IDENTITY_DOC='{\\n2020-03-05 02:10:24 [stderr] \\\"region\\\": \\\"us-east-1\\\"\\n2020-03-05 02:10:24 [stderr]}'\\n2020-03-05 02:10:24 [stderr]++ grep availabilityZone\\n2020-03-05 02:10:24 [stderr]++ sed 's/\\\\s*\\\"availabilityZone\\\"\\\\s*:\\\\s*\\\"\\\\(.*\\\\)\\\"\\\\s*,\\\\?\\\\s*$/\\\\1/g'\\n2020-03-05 02:10:24 [stderr]+++ curl --retry 3 -m3 -sS http://169.254.169.254/latest/dynamic/instance-identity/document\\n2020-03-05 02:10:24 [stderr]++ echo '{\\n2020-03-05 02:10:24 [stderr] \\\"region\\\": \\\"us-east-1\\\"\\n2020-03-05 02:10:24 [stderr]}'\\n2020-03-05 02:10:24 [stderr]+ EC2_AVAIL_ZONE=\\n\\n```\\nThe issue is caused by the change from [CR-19513613][142] which implies that the region is now retrieved from the instance identity document of the EC2 metadata. This is not backwards compatible to how people were overriding the region up until now.\\nThe fix implies specifying the availability zone in the instance identity document as described [here][143].\\n## Not authorized to perform can administer on Conduit managed dev accounts[¶][61]\\nSample error:\\n\\n```\\nfailed to start personal stack\\nDetails:\\n   failed to start development stack\\n   unable to create start jobs\\n   credential check failed\\n   devAccount check failed\\n   unexpected response from IIBS\\n   \\\"{\\\\\\\"message\\\\\\\":\\\\\\\"{ngo-principal=vyadavmm@MIDWAY.AMAZON.COM, http-remote-address=10.25.7.230,\\n   http-user-agent=Go-http-client/1.1, http-last-forwarded-address=10.25.7.230,\\n   http-actual-address=127.0.0.1, http-x-forwarded-for-addresses=10.25.7.230} not authorized.\\n   Message=Denied:\\\\\\\\nIdentity \\\\\\\\\\\\\\\"{ngo-principal=vyadavmm@MIDWAY.AMAZON.COM,\\n   http-remote-address=10.25.7.230, http-user-agent=Go-http-client/1.1,\\n   http-last-forwarded-address=10.25.7.230, http-actual-address=127.0.0.1,\\n   http-x-forwarded-for-addresses=10.25.7.230}\\\\\\\\\\\\\\\" not authorized through BrassService to perform\\n   \\\\\\\\\\\\\\\"can administer\\\\\\\\\\\\\\\" on AWS account {776825726644,aws,ADS-ATR-DEV}\\\\\\\\nSWAG (Burner) threw an\\n   exception. The account may be closed or invalid. {776825726644}\\\\\\\\n\\\\\\\"}\\\\n\\\"\\n\\n```\\nTo fix this problem, you need to go to [Bindles][144] and make sure that you have `canadminister` rights on the AWS account that your are trying to use.\\n## Additional topics[¶][62]\\n* [Troubleshooting RDE errors][145]\\nNext page:[Troubleshooting RDE errors][145]Previous page:[Definition file placeholders][146]\\n[1]: ../rde_logo_72px.png\\n[2]: #troubleshooting-rde-issues\\n[3]: #access-denied-assumed-role-x-is-not-authorized-to-perform-sts-assumerole-on-resource-role-x\\n[4]: #container-id-execution-finished-with-non-zero-exit-code-1-failed-to-start-stack\\n[5]: #why-am-i-getting-pool-overlaps-with-other-one-on-this-address-space-error-when-running-the-rde-tutorial\\n[6]: #i-m-using-aaa-support-and-receive-aaa-workspace-registration-info-call-failed-loginresponsesentryexception-got-status-code-401-from-sso-login-handler\\n[7]: #my-self-signed-ssl-certificates-have-an-incorrect-root-authority-rdeca-what-gives\\n[8]: #my-stack-has-reached-an-inconsistent-state-and-i-am-unable-to-start-restart-it\\n[9]: #apollocmd-script-execution-fails-with-failed-with-exit-code-205-no-such-file-or-directory\\n[10]: #apollocmd-script-execution-fails-with-exiting-with-error-code-205-and-error-unable-to-execute-script-permission-denied\\n[11]: #coral-service-fails-to-start-com-amazon-coral-ping-checkodinstrategy-error-accessing-odin\\n[12]: #rde-def-create-fails-to-retrieve-version-set-information-could-not-get-permissions-information-for-version-set-group\\n[13]: #hex-coral-service-script-000increaseephemeralportrange-fails-on-application-startup-read-only-file-system-setting-key-net-ipv4-ip-local-port-range\\n[14]: #my-workspace-provisioning-step-fails\\n[15]: #lambda-deploy-step-fails-with-ignoring-function-name-as-no-api-event-sources-are-defined\\n[16]: #rde-has-issues-parsing-my-sam-template-file\\n[17]: #requests-to-cloudauth-backed-services-fail-with-access-denied-from-https-gateway-cloudauth-a2z-com-authorization-grant-response-type-assertion-response-failed-with-status-code-403\\n[18]: #docker-daemon-is-running-but-rde-can-t-connect-to-it\\n[19]: #i-just-can-t-get-docker-running\\n[20]: #deployment-fails-with-api-error-500-mounts-denied-no-context-set\\n[21]: #deployment-fails-for-container-applications-on-cloud-desktops-with-unknown-flag-chown\\n[22]: #why-are-my-packages-rebuilt-wasn-t-the-build-step-supposed-to-be-smart-and-rebuild-the-changes-only\\n[23]: #deployment-fails-with-can-t-exec-kinit-no-such-file-or-directory-at-apollo-env\\n[24]: #aaa-support-could-not-connect-to-unix-domain-socket-at-path-tmp-aaa-be-sock\\n[25]: #calls-to-odineverywhere-fail-with-501-not-implemented\\n[26]: #the-environment-variables-i-added-to-my-rde-apollo-application-definition-are-not-accessible-from-my-apollocmd-scripts\\n[27]: #my-apollo-startup-script-is-failing-with-this-error-read-only-file-system-setting-key\\n[28]: #getting-credential-errors-when-using-sqslocal-s3local-dynamodblocal\\n[29]: #cannot-find-cloud-resources-when-running-lambda-function\\n[30]: #sdo-engineers\\n[31]: #fetching-odin-materials-on-your-laptop\\n[32]: #workaround-for-aws-user-materials-created-before-1-august-2018\\n[33]: #aws-engineers\\n[34]: #ssl-handshake-fails-when-calling-cloud-auth-server-from-lambda-function\\n[35]: #application-build-deployments-fails-with-symlinkfarmbuilder-symlinkfarmconflictexception-symlink-conflict-exception\\n[36]: #applications-can-t-retrieve-odin-material-sets-var-odin-directory-doesn-t-exist-odin-everywhere-client-is-not-started\\n[37]: #lambda-transform-yml-no-such-file-or-directory\\n[38]: #unable-to-reach-ec2-metadata-service\\n[39]: #i-can-t-find-my-java-application-log-for-my-native-aws-api-gateway-lambda-application\\n[40]: #caught-exception-refusing-to-fork-exec-apollo-env-hextenantstartup-var-run-service-sh-binary-does-not-exist\\n[41]: #package-s-with-overridden-version-pointing-to-other-workspaces-are-not-deployed-into-the-application-container\\n[42]: #apollocmd-script-failing-with-line-some-line-number-some-command-command-not-found\\n[43]: #install-custom-packages-that-are-not-available-by-default\\n[44]: #rde-plugin-not-working-due-to-java-lang-illegalstateexception-failed-to-find-stack-name\\n[45]: #ntpstat-check-fails-unable-to-talk-to-ntp-daemon-is-it-running\\n[46]: #apollocmd-preactivateadmin-020createcachinglogsdirectory-failing-with-chown-invalid-user-builder-qlrm\\n[47]: #apollocmd-script-execution-fails-with-invalid-group\\n[48]: #apollocmd-preactivateadmin-202fetchporterbrazilclicredentials-failing\\n[49]: #failed-to-set-rlimit-for-open-files\\n[50]: #deployment-keeps-failing-with-oci-runtime-exec-failed\\n[51]: #apollo-deployment-fails-with-chown-cannot-dereference-apollo-var-env-apollo-env-output-logs-cacheoutd-log-no-such-file-or-directory\\n[52]: #deploying-a-aaa-application-on-laptop-fails-with-tar-this-does-not-look-like-a-tar-archive\\n[53]: #processes-inside-containers-getting-killed-kernel-logs-show-arp-cache-neighbor-table-overflow\\n[54]: #script-010setupmidwaycerts-failed-with-an-exit-status-of-1\\n[55]: #referencing-s3-buckets-using-the-virtual-hosted-style-in-s3local-fails\\n[56]: #aaa-requests-failing-with-exception-in-aaasecuritydaemon-couldn-t-find-signable-header-accept-encoding-in-list-of-required-signed-headers\\n[57]: #odinclient-odineverywhere-not-fetching-materials-cdorelay-jlbrelay-start-up-failing\\n[58]: #overwrite-the-values-returned-by-the-ec2-metadata-service-from-the-personal-stack-i-e-change-the-aws-account-region\\n[59]: #rde-doesn-t-pick-up-changes-to-my-packages-source-code-config-file\\n[60]: #starting-codedeploy-application-fails-during-execution-of-the-rewrite-apollo-shim-sh-script\\n[61]: #not-authorized-to-perform-can-administer-on-conduit-managed-dev-accounts\\n[62]: #additional-topics\\n[63]: https://aws.amazon.com/blogs/security/announcing-an-update-to-iam-role-trust-policy-behavior/\\n[64]: https://code.amazon.com/packages/ApolloShimSetup/commits/3de8874335a238d6cba9a6aabc7ab12127d8cc02\\n[65]: https://code.amazon.com/packages/OrpheusStackTool-RDE/commits/3f21081972ad8312b700fa96e7ce2c7359aa7e1a#apollo-shims/orpheus-stack-tool-shim.json\\n[66]: https://code.amazon.com/packages/GoAmzn-DeceneuCli/blobs/mainline/--/src/com/amazon/deceneu/ca/ca.go\\n[67]: https://code.amazon.com/packages/GoAmzn-DeceneuCli/blobs/mainline/--/src/com/amazon/deceneu/stack/app/endpoint/template.go\\n[68]: ../setting-up-rde/#setup-macos-docker-file-sharing\\n[69]: https://w.amazon.com/bin/view/Coral/Community/AmazonCoralHealthChecker\\n[70]: https://w.amazon.com/bin/view/OdinApolloMaterialChecker_Package_Setup\\n[71]: https://issues.amazon.com/issues/BrazilBX-1097\\n[72]: https://issues.amazon.com/issues/RDCT-878\\n[73]: ../modifying-apollocmd/#howto-remove-existing-apollocmd\\n[74]: https://code.amazon.com/packages/ProjectNimbusPromotionService/blobs/341bb4720d1e1117125aa1dbc1a6404c52fee030/--/definition.yaml#L56-L58\\n[75]: https://issues.amazon.com/issues/RDCT-1129\\n[76]: https://code.amazon.com/packages/RDE-DevWorkflowScripts\\n[77]: https://code.amazon.com/packages/RDESampleJavaLambdaApplication/blobs/9a3f1dbf76dfa51ee7ecadc7c28cde580789a499/--/configuration/sam/template.yml#L19\\n[78]: https://issues.amazon.com/issues/RDCT-1277\\n[79]: https://gateway.cloudauth.a2z.com/authorization_grant?response_type=assertion\\n[80]: https://builderhub.corp.amazon.com/blog/develop-cloudauth-enabled-applications-directly-on-your-laptops-using-rde/#cloudauthsigningregion\\n[81]: https://sage.amazon.dev/questions/461939\\n[82]: https://w.amazon.com/bin/view/C2S/CloudAuth/Troubleshooting\\n[83]: https://sage.amazon.dev/questions/555194\\n[84]: https://issues.amazon.com/issues/CloudAuth-3005\\n[85]: ../troubleshooting-errors/#error-11\\n[86]: https://issues.amazon.com/issues/RDCT-2766\\n[87]: https://issues.amazon.com/issues/RDCT-2775\\n[88]: https://sage.amazon.dev/questions/785306\\n[89]: ../using-workflows/#step-types\\n[90]: https://issues.amazon.com/issues/RDCT-1664\\n[91]: https://issues.amazon.com/issues/RDCT-1666\\n[92]: ../troubleshooting-errors/#error-22\\n[93]: https://w.amazon.com/bin/view/Apollo/Tools/BinEnv#A_note_about_the_user-defined_.28env.d.29_shell_scripts.2C_from_haberman.40\\n[94]: https://code.amazon.com/packages/DeceneuDJSDemo/blobs/6d6b2038e5e5958b7b3b02e294b115f1703cc7c0/--/djs-service/djs-service-init.sh#L10-L12\\n[95]: https://sage.amazon.dev/questions/547751\\n[96]: https://docs.docker.com/engine/reference/commandline/run/#configure-namespaced-kernel-parameters-sysctls-at-runtime\\n[97]: ../modifying-apollocmd/#howto-modify-commands-that-dont-container\\n[98]: ../mocking-aws-locally/#aws-local-troubleshooting\\n[99]: https://w.amazon.com/bin/view/Conduit_Service/#For_Customers\\n[100]: https://w.amazon.com/bin/view/AssetTrustSystems/Conduit/ManagingAccessToOdinMaterialSets/\\n[101]: https://w.amazon.com/bin/view/RDE/Features/Credentials/Odin/\\n[102]: https://w.amazon.com/bin/view/AWSAuth/Projects/HOSMEverywhere\\n[103]: https://code.amazon.com/packages/CdskBackendCommonLib/blobs/306e4f54724b7a082325f007d47735117c86f648/--/src/com/amazon/cdsk/common/credentials/ProvisioningWorkerAWSCredentialsProvider.java#L27-L31\\n[104]: https://sage.amazon.dev/questions/410007\\n[105]: https://sage.amazon.dev/questions/515681\\n[106]: https://sage.amazon.dev/questions/517464\\n[107]: https://code.amazon.com/packages/CdskBackendCommonLib/blobs/306e4f54724b7a082325f007d47735117c86f648/--/src/com/amazon/cdsk/common/credentials/ProvisioningWorkerAWSCredentialsProvider.java#L27\\n[108]: ../_images/isengard_account_type.png\\n[109]: ../_images/isengard_admin_role_blur.png\\n[110]: https://sage.amazon.dev/questions/379708\\n[111]: https://code.amazon.com/packages/DeceneuCloudAuthServiceHydraTests/blobs/662182aa1436005be7c566c38544d74a34373c35/--/configuration/aws_lambda/lambda-transform.yml#L4\\n[112]: https://code.amazon.com/packages/DeceneuCloudAuthServiceHydraTests/src/com/amazon/DeceneuInternalSampleService/CloudAuthTestCases.java <DeceneuCloudAuthServiceHydraTests/blobs/662182aa1436005be7c566c38544d74a34373c35/--/src/com/amazon/DeceneuInternalSampleService/CloudAuthTestCases.java#L26,L27\\n[113]: https://issues.amazon.com/issues/RDCT-1783\\n[114]: https://w.amazon.com/bin/view/BrazilBuildSystem/Concepts/RemoveDependencies\\n[115]: https://sage.amazon.dev/questions/410055\\n[116]: https://sage.amazon.dev/questions/286727\\n[117]: https://sage.amazon.dev/questions/304995\\n[118]: https://sage.amazon.dev/questions/563707\\n[119]: https://issues.amazon.com/issues/RDCT-1721\\n[120]: https://w.amazon.com/bin/view/Odin/OdinEverywhere/NativeAWS/Onboarding\\n[121]: ../definition-file/#container-build\\n[122]: ../troubleshooting-errors/#error-29\\n[123]: https://docs.aws.amazon.com/lambda/latest/dg/java-logging.html#java-logging-log4j2\\n[124]: https://code.amazon.com/packages/HEXTenantStartup\\n[125]: https://code.amazon.com/packages/RDE-CorvegaService/blobs/mainline/--/definition.yaml\\n[126]: https://docs.hub.amazon.dev/docs/brazil/cli-guide/apollo-overrides.html\\n[127]: https://issues.amazon.com/issues/RDCT-2111\\n[128]: https://issues.amazon.com/issues/RDCT-2132\\n[129]: https://issues.amazon.com/issues/RDCT-2174\\n[130]: https://code.amazon.com/packages/ApolloShimOpConfigHelpers\\n[131]: https://issues.amazon.com/issues/RDCT-2768\\n[132]: https://issues.amazon.com/issues/RDCT-2483\\n[133]: https://w.amazon.com/bin/view/AHI\\n[134]: https://issues.amazon.com/issues/RDCT-1467\\n[135]: https://issues.amazon.com/issues/RDCT-2841\\n[136]: https://github.com/minio/minio/tree/master/docs/config#domain\\n[137]: https://www.roe.ch/SSLsplit\\n[138]: https://issues.amazon.com/issues/RDCT-2879\\n[139]: https://code.amazon.com/packages/GoAmzn-DeceneuEC2MetadataProxy/blobs/mainline/--/src/com/amazon/deceneu/ec2proxy/metadata/template.go\\n[140]: https://code.amazon.com/packages/EC2 metadata schema RDEEC2MetadataSchema/blobs/mainline/--/configuration/schema.json\\n[141]: https://code.amazon.com/packages/RDEEC2MetadataSchema/trees/mainline/--/tst/valid\\n[142]: https://code.amazon.com/reviews/CR-19513613\\n[143]: #use-ec2-metadata-service\\n[144]: https://bindles.amazon.com\\n[145]: ../troubleshooting-errors/\\n[146]: ../placeholders/\"}}}"}]}]},"uuid":"7289b1c7-e4db-4e21-bfed-cc6b1bdac6ec","timestamp":"2025-07-28T22:53:05.176Z","toolUseResult":[{"type":"text","text":"{\"content\":{\"status\":\"success\",\"relativeHrefsDescription\":\"Relative hrefs represent related documents that can be accessed by evaluating the relative path with respect to the input URL. Links with fewer parent directory traversals (..) are more closely related to the current document.\",\"processedContent\":{\"relativeHrefs\":[\"../_static/pygments.css?v=b86133f3\",\"../_static/builderhubdocs.css?v=0ff2b2b2\",\"../_static/pygments_dark.css?v=f98d607c\",\"../genindex/\",\"../search/\",\"../troubleshooting-errors/\",\"../placeholders/\",\"../../../../btdocs_res/builderhub.min.css\",\"../../../../docs/dev-setup/index.html\",\"../../../../docs/onboarding/index.html\",\"../../../../docs/learning/index.html\",\"../../../../docs/software-health/index.html\",\"../../../../docs/golden-path/index.html\",\"../../../../docs/gen-ai-dev/index.html\",\"../../../../docs/measuring-sbx/index.html\",\"../../../../docs/app-types/index.html\",\"../../../../docs/event-consumers/index.html\",\"../../../../docs/machine-learning/index.html\",\"../../../../docs/mobile/index.html\",\"../../../../docs/web-services/index.html\",\"../../../../docs/workflow-orchestration/index.html\",\"../../../../docs/languages/index.html\",\"../../../../docs/languages/java/index.html\",\"../../../../docs/languages/python/index.html\",\"../../../../docs/languages/rust/index.html\",\"../../../../docs/languages/typescript/index.html\",\"../../../../docs/app-features/index.html\",\"../../../../docs/gen-ai/index.html\",\"../../../../docs/i18n/index.html\",\"../../../../docs/containers/index.html\",\"../../../../docs/native-aws/developer-guide/index.html\",\"../../../../docs/open-source/index.html\",\"../../../../docs/tools/index.html\",\"../../../../docs/qdeveloper/index.html\",\"../../../../docs/qdeveloper/user-guide/index.html\",\"../../../../docs/apollo/index.html\",\"../../../../docs/apollo/user-guide/index.html\",\"../../../../docs/apollo/api-guide/index.html\",\"../../../../docs/apollo/cdk-guide/index.html\",\"../../../../docs/apollo/cli-guide/index.html\",\"../../../../docs/axe/index.html\",\"../../../../docs/axe/user-guide/index.html\",\"../../../../docs/barium/index.html\",\"../../../../docs/bedrock/index.html\",\"../../../../docs/bedrock/user-guide/index.html\",\"../../../../docs/bemol/index.html\",\"../../../../docs/black-caiman/index.html\",\"../../../../docs/black-caiman/user-guide/index.html\",\"../../../../docs/brazil/index.html\",\"../../../../docs/brazil/user-guide/index.html\",\"../../../../docs/brazil/cli-guide/index.html\",\"../../../../docs/brazil/api-guide/index.html\",\"../../../../docs/brazil/peru-java-quickstart/index.html\",\"../../../../docs/brazil/peru-user-guide/index.html\",\"../../../../docs/brazil/peru-migration-guide/index.html\",\"../../../../docs/builderhub/index.html\",\"../../../../docs/builderhub/user-guide/index.html\",\"../../../../docs/create/cli-guide/index.html\",\"../../../../docs/bars/index.html\",\"../../../../docs/bars/api-guide/index.html\",\"../../../../docs/bats/index.html\",\"../../../../docs/bats/user-guide/index.html\",\"../../../../docs/bats/cli-guide/index.html\",\"../../../../docs/builder-mcp/index.html\",\"../../../../docs/builder-mcp/user-guide/index.html\",\"../../../../docs/builder-toolbox/index.html\",\"../../../../docs/builder-toolbox/user-guide/index.html\",\"../../../../docs/cd-signer/index.html\",\"../../../../docs/cd-signer/user-guide/index.html\",\"../../../../docs/cd-signer/api-guide/index.html\",\"../../../../docs/change-guardian/index.html\",\"../../../../docs/change-guardian/user-guide/index.html\",\"../../../../docs/cline/index.html\",\"../../../../docs/cline/user-guide/index.html\",\"../../../../docs/cloudcover/index.html\",\"../../../../docs/cloudcover/user-guide/index.html\",\"../../../../docs/cloud-desktop/index.html\",\"../../../../docs/cloud-desktop/user-guide/index.html\",\"../../../../docs/codeartifact/index.html\",\"../../../../docs/codeartifact/user-guide/index.html\",\"../../../../docs/code-browser/index.html\",\"../../../../docs/code-browser/user-guide/index.html\",\"../../../../docs/code-browser/api-guide/index.html\",\"../../../../docs/coral/index.html\",\"../../../../docs/coral/user-guide/index.html\",\"../../../../docs/coverlay/index.html\",\"../../../../docs/coverlay/user-guide/index.html\",\"../../../../docs/crux/index.html\",\"../../../../docs/crux/user-guide/index.html\",\"../../../../docs/crux/cli-guide/index.html\",\"../../../../docs/crux/api-guide/index.html\",\"../../../../docs/dogma/index.html\",\"../../../../docs/dogma/user-guide/index.html\",\"../../../../docs/dogma/cli-guide/index.html\",\"../../../../docs/dogma/api-guide/index.html\",\"../../../../docs/electric-company/index.html\",\"../../../../docs/electric-company/user-guide/index.html\",\"../../../../docs/gated-garden/index.html\",\"../../../../docs/gated-garden/v1/api-guide/index.html\",\"../../../../docs/gated-garden/v2/api-guide/index.html\",\"../../../../docs/gitfarm/index.html\",\"../../../../docs/gitfarm/user-guide/index.html\",\"../../../../docs/gitfarm/api-guide/index.html\",\"../../../../docs/gordian-knot/index.html\",\"../../../../docs/hydra/index.html\",\"../../../../docs/hydra/user-guide/index.html\",\"../../../../docs/hydra/cli-guide/index.html\",\"../../../../docs/hydra/api-guide/index.html\",\"../../../../docs/ironhide/index.html\",\"../../../../docs/ironhide/cli-guide/index.html\",\"../../../../docs/ironhide/transform-creator-guide/index.html\",\"../../../../docs/kiro/index.html\",\"../../../../docs/kiro/user-guide/index.html\",\"../../../../docs/lpt-synthesis/index.html\",\"../../../../docs/lpt-synthesis/user-guide/index.html\",\"../../../../docs/mrc/index.html\",\"../../../../docs/mrc/user-guide/index.html\",\"../../../../docs/personal-stacks/index.html\",\"../../../../docs/personal-stacks/user-guide/index.html\",\"../../../../docs/personal-stacks/cli-guide/index.html\",\"../../../../docs/pipelines/index.html\",\"../../../../docs/pipelines/user-guide/index.html\",\"../../../../docs/pipelines/cli-guide/index.html\",\"../../../../docs/pipelines/api-guide/index.html\",\"../../../../docs/pipelines/cdk-guide/index.html\",\"../../../../docs/quilt/index.html\",\"../../../../docs/quilt/user-guide/index.html\",\"../../../../docs/rde/index.html\",\"../../../../docs/rde/user-guide/index.html\",\"../getting-started/\",\"../setting-up-rde/\",\"../getting-application-up-and-running/\",\"../making-code-changes/\",\"../viewing-logs/\",\"../testing-and-debugging/\",\"../apollo-shim/\",\"../modifying-apollocmd/\",\"../howto/\",\"../naws-applications/\",\"../ec2-codedeploy/\",\"../ecs-containers/\",\"../running-integration-tests/\",\"../tod/\",\"../hydra/\",\"../consumed-envs-and-sidecars/\",\"../aws-ssl-proxy/\",\"../jlb-relay/\",\"../cdo-relay/\",\"../using-workflows/\",\"../basic-workflows/\",\"../adding-custom-shell-commands/\",\"../automating-cr/\",\"../working-with-credentials/\",\"../turtle/\",\"../aaa/\",\"../odin/\",\"../sentry/\",\"../aws-credentials/\",\"../hot-deploy-interpreted-languages/\",\"../running-dependencies-without-rebuilding/\",\"../concepts/\",\"../how-it-works/\",\"../reference/\",\"../commands/\",\"../commands-bugreport/\",\"../commands-definition/\",\"../commands-environment/\",\"../commands-help/\",\"../commands-stack/\",\"../commands-workflow/\",\"../definition-file/\",\"../placeholders/\",\"../troubleshooting-errors/\",\"../deprecated-features/\",\"../mocking-aws-locally/\",\"../infrastructure/\",\"../cloud-dev-proxy/\",\"../../../../docs/region-build-automation/index.html\",\"../../../../docs/region-build-automation/region-build-user-guide/index.html\",\"../../../../docs/region-build-automation/epim-user-guide/index.html\",\"../../../../docs/region-build-automation/chain-reaction-user-guide/index.html\",\"../../../../docs/smithy/index.html\",\"../../../../docs/smithy/user-guide/index.html\",\"../../../../docs/sas/index.html\",\"../../../../docs/sas/user-guide/index.html\",\"../../../../docs/sas/api-guide/index.html\",\"../../../../docs/tim/index.html\",\"../../../../docs/tim/user-guide/index.html\",\"../../../../docs/tod/index.html\",\"../../../../docs/tod/user-guide/index.html\",\"../../../../docs/tps-generator/index.html\",\"../../../../docs/tps-generator/user-guide/index.html\",\"../../../../docs/transmogrifier/index.html\",\"../../../../docs/transmogrifier/user-guide/index.html\",\"../../../../docs/transmogrifier/api-guide/index.html\",\"../../../../docs/trebuchet/index.html\",\"../../../../docs/universal-constructs/index.html\",\"../../../../docs/universal-constructs/user-guide/index.html\",\"../../../../docs/viceroy/index.html\",\"../../../../docs/wasabi/index.html\",\"../../../../docs/wasabi/user-guide/index.html\",\"../../../../docs/tools/products-wac/index.html\",\"../../../../docs/support/index.html\",\"../setting-up-rde/#setup-macos-docker-file-sharing\",\"../setting-up-rde/#setup-macos-docker-file-sharing\",\"../modifying-apollocmd/#howto-remove-existing-apollocmd\",\"../troubleshooting-errors/#error-11\",\"../using-workflows/#step-types\",\"../troubleshooting-errors/#error-22\",\"../modifying-apollocmd/#howto-remove-existing-apollocmd\",\"../modifying-apollocmd/#howto-modify-commands-that-dont-container\",\"../mocking-aws-locally/#aws-local-troubleshooting\",\"../definition-file/#container-build\",\"../troubleshooting-errors/#error-29\",\"../modifying-apollocmd/#howto-remove-existing-apollocmd\",\"../using-workflows/#step-types\",\"../troubleshooting-errors/\",\"../troubleshooting-errors/\",\"../placeholders/\"],\"mainContent\":\"![][1]# Troubleshooting RDE issues\\n# Troubleshooting RDE issues[¶][2]\\nNote\\nWhen troubleshooting RDE issues, make sure to take a look at the run logs and html reports associated with the RDE commands that are printed at the console as they contain all our debug statements. Alternatively, you can run the RDE commands using the `-v`/`--verbose` flag.\\n* [Access Denied: assumed-role/X is not authorized to perform sts:AssumeRole on resource role/X][3]\\n* [Container ID execution finished with non zero exit code 1 ; failed to start stack][4]\\n* [Why am I getting “Pool overlaps with other one on this address space” error when running the RDE Tutorial?][5]\\n* [I’m using AAA support and receive “AAA Workspace Registration:\\\\[INFO\\\\]Call failed: LoginResponseSentryException\\\\(‘Got status code: 401 from SSO login handler:”][6]\\n* [My self-signed SSL certificates have an incorrect root authority \\\\(rdeca\\\\), what gives?][7]\\n* [My stack has reached an inconsistent state and I am unable to start/restart it][8]\\n* [ApolloCmd script execution fails with “Failed with exit code 205: No such file or directory”][9]\\n* [ApolloCmd script execution fails with “exiting with error code 205” and “ERROR: Unable to execute SCRIPT: Permission denied”][10]\\n* [Coral service fails to start: “com.amazon.coral.ping.CheckOdinStrategy: Error accessing Odin”][11]\\n* [“rde def create” fails to retrieve version set information - “Could not get permissions information for version set group”][12]\\n* [HEX Coral Service script 000IncreaseEphemeralPortRange fails on application startup: “Read-only file system” setting key “net.ipv4.ip\\\\_local\\\\_port\\\\_range”][13]\\n* [My workspace provisioning step fails][14]\\n* [Lambda deploy step fails with “Ignoring function\\\\_name as no API event sources are defined”][15]\\n* [RDE has issues parsing my SAM template file][16]\\n* [Requests to CloudAuth backed services fail with: Access denied from: https://gateway.cloudauth.a2z.com/authorization\\\\_grant?response\\\\_type=assertion Response failed with status code: 403][17]\\n* [Docker daemon is running but RDE can’t connect to it][18]\\n* [I just can’t get Docker running][19]\\n* [Deployment fails with “API error \\\\(500\\\\) Mounts denied: no context set”][20]\\n* [Deployment fails for container applications on Cloud Desktops with “Unknown flag: chown”][21]\\n* [Why are my packages rebuilt, wasn’t the build step supposed to be smart and rebuild the changes only?][22]\\n* [Deployment fails with “Can’t exec “kinit”: No such file or directory at /apollo/env/…”][23]\\n* [AAA support: Could not connect to Unix domain socket at path ‘/tmp/aaa/be.sock’][24]\\n* [Calls to OdinEverywhere fail with “501 Not Implemented”][25]\\n* [The environment variables I added to my RDE Apollo Application definition are not accessible from my ApolloCmd scripts][26]\\n* [My Apollo startup script is failing with this error - “Read-only file system setting key …”][27]\\n* [Getting credential errors when using SQSLocal/S3Local/DynamoDBLocal][28]\\n* [Cannot find Cloud resources when running Lambda function][29]\\n * [SDO engineers][30]\\n  * [Fetching Odin materials on your laptop][31]\\n  * [Workaround for AWS User materials created before 1 August 2018][32]\\n\\n * [AWS engineers][33]\\n\\n* [SSL handshake fails when calling Cloud Auth server from Lambda function][34]\\n* [Application build/deployments fails with “…SymlinkFarmBuilder$SymlinkFarmConflictException: Symlink conflict exception…”][35]\\n* [Applications can’t retrieve Odin material sets; /var/odin directory doesn’t exist; Odin Everywhere Client is not started][36]\\n* [lambda-transform.yml no such file or directory][37]\\n* [Unable to reach EC2 metadata service][38]\\n* [I can’t find my Java application log for my Native AWS API Gateway / Lambda application][39]\\n* [Caught exception refusing to fork/exec /apollo/env/HEXTenantStartup/var/run-service.sh, binary does not exist!][40]\\n* [Package\\\\(s\\\\) with overridden version pointing to other workspaces are not deployed into the application container][41]\\n* [ApolloCmd script failing with line \\\\[some line number\\\\]: \\\\[some command\\\\]: command not found][42]\\n * [Install custom packages that are not available by default][43]\\n\\n* [RDE plugin not working due to java.lang.IllegalStateException: failed to find stack name][44]\\n* [ntpstat check fails: Unable to talk to NTP daemon. Is it running?][45]\\n* [ApolloCmd/PreactivateAdmin/020CreateCachingLogsDirectory failing with chown: invalid user: ‘builder:qlrm’][46]\\n* [ApolloCmd script execution fails with invalid group][47]\\n* [ApolloCmd/PreactivateAdmin/202FetchPorterBrazilCLICredentials failing][48]\\n* [failed to set rlimit for open files][49]\\n* [Deployment keeps failing with OCI runtime exec failed][50]\\n* [Apollo deployment fails with chown: cannot dereference ‘/apollo/var/env/APOLLO\\\\_ENV/output/logs/cacheoutd.log’: No such file or directory][51]\\n* [Deploying a AAA application on laptop fails with ‘tar: This does not look like a tar archive’][52]\\n* [Processes inside containers getting killed - kernel logs show arp\\\\_cache: neighbor table overflow!][53]\\n* [Script 010SetupMidwayCerts failed with an exit status of 1][54]\\n* [Referencing S3 buckets using the virtual-hosted style in S3Local fails][55]\\n* [AAA requests failing with Exception in AAASecurityDaemon: Couldn’t find signable header: ‘Accept-Encoding’ in list of required signed headers][56]\\n* [OdinClient \\\\(OdinEverywhere\\\\) not fetching materials / CDORelay / JLBRelay start-up failing][57]\\n * [Overwrite the values returned by the EC2 metadata service from the Personal Stack \\\\(i.e. change the AWS account region\\\\)][58]\\n\\n* [RDE doesn’t pick up changes to my packages/source code/Config file][59]\\n* [Starting CodeDeploy application fails during execution of the rewrite\\\\_apollo\\\\_shim.sh script][60]\\n* [Not authorized to perform can administer on Conduit managed dev accounts][61]\\n* [Additional topics][62]\\nHere are some issues that you may encounter while working with RDE, along with their potential causes/solutions.\\n## Access Denied: assumed-role/X is not authorized to perform sts:AssumeRole on resource role/X[¶][3]\\nIAM has made a change to the behavior of role trust policies.\\nNote\\nAWS Identity and Access Management (IAM) is changing an aspect of how role trust policy evaluation behaves when a role assumes itself. Previously, roles implicitly trusted themselves from a role trust policy perspective if they had identity-based permissions to assume themselves. After receiving and considering feedback from customers on this topic, AWS is changing role assumption behavior to always require self-referential role trust policy grants.\\nTo fix this, you’ll need to grant the role that RDE uses permissions to assume itself.\\n[See the blog post][63] for more information.\\n## Container ID execution finished with non zero exit code 1 ; failed to start stack[¶][4]\\n\\n```\\n[RDE-E-0007] Container 0941fb9eb83a933725b0a3c480582f607e23868141d1694e0c1e83efb75abf18 execution\\n   finished with non zero exit code 1\\n[RDE-E-0007] failed to start stack \\\"<stack>\\\": failed to start 1 application(s)\\n\\n```\\nIf this occurs, try to get into the stack and check the logs! Execute:\\n\\n```\\nrde stack exec _stack_ bash\\n```\\nthen look at the logs in the ~/logs directory! There should be some info in there\\nSpecific errors from the logs:\\n\\n```\\nFound an existing CodeDeploy OpConfig set in the apollo-shim.json, which is not allowed\\n\\n```\\nThis error may start popping up after you merge the latest ApolloShim 2.0 version which adds deployment group / deployment id info into your OpConfig values ([commit here][64]).\\nTo fix this, do as the error message says and add the following to your `ApolloShimURI` file, specified in `definition.json`:\\n\\n```\\n\\\"noCodeDeployOpConfig\\\": true\\n\\n```\\nTo see an example commit that fixes this, view [this commit][65].\\n## Why am I getting “Pool overlaps with other one on this address space” error when running the RDE Tutorial?[¶][5]\\nIf you’re doing the RDE turorial and you’ve finished the setup and want to start the stack using the **rde wflow run** command and you are encountering the following error:\\n\\n```\\nError: API error (500): Pool overlaps with other one on this address space\\n\\n```\\nYou will need to update `/etc/sysconfig/docker` and set:\\n\\n```\\n--bip=240.10.0.1/**24** --fixed-cidr=240.10.0.0/**24**\\n```\\nas opposed to:\\n\\n```\\n--bip=240.10.0.1/**16** --fixed-cidr=240.10.0.0/**16**\\n```\\nwhich is the default Docker setup\\n## I’m using AAA support and receive “AAA Workspace Registration:\\\\[INFO\\\\]Call failed: LoginResponseSentryException\\\\(‘Got status code: 401 from SSO login handler:”[¶][6]\\nMake sure you have a valid Kerberos ticket by running:\\n\\n```\\nklist\\n\\n```\\nThe output should contain something like:\\n\\n```\\nTicket cache: FILE:/tmp/krb5cc_XXXX\\n\\n```\\nIf it does not, then run:\\n\\n```\\nKRB5CCNAME=FILE:/tmp/krb5cc_$(id -u) kdestroy && kinit && klist\\n\\n```\\nIf your ticket cache name is suffixed with an additional set of characters similar to `/tmp/krb5cc__user_id__w2zQK92pbB` the above will not work. Instead, run these commands in order:\\n\\n```\\nkdestroy -c /tmp/krb5cc_<user_id>_w2zQK92pbB\\nKRB5CCNAME=FILE:/tmp/krb5cc_$(id -u)\\nkinit\\n\\n```\\nIf you encounter bad format errors, then manually remove the cache:\\n\\n```\\nsudo rm -rf /tmp/krb5cc_{user_id}_w2zQK92pbB\\n\\n```\\n## My self-signed SSL certificates have an incorrect root authority \\\\(rdeca\\\\), what gives?[¶][7]\\nIn order for the RDE container network to support HTTPS, [RDE sets up their own self-signed certificates][66] and then [uses sslsplit in Docker containers that are routing traffic to apply that root certificate authority][67] when endpoints are set up with https.\\nIf you use an Amazon signed certificate in your container, then you need to set the protocol to _http_, which in fact is just TCP traffic that flows through unmolested by RDE.\\nIf you use something like JLBRelay or any other technology to terminate your SSL in your container, then set it to _http_ and let the traffic flow through. Using this setup allows HTTPS traffic to correctly terminate in the container using redfort internally-signed certificates.\\n## My stack has reached an inconsistent state and I am unable to start/restart it[¶][8]\\nThis manifests itself as the following error (or similar):\\n\\n```\\nfailed to restart development stack: failed to start development stack: failed to create\\ncontainer: container already exists; failed to create container: container already exists;\\n\\n```\\nTry running the following command and then start your stack again:\\n\\n```\\ndocker rm -f $(docker ps -a -q)\\n\\n```\\nWarning\\nThis command will remove all Docker containers from your host!\\n## ApolloCmd script execution fails with “Failed with exit code 205: No such file or directory”[¶][9]\\nUsually this happens because RDE cannot find the right path to your brazil package cache. Make sure you followed [Install and configure Finch for MacOS][68] if you are running on macOS.\\n## ApolloCmd script execution fails with “exiting with error code 205” and “ERROR: Unable to execute SCRIPT: Permission denied”[¶][10]\\nUsually this happens because the runas user does not have access to execute scripts in the Brazil package cache. Please make sure your `brazil-pkg-cache` directory has permissions that allow the `runas` user to access and execute the files. This may occur because RDE uses the brazil-pkg-cache on your laptop or dev desktop.\\nFor macOS, if you [changed file sharing][68] for Docker, you should make it default or set it correctly; incorrect file sharing settings can lead to this error.\\n## Coral service fails to start: “com.amazon.coral.ping.CheckOdinStrategy: Error accessing Odin”[¶][11]\\nRDE does not support [the AmazonCoralHealthChecker package][69], which is currently being deprecated.\\nMigrate to [the OdinApolloMaterialChecker][70] package if possible.\\n## “rde def create” fails to retrieve version set information - “Could not get permissions information for version set group”[¶][12]\\nThis happens if your version set permissions are managed by Bindles and you use Brazil CLI 1.0. To fix this, upgrade to Brazil CLI 2.0. For more context, please see [BrazilBX-1097][71]\\n## HEX Coral Service script 000IncreaseEphemeralPortRange fails on application startup: “Read-only file system” setting key “net.ipv4.ip\\\\_local\\\\_port\\\\_range”[¶][13]\\n* Initial report: [RDCT-878][72]\\nDocker does not support changing `sysctls` inside of a container that also modify the host system. However, this specific setting that the script tries to modify is only needed if your app is opening lots of outgoing network connections. Even if you’re not changing it, this won’t have an impact on local testing scenarios, and would be more valuable for large scale load testing scenarios on actual hosts.\\nThe solution is to remove the `000IncreaseEphemeralPortRange` script from the apollo activation scripts by using a custom RDE mount point as described in [Removing an existing ApolloCmd script][73] (and [done here][74]).\\n## My workspace provisioning step fails[¶][14]\\n* Example: [RDCT-1129][75]\\nWhen referencing resources such as scripts from [RDE-DevWorkflowScripts][76], you also need to add it to the `Config` file of your RDE definition package:\\n\\n```\\ndependencies = {\\n    1.0 = {\\n        RDE-DevWorkflowScripts = 1.0;\\n    };\\n};\\n\\n```\\n## Lambda deploy step fails with “Ignoring function\\\\_name as no API event sources are defined”[¶][15]\\nThis error occurs when there are no event sources added to your lambda function in the sam template file. Be sure to add events to your lambda function. See [this example][77] for details.\\n## RDE has issues parsing my SAM template file[¶][16]\\n* Example: [RDCT-1277][78]\\nUnfortunately, the current SAM Local version incorporated in RDE doesn’t fully support all potential formats. I.e. in the sample issues posted above, you can see that global values are not supported, and that SAM is not able to parse numeric values. You can try to work around the issues by following the suggestions in the SIM(s), and if you’re unable to to do so, please feel free to cut us an issue so we can try and investigate further.\\n## Requests to CloudAuth backed services fail with: Access denied from: [https://gateway.cloudauth.a2z.com/authorization\\\\_grant?response\\\\_type=assertion][79] Response failed with status code: 403[¶][17]\\nDue to how how CloudAuth works the region set to CloudAuth should match to the region you’re physically running your RDE stack. More details can be found in the [Builder Tools blog][80] and this [sage question][81]. You can also find more details in the [CloudAuth troubleshooting wiki][82].\\nOther references\\n* [Access denied for CloudAuthServer due to some region mismatch][81]\\n* [AccessDeniedException with RDE + CloudAuth + Coral][83]\\n* [CloudAuth signing region is not configurable \\\\(i.e. depends on DNS resolution / proximity\\\\)][84]\\n## Docker daemon is running but RDE can’t connect to it[¶][18]\\nThis can manifest itself with the following error:\\n\\n```\\nCouldn't get docker client: Get http://unix.sock/_ping: dial unix /var/run/docker.sock: connect:\\nno such file or directory\\n\\n```\\nIf you’ve installed Docker using the recommended `amazon-docker-setup` package then most likely you will need to reset the value of your `DOCKER_HOST` to `tcp://127.0.0.1:2376`.\\nYou should also add the `-H=unix:///var/run/docker.sock` value (alongside `-H=tcp://127.0.0.1:2376`) to your `/etc/sysconfig/docker` options if missing to have the complete setup.\\n## I just can’t get Docker running[¶][19]\\nSee [Error 11: Docker is not responding][85] to troubleshoot Docker.\\n## Deployment fails with “API error \\\\(500\\\\) Mounts denied: no context set”[¶][20]\\nTry restarting Docker, and then deploy your stack again. See [RDCT-2766][86] for more information.\\n## Deployment fails for container applications on Cloud Desktops with “Unknown flag: chown”[¶][21]\\nThis is caused when the Docker is too old and does not have support for `COPY`’s `chown` flag. For more information, see [RDCT-2775][87] and [Sage-785306][88].\\nNote\\nSupport for the `chown` flag has been added in Docker version 17.09.\\n## Why are my packages rebuilt, wasn’t the build step supposed to be smart and rebuild the changes only?[¶][22]\\nRDE is supposed to rebuild _only the changed packages_ (unless you use [the force build][89]). However you may still experience redundant builds.\\nRDE relies on **git** to detect code changes. It tracks all your package files but ignores the one that are ignored by **git**. So if you have a misconfigured `.gitignore`, for instance your git is aware of intellij artifacts (verifiable by running **git status**), then the package will be rebuilt next time you run the build step.\\nTo solve this problem, you should add the unwanted artifacts to the `.gitignore` file at the root of your RDE package. This way, your teammates will also benefit from your change.\\nThe most common artifacts that should be ignored are:\\n\\n```\\n*.iml\\n*.idea/*\\n/build\\n\\n```\\n## Deployment fails with “Can’t exec “kinit”: No such file or directory at /apollo/env/…”[¶][23]\\nYou need to add Kerberos as a runtime dependency to your application in order to have Kerberos work within RDE.\\nThe reason for that is that it is not part of our images as it breaks some other libraries needed at startup.\\n## AAA support: Could not connect to Unix domain socket at path ‘/tmp/aaa/be.sock’[¶][24]\\nThis error is commonly caused by the fact that the code that is trying to access the AAA socket file doesn’t have sufficient permissions to do so.\\nExamples:\\n* [RDCT-1664][90]\\n* [RDCT-1666][91]\\nThese customers were trying to execute scripts that required access to the AAA sock via the RDE stack exec command/step. The stack exec commands are executed using the `deceneu` user which doesn’t have permissions to the AAA socket file. To fix the problem, the customers used `sudo-u_username_script.sh` to execute the scripts successfully.\\n## Calls to OdinEverywhere fail with “501 Not Implemented”[¶][25]\\nOlder Odin clients are currently not supported by our OdinEverywhere proxy. For more information, see [Error 22: Unsupported Odin client][92].\\n## The environment variables I added to my RDE Apollo Application definition are not accessible from my ApolloCmd scripts[¶][26]\\nApollo cleans the environment before it executes your scripts. This is the same behavior that you will encounter on actual hosts, so we _don’t_ recommend that you try to work around this—you’ll end up with a setup that only works locally and not on your hosts.\\nHowever, if this is the behavior that you’re trying to achieve, you can do it by [creating an etc/env.d file][93] that is sourced by your application. [Here is an example][94] of how to create the file.\\n## My Apollo startup script is failing with this error - “Read-only file system setting key …”[¶][27]\\nExample: [Sage-547751][95]\\nThis type of error is caused by ApolloCmd scripts that try to configure namespaced kernel parameters (sysctls) at runtime.\\nNote\\n[This is not supported by Docker!][96]\\nHowever, in most scenarios, these scripts won’t impact your actual local testing, since they’re rarely tied to your actual application logic. So to workaround this limitation, just go ahead and [delete the script from your local RDE application startup logic][73]. As an alternative, you can [replace the offending sysctl command with a no op command][97] if you have multiple scripts that try to access it.\\n## Getting credential errors when using SQSLocal/S3Local/DynamoDBLocal[¶][28]\\nTypical errors:\\n* The AWS Access Key Id you provided does not exist in our records\\n* The security token included in the request is invalid\\nPlease see [this dedicated troubleshooting guide][98].\\n## Cannot find Cloud resources when running Lambda function[¶][29]\\nThis normally happens when don’t you specify the correct region or use the proper account:\\nNote\\nIf you’re using Lambda, don’t forget to set the `AWS_REGION` environment variable to the region where your resources are provisioned. The region specified in the RDE config doesn’t apply here.\\nWarning\\nIf you attach a dev account section to your personal stack your exposed ports will no longer be accessible from outside the development host (i.e. they will only be reachable via localhost). We do this as a security precaution since we don’t want to allow external entities to access anything that can leverage your AWS credentials.\\n### SDO engineers[¶][30]\\nSDO engineers will need an [Conduit\\\\_Service/#For\\\\_Customers][99] non-production Conduit AWS account and use the `IibsAdminAccess-DO-NOT-DELETE` role (support for other roles will be added later).\\nOnce these prerequisites are met, you need to add the `devAccount` section to your Personal Stack in your RDE definition file:\\n\\n```\\nversion: 2016-11-18\\nstack:\\n  name: TheSampleBeerStack\\n  devAccount:\\n    type: Conduit\\n    # replace the roleArn value with your own specific role arn.\\n    # This probably means replacing 000000000000 with your account number.\\n    roleArn: arn:aws:iam::000000000000:role/IibsAdminAccess-DO-NOT-DELETE\\n  applications:\\n    MyApp:\\n      # ...\\n\\n```\\n#### Fetching Odin materials on your laptop[¶][31]\\n* The Odin daemon that runs as part of your Personal Stack on your laptop is using an OdinEverywhere client. Consequently, it uses the `devAccount`  temporary credentials to fetch odin materials. It will be able to fetch only the materials that are bound to an AWS account, namely the one from `devAccount`.\\n* Conduit managed Odin materials, that contain AWS Users credentials, created **before 1 August 2018**, can’t be attached to an AWS account. The ones created **after 1  August 2018** are part of your bindle, hence the full control (no problem here). See [AssetTrustSystems/Conduit/ManagingAccessToOdinMaterialSets/][100] for more information. The Conduit team intends to backfill the old materials.\\n* If you are using Conduit-managed Odin materials to retrieve AWS credentials, see [Using Odin Credentials][101] for accessing Odin credentials with RDE.\\nWarning\\nUsing AWS Users is discouraged. Even if the credentials are rotated by Conduit, it’s rather preferred to use temporary credentials instead via [HOSM Everywhere][102].\\n#### Workaround for AWS User materials created before 1 August 2018[¶][32]\\n1. If your application relies Odin Material Sets to provision AWS User access-keys, then switch to temporary AWS credentials. Follow [this Java example][103] that adds a `DefaultAWSCredentialsProviderChain` to the credentials provider.  This way the local EC2MetadataService (the one created by RDE) can be queried instead for temporary credentials when the Odin material set cannot be accessed.\\n2. By default the `OdinAWSCredentialsProvider` class will eagerly load the configuration upon construction, and will throw an exception if it can’t access the material set. Even though the `DefaultAWSCredentialsProviderChain` has higher precedence, you will end up getting an Odin exception during start up. The work around for this is to use the `OdinAWSCredentialsProvider` constructor which allows disabling the `fastFail` parameter.\\n3. You’ll need to restart your RDE stack, if it’s already running, to apply these changes:\\n\\n```\\nrde stack restart\\n\\n```\\n4. You’re all done!\\nAdditional references\\n* [Accessing Material Set on Mac for SDO owned AWS account][104]\\n* [RDE devAccount ARN for a Conduit AWS Account][105]\\n* [Assuming a IAM Role along with OdinProvider][106]\\n### AWS engineers[¶][33]\\nWarning\\nAWS Security recommends avoiding use of IAM-Users and permanent access keys. When you use AWS accounts as material set destinations you are going against AWS Security recommendations! If your application relies Odin Material Sets to provision access-keys, then switch to temporary AWS credentials. Follow [this Java example][107] that adds a DefaultAWSCredentialsProviderChain to the credentials provider.\\nThis way the local EC2MetadataService can be queried instead for the temp credentials when the Odin material set cannot be accessed.\\nBefore you get started, consider using IAM-Roles instead of IAM-users. See the warning block above.\\n* AWS engineers will need an Isengard role associated with a non-production account. Use the following settings for the account data classification:\\n![../_images/isengard_account_type.png][108]\\n* Make sure you have an administrator role setup for this account:\\n![../_images/isengard_admin_role_blur.png][109]\\nOnce these prerequisites are met, you need to add the `devAccount` section to your Personal Stack in your RDE definition file:\\n\\n```\\nversion: 2016-11-18\\nstack:\\n  name: TheSampleBeerStack\\n  devAccount:\\n    type: Isengard\\n    # replace the roleArn value with your own specific role arn by copy-pasting it from Isengard (see screenshot above)\\n    roleArn: arn:aws:iam::000000000000:role/Admin\\n  applications:\\n    MyApp:\\n      # ...\\n\\n```\\nYou’re all done. Please note that you need to restart your RDE stack if it’s already running to apply these changes: `rdestackrestart`.\\n## SSL handshake fails when calling Cloud Auth server from Lambda function[¶][34]\\nYou will need to patch the internal certificate trust store for your Lambda function. Follow the suggestions in [this sage question][110]. You can also view some example in our code in [DeceneuCloudAuthServiceHydraTests/configuration/aws\\\\_lambda/lambda-transform.yml][111] and [DeceneuCloudAuthServiceHydraTests/src/com/amazon/DeceneuInternalSampleService/CloudAuthTestCases.java <DeceneuCloudAuthServiceHydraTests/blobs/662182aa1436005be7c566c38544d74a34373c35/–/src/com/amazon/DeceneuInternalSampleService/CloudAuthTestCases.java#L26,L27][112].\\nFor context you can also have a look at one of our previous issues: [RDCT-1783][113].\\n## Application build/deployments fails with “…SymlinkFarmBuilder$SymlinkFarmConflictException: Symlink conflict exception…”[¶][35]\\nThis error occurs when RDE tries to build your application or compute its runtime farm using `brazil-build` and `brazil-path`, respectively. It happens when two or more packages from your runtime dependencies have the same file in their build artifacts.\\nThis isn’t supported by Brazil, and RDE actually does its job of simulating real deployments as this would most likely fail in your Beta/Prod environments as well.\\nYou should look into whether you really need both packages as your runtime dependencies as you can only use one with Brazil (e.g. [BrazilBuildSystem/Concepts/RemoveDependencies][114]). You can find more details here:\\n* [Sage-410055][115]\\n* [Sage-286727][116]\\n* [Sage-304995][117]\\n## Applications can’t retrieve Odin material sets; /var/odin directory doesn’t exist; Odin Everywhere Client is not started[¶][36]\\nExamples:\\n* [Sage-563707][118]\\n* [RDCT-1721][119]\\nTypical error message string:\\n\\n```\\nException in thread \\\"main\\\" java.lang.RuntimeException: Error retrieving material:\\ncom.amazon.foo.bar ...\\n\\n```\\nRDE will not automatically start up the OdinEverywhere daemon for you. That’s the responsibility of your application logic.\\nThe simple reason for that being that your application should be able to start both in an RDE container and on an actual EC2 instance, so it should take care of starting its runtime dependencies on its own. So to verify is there’s an issue in RDE, please first check that your application is able to start properly on an actual EC2 instance.\\nIf not, please make sure that you didn’t miss any step from the [OdinEverywhere onboarding guide][120] (i.e.  maybe you need to add a particular package to your application dependency chain).\\n## lambda-transform.yml no such file or directory[¶][37]\\nExample error message string:\\n\\n```\\nunable to get lambda transform parameters from package \\\"/_path_/_to_/_workspace_/env/_Package_-1.0/runtime\\\"\\nlstat /_path_/_to_/_workspace_/env/_Package_-1.0/runtime/aws_lambda/lambda-transform.yml\\nno such file or directory\\n```\\nThis error is caused because your packages cannot be natively built on MacOs. Please make sure that you use the RDE [container build feature][121] to build your SAM applications instead.\\n## Unable to reach EC2 metadata service[¶][38]\\nPlease see the [dedicated error code help][122] for more details.\\n## I can’t find my Java application log for my Native AWS API Gateway / Lambda application[¶][39]\\nYou can find the API Gateway logs by entering your SAM application container (`rdestackexec_YOUR_RDE_APP_NAME_`). They will be saved in `/home/_username_/logs`.\\nTo have the `log4j2` messages available in the API Gateway logs, you need a custom `log4j2.xml` config file which uses a `LambdaAppender`. For more information, see [Advanced logging with Log4j 2 and SLF4J][123] in the _AWS Lambda User Guide_.\\nNote\\nBe sure to also add a dependency to `Maven-com-amazonaws_aws-lambda-java-log4j2`.\\nAn alternative to `log4j2` is to use a `LambdaLogger` which should work out of the box. The `LambdaActivityBase` class from Native AWS already references a Lambda runtime context which you can use to retrieve the logger.\\nFor example, assuming `GetInAppMessagesActivity` extends `LambdaActivityBase`, then you can run:\\n\\n```\\nthis.getContext().getLogger().log(\\\"custom log message\\\");\\n\\n```\\n## Caught exception refusing to fork/exec /apollo/env/HEXTenantStartup/var/run-service.sh, binary does not exist![¶][40]\\nThis means that the [HEXTenantStartup][124] consumable is not deployed together with your application. Add it as a dependency to your application to get past this problem. For more details, check out [this definition file][125]:\\n\\n```\\n#...\\n  applications:\\n    MyApplication\\n#...\\n      dependencies:\\n        HEXTenantStartup:\\n          type: brazil/apollo\\n          codeURI: ../../../HEXTenantStartup\\n          apolloShimURI: apollo-shim/HEXTenantStartup.json\\n          packages:\\n            HEXTenantStartupOperationalDependencies:\\n              buildTarget: release\\n              isVersionSetTarget: true\\n#...\\n\\n```\\n## Package\\\\(s\\\\) with overridden version pointing to other workspaces are not deployed into the application container[¶][41]\\nAs described in [Apollo Environment Overrides][126], you can override the version of a package from your workspace to point to another workspace. This does not currently work with RDE because we only mount the workspace specified by the `codeURI` field from the definition file. See [RDCT-2111][127] if you’re impacted.\\nHowever, you can workaround this by manually mounting the referenced workspaces containing your packages:\\n\\n```\\nstack:\\n  name: MyStack\\n  applications:\\n    MyApplication:\\n      type: brazil/apollo\\n      ...\\n      mountPoints:\\n      - sourceURI: /path/to/other/workspace\\n        destinationURI: /path/to/other/workspace\\n    ...\\n\\n```\\n## ApolloCmd script failing with line \\\\[some line number\\\\]: \\\\[some command\\\\]: command not found[¶][42]\\nSome Docker images we use to create the containers are minimal and there is a chance for some of the ApolloComs scrips to fail because of a command not installed inside the container. To solve this, you will have to mount a bash script (containing the install commands) inside the container.\\nFor example, to install `nc`, the contents of the script will be:\\n\\n```\\n#!/apollo/bin/env /bin/bash\\n\\nyum install -y nc\\n\\n```\\n### Install custom packages that are not available by default[¶][43]\\nAnother potential use case you might run into is requiring certain commands that are not available in the Docker image by default (e.g. zsh, etc.).\\nAn easy fix would be to use the RDE application mount points to add a custom script that uses `yum` to install them:\\n\\n```\\ntouch mounts/000InstallPackages\\nchmod +x mounts/000InstallPackages\\n\\n```\\nNow go ahead and edit the newly created script using your favorite editor and add the following content:\\n\\n```\\n#!/apollo/bin/env /bin/bash\\n\\nyum install -y ${YOUR_PACKAGE}\\n\\n```\\nNow, make sure you have the following mount point setup inside your application:\\n\\n```\\nstack:\\n  name: TheSampleBeerServiceStack\\n  applications:\\n    TheSampleBeerService:\\n      ...\\n      mountPoints:\\n      ...\\n      - sourceURI: mounts/000InstallPackages\\n        destinationURI: ApolloCmd/PreactivateAdmin/000InstallPackages</font>\\n      ...\\n\\n```\\n## RDE plugin not working due to java.lang.IllegalStateException: failed to find stack name[¶][44]\\nThe error might be a result of a conflict between the RDE plugin and Intellij’s template support. A customer noticed the problem when using the RDE plugin while having template parsing for yaml files enabled through Jinja (which he used to render CloudFormation definition files).\\nTo solve it, manually exclude the RDE `definition.yaml` from being treated as a YAML file. For more information, see [RDCT-2132][128].\\n## ntpstat check fails: Unable to talk to NTP daemon. Is it running?[¶][45]\\nPlease see [RDCT-2174][129] for full reference.\\nIf you’re trying to invoke the `ntpstat` utility as part of your `brazil/apollo` app, you need to do a bit of extra tinkering to make it work:\\n1. Add an explicit mount point to your brazil/apollo application:\\n\\n```\\nmountPoints:\\n- sourceURI: /etc/ntp.conf\\n  destinationURI: /etc/ntp.conf\\n\\n```\\n2. When you invoke the `ntpstat` utility in your ApolloCmd bash script, always use the full path or add `/usr/sbin` to your PATH environment variable. For example, instead of `ntpstat`, use `/usr/sbin/ntpstat` or `PATH=$PATH:/usr/sbinntpstat`.\\n3. Restart your RDE application to apply the new mount point and you should be set.\\n## ApolloCmd/PreactivateAdmin/020CreateCachingLogsDirectory failing with chown: invalid user: ‘builder:qlrm’[¶][46]\\nRDE doesn’t create the builder account expected by the script, and you will have to add it yourself using the solution described below.\\nThe workaround uses the application mount points feature to add a custom ApolloCmd script to your application. You’ll only commit it inside your RDE definition package, so it will never end up on your actual beta/gamma/prod stacks.\\n1. Create a new folder structure inside your RDE definition package. Make sure you’re at the root of the package, and then execute the following:\\n\\n```\\nmkdir -p mounts/scripts\\ntouch mounts/scripts/000CreateBuilderAccount\\nchmod +x mounts/scripts/000CreateBuilderAccount\\n\\n```\\n2. Add the following to the contents of the newly created script:\\n\\n```\\n#!/apollo/sbin/envroot /bin/sh\\n\\n/usr/sbin/useradd -r builder -g amazon\\n\\n```\\n3. Add a new `sourceURI` and `destinationURI``mountPoints` pair to your application:\\n\\n```\\napplications:\\n  TheApplicationWhoseScriptFailed:\\n    ...\\n    mountPoints:\\n    ...\\n    - sourceURI: mounts/scripts/000CreateBuilderAccount\\n      destinationURI: ApolloCmd/PreactivateAdmin/000CreateBuilderAccount</font>\\n    ...\\n\\n```\\n4. Restart your application by running `rdestackstart`.\\n## ApolloCmd script execution fails with invalid group[¶][47]\\nThe [ApolloShimOpConfigHelpers][130] package can change the values returned by the EC2 metadata service for local testing via `apollo-shim-static-replacements` and `apollo-shim-custom-replacements`. You can leverage these benefits in RDE as well. You need to create an `apollo-shim-static-replacements` file in your RDE definition package and then add a mount point for it in your RDE application like so:\\n\\n```\\n...\\nstack:\\n  name: TheNativeBeerServiceStack\\n  applications:\\n    TheNativeBeerService:\\n      type: brazil/codedeploy\\n      # ...\\n      mountPoints:\\n      - sourceURI: mounts/apollo-shim-static-replacements\\n        destinationURI: /opt/apollo-shim-static-replacements\\n...\\n\\n```\\nSome deployments might require changing the permissions for certain files. If this is the case and your local RDE deployment fails (for your codedeploy application) because of a group that could not be found inside the containers, you can create it by relying on the execution of the `/opt/apollo-shim-static-replacements` script during the deployment.\\nIn [RDCT-2768][131], a workaround is proposed which solved the `chgrp:invalidgroup:'qlrm'` error by leveraging `apollo-shim-static-replacements`. The contents of the `apollo-shim-static-replacements` file:\\n\\n```\\n% cat mounts/apollo-shim-static-replacements\\n\\ngroupadd qlrm && useradd -G qlrm qlpuller\\n\\n```\\n## ApolloCmd/PreactivateAdmin/202FetchPorterBrazilCLICredentials failing[¶][48]\\nSee [RDCT-2483][132].\\nThe script is intended to retrieve credentials during deployment time as part of authenticating the host (for more information, see [Amazon Host Identity][133]). It fails as it looks for credentials that are not mounted inside the Docker container.\\nThe workaround is to simply prevent that script from executing by following the steps presented in [Removing an existing ApolloCmd script][73].\\n## failed to set rlimit for open files[¶][49]\\nBy default, `memcached` comes preconfigured with 65535 connections whereas the Docker configuration for RDE suggests 1024.\\nOne solution is to increase the number of open files per container to match the `memcached` default value.\\n1. Edit the Docker config file (`/etc/sysconfig/docker`) and add the following options:\\n\\n```\\nOPTIONS=\\\"--default-ulimit nofile=1024:65535\\\"\\n\\n```\\n2. Restart Docker:\\n\\n```\\nsudo /etc/init.d/docker restart\\n\\n```\\nNote\\nThis fix was tested only in cloud desktops.\\n## Deployment keeps failing with OCI runtime exec failed[¶][50]\\nThis error can occur when your applications (or application dependencies) have the same name. Using unique names should fix the problem.\\n## Apollo deployment fails with chown: cannot dereference ‘/apollo/var/env/APOLLO\\\\_ENV/output/logs/cacheoutd.log’: No such file or directory[¶][51]\\nThis is usually caused by the application mount points to make the Apollo logs directory available on your host. The cause is a broken symlink, either because you’ve cleaned up some (but not all) of the log files from your host, or because the log rotation didn’t complete successfully. The solution is to empty the logs directory from your host completely and then attempt a stack restart.\\n## Deploying a AAA application on laptop fails with ‘tar: This does not look like a tar archive’[¶][52]\\nIf you encounter this error, consider using your Cloud Desktop to deploy your AAA application as a workaround. AAA is made available on laptops by forwarding credentials through a Cloud Desktop. As part of the process, we bundle some files from the Cloud Desktop in a tar archive and send them to the laptop. For more information, see [RDCT-1467][134].\\n## Processes inside containers getting killed - kernel logs show arp\\\\_cache: neighbor table overflow![¶][53]\\nThis can happen for stacks with a large number of applications that exhaust the limits of the ARP cache on the host on which you are running RDE. You can adjust some `sysctl` options in order to work around the issue as described in [RDCT-2841][135].\\n## Script 010SetupMidwayCerts failed with an exit status of 1[¶][54]\\nIf the script fails with the following error:\\n\\n```\\ngetaddrinfo: Temporary failure in name resolution (s3.us-east-1.amazonaws.com:80) excluded from\\ncapture: No server specified, No host specified, No path specified, No public_key specified, No\\nsecret_key specified, No project_id specified\\n\\n```\\nThis may be from stacks with a large number of applications that exhaust the limits of the ARP cache on the host on which you are running RDE. You can adjust some `sysctl` options in order to work around the issue as described in [RDCT-2841][135].\\n## Referencing S3 buckets using the virtual-hosted style in S3Local fails[¶][55]\\nOne of the common errors that you may encounter is:\\n\\n```\\nThe XML you provided was not well-formed or did not validate against our published schema.\\n\\n```\\nThis is fixed by enabling virtual-hosted style references for MinIO by setting the [domain][136] through the `S3Local.domain` OpConfig value in the Apollo shim of your S3Local application (usually `apollo-shim/S3Local.json`):\\n\\n```\\n{\\n  \\\"environment\\\": {\\n    \\\"environmentAlias\\\": \\\"S3Local\\\",\\n    \\\"runAsUser\\\": \\\"nobody\\\"\\n  },\\n  \\\"defaultStack\\\": \\\"S3Local.Prod\\\",\\n  \\\"S3Local.Prod\\\": {\\n    \\\"OCF\\\": {\\n      \\\"ProcessManager\\\": {\\n        \\\"overrideFile\\\": \\\"S3Local.cfg\\\"\\n      },\\n      \\\"PubSub\\\": {\\n        \\\"domain\\\": \\\"prod\\\",\\n        \\\"realm\\\": \\\"_us-east-1_\\\"\\n      },\\n      \\\"S3Local\\\": {\\n        \\\"domain\\\": \\\"_s3.amazonaws.com_\\\"\\n      }\\n    },\\n    \\\"environmentStage\\\": {\\n      \\\"name\\\": \\\"Prod\\\",\\n      \\\"environmentFullName\\\": \\\"S3Local/Prod\\\"\\n    }\\n  }\\n}\\n```\\nNote\\nFor `realm`, make sure that you select the actual AWS region that your application expects.\\nThe `domain` enables virtual host references. Requests must match `(.+).s3.amazonaws.com`. If the base domain is expected to different, change the domain to the appropriate value.\\n## AAA requests failing with Exception in AAASecurityDaemon: Couldn’t find signable header: ‘Accept-Encoding’ in list of required signed headers[¶][56]\\nThis can happen when using HTTPS network mappings to access your AAA applications. RDE uses [sslsplit][137] behind the scenes for the SSL termination which strips `Accept-Encoding` headers (see `thisissueonGitHub<https://github.com/droe/sslsplit/issues/129>`). The workaround is to use TCP network mappings and either use plain HTTP when running locally or perform the TLS termination at the application level. You can find more details and also track the progress on the long-term fix in [RDCT-2879][138].\\n## OdinClient \\\\(OdinEverywhere\\\\) not fetching materials / CDORelay / JLBRelay start-up failing[¶][57]\\nIf you see the following error:\\n\\n```\\njlb.relay.launcher.JlbRelayLauncher: main - Exception occurred; {\\n   jlb.relay.exceptions.FetchTlsDataException: java.lang.RuntimeException: Error retrieving\\n   material\\n\\n```\\nMake sure that you’ve changed the region of your AWS account (by overriding the EC2 metadata values). Note that since 2020-02-12, you also need to specify the `availabilityZone` in the instance identity document.\\n### Overwrite the values returned by the EC2 metadata service from the Personal Stack \\\\(i.e. change the AWS account region\\\\)[¶][58]\\nYou can add the `ec2MetadataURI` field to your RDE definition to specify a YAML file containing the metadata value that you want to overwrite.\\nFor example, if you want to change the region with which your CodeDeploy application is started, you first need to create the metadata overwrite file.\\nRun this at the root of your RDE package:\\n\\n```\\nmkdir -p config\\ntouch config/ec2metadata.yaml\\n\\n```\\nNow add the following content to it:\\n\\n```\\nlatest:\\n  # setting the availability zone in the instance identity document is required since 2020-02-12 because of this change: https://code.amazon.com/reviews/CR-19513613\\n  # more details can be found at https://issues.amazon.com/NADE-6081 and https://issues.amazon.com/issues/RDCT-2893\\n  dynamic:\\n    instance-identity:\\n      document: |-\\n        {\\n          \\\"region\\\": \\\"us-east-1\\\",\\n          \\\"availabilityZone\\\": \\\"us-east-1a\\\"\\n        }\\n  meta-data:\\n    placement:\\n      availability-zone: us-east-1a\\n\\n```\\nFinally, update your RDE definition to use the `config/ec2metadata.yaml` file to overwrite the desired metadata values:\\n\\n```\\nversion: 2016-11-18\\nstack:\\n  name: MyStack\\n  devAccount:\\n    ...\\n  ec2MetadataURI: config/ec2metadata.yaml\\n  applications:\\n    ...\\n\\n```\\nNote\\nThe instance identity document is seen as one YAML entry by RDE so you cannot override just some of its values. If your application needs more entries than just the `region` and `availabilityZone`, you must set all of the values for the document:\\n\\n```\\nlatest:\\n  dynamic:\\n    instance-identity:\\n      document: |-\\n        {\\n          \\\"devpayProductCodes\\\": null,\\n          \\\"availabilityZone\\\": \\\"eu-west-1c\\\",\\n          \\\"privateIp\\\": \\\"10.4.149.136\\\",\\n          \\\"version\\\": \\\"2010-08-31\\\",\\n          \\\"region\\\": \\\"eu-west-1\\\",\\n          \\\"instanceId\\\": \\\"i-668b10ea\\\",\\n          \\\"billingProducts\\\": null,\\n          \\\"instanceType\\\": \\\"m4.2xlarge\\\",\\n          \\\"accountId\\\": \\\"963362704314\\\",\\n          \\\"pendingTime\\\": \\\"2016-07-04T08:40:17Z\\\",\\n          \\\"imageId\\\": \\\"ami-ab0490d8\\\",\\n          \\\"architecture\\\": \\\"x86_64\\\",\\n          \\\"kernelId\\\": null,\\n          \\\"ramdiskId\\\": null\\n        }\\n...\\n\\n```\\nThe values from the file will take precedence when merged with our [defaults][139]. They will then be served through the metadata service and will thus be available to all the applications in your stack.\\nFor the current example, calls to `http://169.254.169.254/_api-version_/meta-data/placement/availability-zone` from inside your Personal Stack will now return `us-east-1a` Note how the yaml structure coincides with the one of the URL of the requested resource.\\nMoreover, the API version is listed as a placeholder because metadata overwritten for the **latest** version is available for all the other (older) interface versions of the EC2 metadata service. However, should you need to overwrite values for a specific version only, you can do so by replacing **latest** with the desired version in the overwrite file.\\nTo make it easier to manually edit the overwrite file and to avoid unexpected issues caused by typos or misalignments, the contents of the file are validated against an [EC2 metadata schema RDEEC2MetadataSchema/blobs/mainline/–/configuration/schema.json][140]. You will be prompted with relevant error messages if validation failures are encountered when trying to start your stack. These must be addressed in order to be able to continue.\\nAnother important mention is that once you’ve started your stack with metadata overwrite enabled, you will be able to **edit the overwrite file on the fly**. The new changes will be picked by the upcoming requests to the metadata service, provided that they are schema-valid. If that is not the case, the last known valid version of the content will be served and the validation errors will be available in the logs of the EC2 metadata service container: `dockerlogs_stackName_.Ec2MetadataProxy`.\\nKeep in mind that even though you can edit the overwrite file while your stack is running, changes to values which are used by your application at start up will, naturally, require a restart.\\nFor further guidance, view a set of valid EC2 metadata overwrite files [from the RDEEC2MetadataSchema package][141].\\n## RDE doesn’t pick up changes to my packages/source code/Config file[¶][59]\\nMake sure that the [codeURI regionalizedTod][89] value points to the correct/desired workspace of your application, especially if you have multiple clones of the same workspace on your host.\\nNote\\nRelative `codeURI` paths are relative to the definition file/the root of the package containing the definition file.\\n## Starting CodeDeploy application fails during execution of the rewrite\\\\_apollo\\\\_shim.sh script[¶][60]\\nThe deployment of your CodeDeploy application fails with the following error:\\n\\n```\\n2020-03-05 02:10:24 [stderr]+ DEPLOYMENT_TYPE=EC2\\n2020-03-05 02:10:24 [stderr]++ curl --retry 3 -m3 -sS http://169.254.169.254/2016-09-02/meta-data/iam/security-credentials/\\n2020-03-05 02:10:24 [stderr]+ DEFAULT_ROLE=RDERole-InternalIdentity\\n2020-03-05 02:10:24 [stderr]++ curl --retry 3 -m3 -sS http://169.254.169.254/latest/dynamic/instance-identity/document\\n2020-03-05 02:10:24 [stderr]+ EC2_INSTANCE_IDENTITY_DOC='{\\n2020-03-05 02:10:24 [stderr] \\\"region\\\": \\\"us-east-1\\\"\\n2020-03-05 02:10:24 [stderr]}'\\n2020-03-05 02:10:24 [stderr]++ grep availabilityZone\\n2020-03-05 02:10:24 [stderr]++ sed 's/\\\\s*\\\"availabilityZone\\\"\\\\s*:\\\\s*\\\"\\\\(.*\\\\)\\\"\\\\s*,\\\\?\\\\s*$/\\\\1/g'\\n2020-03-05 02:10:24 [stderr]+++ curl --retry 3 -m3 -sS http://169.254.169.254/latest/dynamic/instance-identity/document\\n2020-03-05 02:10:24 [stderr]++ echo '{\\n2020-03-05 02:10:24 [stderr] \\\"region\\\": \\\"us-east-1\\\"\\n2020-03-05 02:10:24 [stderr]}'\\n2020-03-05 02:10:24 [stderr]+ EC2_AVAIL_ZONE=\\n\\n```\\nThe issue is caused by the change from [CR-19513613][142] which implies that the region is now retrieved from the instance identity document of the EC2 metadata. This is not backwards compatible to how people were overriding the region up until now.\\nThe fix implies specifying the availability zone in the instance identity document as described [here][143].\\n## Not authorized to perform can administer on Conduit managed dev accounts[¶][61]\\nSample error:\\n\\n```\\nfailed to start personal stack\\nDetails:\\n   failed to start development stack\\n   unable to create start jobs\\n   credential check failed\\n   devAccount check failed\\n   unexpected response from IIBS\\n   \\\"{\\\\\\\"message\\\\\\\":\\\\\\\"{ngo-principal=vyadavmm@MIDWAY.AMAZON.COM, http-remote-address=10.25.7.230,\\n   http-user-agent=Go-http-client/1.1, http-last-forwarded-address=10.25.7.230,\\n   http-actual-address=127.0.0.1, http-x-forwarded-for-addresses=10.25.7.230} not authorized.\\n   Message=Denied:\\\\\\\\nIdentity \\\\\\\\\\\\\\\"{ngo-principal=vyadavmm@MIDWAY.AMAZON.COM,\\n   http-remote-address=10.25.7.230, http-user-agent=Go-http-client/1.1,\\n   http-last-forwarded-address=10.25.7.230, http-actual-address=127.0.0.1,\\n   http-x-forwarded-for-addresses=10.25.7.230}\\\\\\\\\\\\\\\" not authorized through BrassService to perform\\n   \\\\\\\\\\\\\\\"can administer\\\\\\\\\\\\\\\" on AWS account {776825726644,aws,ADS-ATR-DEV}\\\\\\\\nSWAG (Burner) threw an\\n   exception. The account may be closed or invalid. {776825726644}\\\\\\\\n\\\\\\\"}\\\\n\\\"\\n\\n```\\nTo fix this problem, you need to go to [Bindles][144] and make sure that you have `canadminister` rights on the AWS account that your are trying to use.\\n## Additional topics[¶][62]\\n* [Troubleshooting RDE errors][145]\\nNext page:[Troubleshooting RDE errors][145]Previous page:[Definition file placeholders][146]\\n[1]: ../rde_logo_72px.png\\n[2]: #troubleshooting-rde-issues\\n[3]: #access-denied-assumed-role-x-is-not-authorized-to-perform-sts-assumerole-on-resource-role-x\\n[4]: #container-id-execution-finished-with-non-zero-exit-code-1-failed-to-start-stack\\n[5]: #why-am-i-getting-pool-overlaps-with-other-one-on-this-address-space-error-when-running-the-rde-tutorial\\n[6]: #i-m-using-aaa-support-and-receive-aaa-workspace-registration-info-call-failed-loginresponsesentryexception-got-status-code-401-from-sso-login-handler\\n[7]: #my-self-signed-ssl-certificates-have-an-incorrect-root-authority-rdeca-what-gives\\n[8]: #my-stack-has-reached-an-inconsistent-state-and-i-am-unable-to-start-restart-it\\n[9]: #apollocmd-script-execution-fails-with-failed-with-exit-code-205-no-such-file-or-directory\\n[10]: #apollocmd-script-execution-fails-with-exiting-with-error-code-205-and-error-unable-to-execute-script-permission-denied\\n[11]: #coral-service-fails-to-start-com-amazon-coral-ping-checkodinstrategy-error-accessing-odin\\n[12]: #rde-def-create-fails-to-retrieve-version-set-information-could-not-get-permissions-information-for-version-set-group\\n[13]: #hex-coral-service-script-000increaseephemeralportrange-fails-on-application-startup-read-only-file-system-setting-key-net-ipv4-ip-local-port-range\\n[14]: #my-workspace-provisioning-step-fails\\n[15]: #lambda-deploy-step-fails-with-ignoring-function-name-as-no-api-event-sources-are-defined\\n[16]: #rde-has-issues-parsing-my-sam-template-file\\n[17]: #requests-to-cloudauth-backed-services-fail-with-access-denied-from-https-gateway-cloudauth-a2z-com-authorization-grant-response-type-assertion-response-failed-with-status-code-403\\n[18]: #docker-daemon-is-running-but-rde-can-t-connect-to-it\\n[19]: #i-just-can-t-get-docker-running\\n[20]: #deployment-fails-with-api-error-500-mounts-denied-no-context-set\\n[21]: #deployment-fails-for-container-applications-on-cloud-desktops-with-unknown-flag-chown\\n[22]: #why-are-my-packages-rebuilt-wasn-t-the-build-step-supposed-to-be-smart-and-rebuild-the-changes-only\\n[23]: #deployment-fails-with-can-t-exec-kinit-no-such-file-or-directory-at-apollo-env\\n[24]: #aaa-support-could-not-connect-to-unix-domain-socket-at-path-tmp-aaa-be-sock\\n[25]: #calls-to-odineverywhere-fail-with-501-not-implemented\\n[26]: #the-environment-variables-i-added-to-my-rde-apollo-application-definition-are-not-accessible-from-my-apollocmd-scripts\\n[27]: #my-apollo-startup-script-is-failing-with-this-error-read-only-file-system-setting-key\\n[28]: #getting-credential-errors-when-using-sqslocal-s3local-dynamodblocal\\n[29]: #cannot-find-cloud-resources-when-running-lambda-function\\n[30]: #sdo-engineers\\n[31]: #fetching-odin-materials-on-your-laptop\\n[32]: #workaround-for-aws-user-materials-created-before-1-august-2018\\n[33]: #aws-engineers\\n[34]: #ssl-handshake-fails-when-calling-cloud-auth-server-from-lambda-function\\n[35]: #application-build-deployments-fails-with-symlinkfarmbuilder-symlinkfarmconflictexception-symlink-conflict-exception\\n[36]: #applications-can-t-retrieve-odin-material-sets-var-odin-directory-doesn-t-exist-odin-everywhere-client-is-not-started\\n[37]: #lambda-transform-yml-no-such-file-or-directory\\n[38]: #unable-to-reach-ec2-metadata-service\\n[39]: #i-can-t-find-my-java-application-log-for-my-native-aws-api-gateway-lambda-application\\n[40]: #caught-exception-refusing-to-fork-exec-apollo-env-hextenantstartup-var-run-service-sh-binary-does-not-exist\\n[41]: #package-s-with-overridden-version-pointing-to-other-workspaces-are-not-deployed-into-the-application-container\\n[42]: #apollocmd-script-failing-with-line-some-line-number-some-command-command-not-found\\n[43]: #install-custom-packages-that-are-not-available-by-default\\n[44]: #rde-plugin-not-working-due-to-java-lang-illegalstateexception-failed-to-find-stack-name\\n[45]: #ntpstat-check-fails-unable-to-talk-to-ntp-daemon-is-it-running\\n[46]: #apollocmd-preactivateadmin-020createcachinglogsdirectory-failing-with-chown-invalid-user-builder-qlrm\\n[47]: #apollocmd-script-execution-fails-with-invalid-group\\n[48]: #apollocmd-preactivateadmin-202fetchporterbrazilclicredentials-failing\\n[49]: #failed-to-set-rlimit-for-open-files\\n[50]: #deployment-keeps-failing-with-oci-runtime-exec-failed\\n[51]: #apollo-deployment-fails-with-chown-cannot-dereference-apollo-var-env-apollo-env-output-logs-cacheoutd-log-no-such-file-or-directory\\n[52]: #deploying-a-aaa-application-on-laptop-fails-with-tar-this-does-not-look-like-a-tar-archive\\n[53]: #processes-inside-containers-getting-killed-kernel-logs-show-arp-cache-neighbor-table-overflow\\n[54]: #script-010setupmidwaycerts-failed-with-an-exit-status-of-1\\n[55]: #referencing-s3-buckets-using-the-virtual-hosted-style-in-s3local-fails\\n[56]: #aaa-requests-failing-with-exception-in-aaasecuritydaemon-couldn-t-find-signable-header-accept-encoding-in-list-of-required-signed-headers\\n[57]: #odinclient-odineverywhere-not-fetching-materials-cdorelay-jlbrelay-start-up-failing\\n[58]: #overwrite-the-values-returned-by-the-ec2-metadata-service-from-the-personal-stack-i-e-change-the-aws-account-region\\n[59]: #rde-doesn-t-pick-up-changes-to-my-packages-source-code-config-file\\n[60]: #starting-codedeploy-application-fails-during-execution-of-the-rewrite-apollo-shim-sh-script\\n[61]: #not-authorized-to-perform-can-administer-on-conduit-managed-dev-accounts\\n[62]: #additional-topics\\n[63]: https://aws.amazon.com/blogs/security/announcing-an-update-to-iam-role-trust-policy-behavior/\\n[64]: https://code.amazon.com/packages/ApolloShimSetup/commits/3de8874335a238d6cba9a6aabc7ab12127d8cc02\\n[65]: https://code.amazon.com/packages/OrpheusStackTool-RDE/commits/3f21081972ad8312b700fa96e7ce2c7359aa7e1a#apollo-shims/orpheus-stack-tool-shim.json\\n[66]: https://code.amazon.com/packages/GoAmzn-DeceneuCli/blobs/mainline/--/src/com/amazon/deceneu/ca/ca.go\\n[67]: https://code.amazon.com/packages/GoAmzn-DeceneuCli/blobs/mainline/--/src/com/amazon/deceneu/stack/app/endpoint/template.go\\n[68]: ../setting-up-rde/#setup-macos-docker-file-sharing\\n[69]: https://w.amazon.com/bin/view/Coral/Community/AmazonCoralHealthChecker\\n[70]: https://w.amazon.com/bin/view/OdinApolloMaterialChecker_Package_Setup\\n[71]: https://issues.amazon.com/issues/BrazilBX-1097\\n[72]: https://issues.amazon.com/issues/RDCT-878\\n[73]: ../modifying-apollocmd/#howto-remove-existing-apollocmd\\n[74]: https://code.amazon.com/packages/ProjectNimbusPromotionService/blobs/341bb4720d1e1117125aa1dbc1a6404c52fee030/--/definition.yaml#L56-L58\\n[75]: https://issues.amazon.com/issues/RDCT-1129\\n[76]: https://code.amazon.com/packages/RDE-DevWorkflowScripts\\n[77]: https://code.amazon.com/packages/RDESampleJavaLambdaApplication/blobs/9a3f1dbf76dfa51ee7ecadc7c28cde580789a499/--/configuration/sam/template.yml#L19\\n[78]: https://issues.amazon.com/issues/RDCT-1277\\n[79]: https://gateway.cloudauth.a2z.com/authorization_grant?response_type=assertion\\n[80]: https://builderhub.corp.amazon.com/blog/develop-cloudauth-enabled-applications-directly-on-your-laptops-using-rde/#cloudauthsigningregion\\n[81]: https://sage.amazon.dev/questions/461939\\n[82]: https://w.amazon.com/bin/view/C2S/CloudAuth/Troubleshooting\\n[83]: https://sage.amazon.dev/questions/555194\\n[84]: https://issues.amazon.com/issues/CloudAuth-3005\\n[85]: ../troubleshooting-errors/#error-11\\n[86]: https://issues.amazon.com/issues/RDCT-2766\\n[87]: https://issues.amazon.com/issues/RDCT-2775\\n[88]: https://sage.amazon.dev/questions/785306\\n[89]: ../using-workflows/#step-types\\n[90]: https://issues.amazon.com/issues/RDCT-1664\\n[91]: https://issues.amazon.com/issues/RDCT-1666\\n[92]: ../troubleshooting-errors/#error-22\\n[93]: https://w.amazon.com/bin/view/Apollo/Tools/BinEnv#A_note_about_the_user-defined_.28env.d.29_shell_scripts.2C_from_haberman.40\\n[94]: https://code.amazon.com/packages/DeceneuDJSDemo/blobs/6d6b2038e5e5958b7b3b02e294b115f1703cc7c0/--/djs-service/djs-service-init.sh#L10-L12\\n[95]: https://sage.amazon.dev/questions/547751\\n[96]: https://docs.docker.com/engine/reference/commandline/run/#configure-namespaced-kernel-parameters-sysctls-at-runtime\\n[97]: ../modifying-apollocmd/#howto-modify-commands-that-dont-container\\n[98]: ../mocking-aws-locally/#aws-local-troubleshooting\\n[99]: https://w.amazon.com/bin/view/Conduit_Service/#For_Customers\\n[100]: https://w.amazon.com/bin/view/AssetTrustSystems/Conduit/ManagingAccessToOdinMaterialSets/\\n[101]: https://w.amazon.com/bin/view/RDE/Features/Credentials/Odin/\\n[102]: https://w.amazon.com/bin/view/AWSAuth/Projects/HOSMEverywhere\\n[103]: https://code.amazon.com/packages/CdskBackendCommonLib/blobs/306e4f54724b7a082325f007d47735117c86f648/--/src/com/amazon/cdsk/common/credentials/ProvisioningWorkerAWSCredentialsProvider.java#L27-L31\\n[104]: https://sage.amazon.dev/questions/410007\\n[105]: https://sage.amazon.dev/questions/515681\\n[106]: https://sage.amazon.dev/questions/517464\\n[107]: https://code.amazon.com/packages/CdskBackendCommonLib/blobs/306e4f54724b7a082325f007d47735117c86f648/--/src/com/amazon/cdsk/common/credentials/ProvisioningWorkerAWSCredentialsProvider.java#L27\\n[108]: ../_images/isengard_account_type.png\\n[109]: ../_images/isengard_admin_role_blur.png\\n[110]: https://sage.amazon.dev/questions/379708\\n[111]: https://code.amazon.com/packages/DeceneuCloudAuthServiceHydraTests/blobs/662182aa1436005be7c566c38544d74a34373c35/--/configuration/aws_lambda/lambda-transform.yml#L4\\n[112]: https://code.amazon.com/packages/DeceneuCloudAuthServiceHydraTests/src/com/amazon/DeceneuInternalSampleService/CloudAuthTestCases.java <DeceneuCloudAuthServiceHydraTests/blobs/662182aa1436005be7c566c38544d74a34373c35/--/src/com/amazon/DeceneuInternalSampleService/CloudAuthTestCases.java#L26,L27\\n[113]: https://issues.amazon.com/issues/RDCT-1783\\n[114]: https://w.amazon.com/bin/view/BrazilBuildSystem/Concepts/RemoveDependencies\\n[115]: https://sage.amazon.dev/questions/410055\\n[116]: https://sage.amazon.dev/questions/286727\\n[117]: https://sage.amazon.dev/questions/304995\\n[118]: https://sage.amazon.dev/questions/563707\\n[119]: https://issues.amazon.com/issues/RDCT-1721\\n[120]: https://w.amazon.com/bin/view/Odin/OdinEverywhere/NativeAWS/Onboarding\\n[121]: ../definition-file/#container-build\\n[122]: ../troubleshooting-errors/#error-29\\n[123]: https://docs.aws.amazon.com/lambda/latest/dg/java-logging.html#java-logging-log4j2\\n[124]: https://code.amazon.com/packages/HEXTenantStartup\\n[125]: https://code.amazon.com/packages/RDE-CorvegaService/blobs/mainline/--/definition.yaml\\n[126]: https://docs.hub.amazon.dev/docs/brazil/cli-guide/apollo-overrides.html\\n[127]: https://issues.amazon.com/issues/RDCT-2111\\n[128]: https://issues.amazon.com/issues/RDCT-2132\\n[129]: https://issues.amazon.com/issues/RDCT-2174\\n[130]: https://code.amazon.com/packages/ApolloShimOpConfigHelpers\\n[131]: https://issues.amazon.com/issues/RDCT-2768\\n[132]: https://issues.amazon.com/issues/RDCT-2483\\n[133]: https://w.amazon.com/bin/view/AHI\\n[134]: https://issues.amazon.com/issues/RDCT-1467\\n[135]: https://issues.amazon.com/issues/RDCT-2841\\n[136]: https://github.com/minio/minio/tree/master/docs/config#domain\\n[137]: https://www.roe.ch/SSLsplit\\n[138]: https://issues.amazon.com/issues/RDCT-2879\\n[139]: https://code.amazon.com/packages/GoAmzn-DeceneuEC2MetadataProxy/blobs/mainline/--/src/com/amazon/deceneu/ec2proxy/metadata/template.go\\n[140]: https://code.amazon.com/packages/EC2 metadata schema RDEEC2MetadataSchema/blobs/mainline/--/configuration/schema.json\\n[141]: https://code.amazon.com/packages/RDEEC2MetadataSchema/trees/mainline/--/tst/valid\\n[142]: https://code.amazon.com/reviews/CR-19513613\\n[143]: #use-ec2-metadata-service\\n[144]: https://bindles.amazon.com\\n[145]: ../troubleshooting-errors/\\n[146]: ../placeholders/\"}}}"}]}
{"parentUuid":"7289b1c7-e4db-4e21-bfed-cc6b1bdac6ec","isSidechain":false,"userType":"external","cwd":"/Users/snellin","sessionId":"8220d828-1d7f-43d5-8d50-97198a0877d1","version":"1.0.11","message":{"id":"msg_bdrk_017Ws2sZv95hPCvH4TjNCwgJ","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"text","text":"Based on the BuilderHub documentation, here's what I found about your error:\n\n## Summary\n\nYour error indicates a CloudFormation custom resource (CustomCrossAccountZoneDel) is failing because an IAM role lacks permission to assume another role for DNS auto-update functionality.\n\n## Key Details from BuilderHub\n\nThe error pattern \"User: arn:aws:sts::...:assumed-role/... is not authorized to perform: sts:AssumeRole on resource: arn:aws:iam::...:role/...\" is documented in several Amazon internal troubleshooting guides:\n\n1. **MRC Infrastructure Pipelines**: This exact error pattern occurs when IAM roles don't exist or have incorrect trust policies\n2. **RDE Troubleshooting**: IAM recently changed role trust policy behavior - roles must now explicitly trust themselves\n\n## Root Cause Analysis\n\nYour error shows:\n- **Source role**: `Snellin732025StringWarn-F-CustomCrossAccountZoneDel-eKw2xF1ypg3b/Snellin732025StringWarn-F-CustomCrossAccountZoneDe-jQHwe2SHr5VN`  \n- **Target role**: `dns-auto-update-role-us-west-2-beta`\n- **Account**: 619005574897\n\n## Recommended Solutions\n\n1. **Check if the target role exists**: Log into account 619005574897 via Isengard and verify `dns-auto-update-role-us-west-2-beta` exists\n\n2. **Verify trust policy**: The `dns-auto-update-role-us-west-2-beta` needs to trust the source role in its trust policy\n\n3. **IAM policy changes**: Due to recent IAM changes, roles may need explicit self-referential trust policies\n\n4. **Cross-account permissions**: Ensure proper cross-account IAM permissions are configured for DNS operations\n\nThe issue appears to be infrastructure/permissions-related rather than application code, likely requiring IAM role configuration updates."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":4,"cache_creation_input_tokens":21631,"cache_read_input_tokens":63426,"output_tokens":1}},"type":"assistant","uuid":"ff9c32b9-08bd-4ffc-8fba-108388dcb15d","timestamp":"2025-07-28T22:53:19.373Z"}
